{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>The RDK Hardware Porting Kit (HPK) provides a centralized resource for vendors integrating their hardware layer with the RDK stack.  It simplifies this process by providing a unified set of tools, documentation, and test suites.</p> <p>Specifically, the HPK includes:</p> <ul> <li>Hardware Abstraction Layer (HAL) API header files: These define the interfaces vendors must implement to ensure compatibility.</li> <li>Comprehensive software tests: These validate the vendor's HAL implementation against RDK middleware requirements.</li> <li>Standards &amp; Best Practices: Guidelines on coding standards, documentation, branching strategies, and interface development.</li> <li>Testing Methodologies: Outlines various testing levels and frameworks, including TDD and system interface testing.</li> <li>Code Examples &amp; Advanced Topics: Practical examples for dynamic library loading, plugin development, virtual device development, and control plane overviews.</li> <li>FAQ &amp; Troubleshooting: Addresses common challenges related to Git, Vagrant, C macros, testing, and RDK tools.</li> <li>Technology Overviews: Explains key technologies and frameworks like UT-Core and the RDK Docker toolchain.</li> <li>vDevice Support:  Provides the ability to develop and test vendor layers using virtualized hardware within a VM.  This \"vDevice\" approach simulates hardware components and drivers, enabling early testing, cost-effectiveness, reproducibility, and flexibility.  It allows developers to test against various hardware profiles without needing physical hardware.</li> </ul> <p>The HPK serves as a single point of reference, streamlining vendor integration, reducing redundant effort, and promoting consistency across RDK platforms. It accelerates hardware enablement and improves the quality of the RDK ecosystem.</p> <p></p>"},{"location":"external_content/ut-core-wiki/1.-Standards-%26-Development-Process-Flow/","title":"1. Standards & Development Process Flow","text":""},{"location":"external_content/ut-core-wiki/1.-Standards-%26-Development-Process-Flow/#overview","title":"Overview","text":"<p>This document serves as a comprehensive guide and resource center for software development within the RDKCentral org, covering a wide range of topics from coding standards and testing methodologies to frequently asked questions and specific technology overviews.</p> <p>Here's a breakdown of the content:</p> <ul> <li>Standards &amp; Best Practices: This section provides detailed guidelines on coding standards, documentation practices, branching strategies, and interface development, ensuring consistency and quality across projects.</li> <li>Testing Methodologies:  It outlines various testing levels and frameworks, including Test-Driven Development (TDD) and system interface testing, emphasizing the importance of robust testing in the development life-cycle.</li> <li>Code Examples &amp; Advanced Topics:  This section offers practical code examples for dynamic library loading and plugin development, and delves into advanced concepts like virtual device development and control plane overviews.</li> <li>FAQ &amp; Troubleshooting:  A comprehensive FAQ section addresses common challenges and questions related to Git workflows, Vagrant setup,  C macros, testing techniques, and RDK-specific tools.</li> <li>Technology Overviews:  Provides concise explanations of key technologies and frameworks used within the organization, such as the UT-Core framework and RDK Docker tool-chain.</li> </ul> <p>By centralizing this information, the document aims to streamline development processes, reduce on boarding time for new developers, and promote best practices across the organization.</p>"},{"location":"external_content/ut-core-wiki/1.-Standards-%26-Development-Process-Flow/#10-getting-started-with-contribution","title":"1.0 Getting Started with Contribution","text":"<p>To contribute to the RDK, you'll need to choose a delivery model:</p> <p>RDK Central Partners: If you're an RDK Central partner, you might be eligible to contribute as a Tier 1 developer. Please contact [RDK Support Team](mailto:support@rdkcentral.com) to confirm your eligibility.</p> <ul> <li>1.0. Standards: Tier 1 Operator Guide: Branching for Direct Contributions</li> <li>1.0.1 Standards: Tier 2 Operator Guide: Forking for External Contributions</li> </ul>"},{"location":"external_content/ut-core-wiki/1.-Standards-%26-Development-Process-Flow/#11-coding-standards-useful-reading-on-coding-standards","title":"1.1 Coding Standards: Useful reading on coding standards","text":"<p>This section offers resources and guidelines on coding standards, including recommended reading, issue/milestone descriptions, commit message conventions, and semantic versioning.</p> <ul> <li>1.1. Standards: Principles from Code Complete</li> <li>1.2. Standards: Issue Description Guideline</li> <li>1.3. Standards: Milestone Description Guideline</li> <li>1.4. Standards: Commit Message: The 50-72 Rule: A Simple Guide</li> <li>1.5. Standards: Semantic Versioning and Testing Suite Alignment</li> </ul>"},{"location":"external_content/ut-core-wiki/1.-Standards-%26-Development-Process-Flow/#2-general-information","title":"2. General Information","text":"<p>This section provides general information on key topics like documentation standards, branching strategies, interface modification procedures, and repository access policies.</p> <ul> <li>2 Single Source of Truth - HAL Interfaces and Testing Suites</li> <li>2.1. Doxygen: Crafting Excellent Documentation</li> <li>2.2. Standards: Forking And Branching</li> <li>2.3. Standards: Performing Changes to an interface</li> <li>2.4.-Standards:-Repository-Access-and-Branch-Protection-Policy</li> <li>2.5.-Standards:-Feature-Branch-Workflow</li> </ul>"},{"location":"external_content/ut-core-wiki/1.-Standards-%26-Development-Process-Flow/#3-testing","title":"3. Testing","text":"<p>This section outlines testing standards and best practices, covering various levels and types of testing, including TDD and system interface testing.</p> <ul> <li>3.0.0 Standards: Levels of Test for Vendor Layer</li> <li>3.0.1 Standards: Testing Feedback Loops</li> <li>3.1.0 Standards: Overview of Test Driven Development (TDD)</li> <li>3.2.0 Standards: Requirements for building testing suites</li> <li>3.3.0 Standards: L4: System Interface Testing</li> <li>3.4.0 Standards: L4: Vendor Full Stack: Video Smoke Regression Test</li> </ul>"},{"location":"external_content/ut-core-wiki/1.-Standards-%26-Development-Process-Flow/#4-code-examples","title":"4. Code Examples","text":"<p>This section provides code examples demonstrating key standards like dynamic library loading and plugin implementation.</p> <ul> <li>4. Standards: Dynamic Library Loading for Vendor Abstraction</li> <li>4.1 Standards: Dynamically Installable Plug-ins In C</li> </ul>"},{"location":"external_content/ut-core-wiki/1.-Standards-%26-Development-Process-Flow/#5-virtual-device","title":"5. Virtual Device","text":"<p>This section provides an overview of the virtual device (vDevice) and its control plane.</p> <ul> <li>5.0: Standards:-vDevice Overview</li> <li>5.1: Standards: Control Plane Overview)</li> </ul>"},{"location":"external_content/ut-core-wiki/1.-Standards-%26-Development-Process-Flow/#6-training-material","title":"6. Training Material","text":"<p>This section provides resources to help you get started with contributing to the project.</p> <p>Currently available training:</p> <ul> <li>T1: Training: CODEOWNERS: Ensuring Code Quality and Governance: This training explains the <code>CODEOWNERS</code> file and its role in ensuring code quality and proper governance within the project.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.-Standards-%26-Development-Process-Flow/#7-faq","title":"7. FAQ","text":"<p>The FAQ section provides quick answers to common questions, saving users time and effort. Organized by topic, it offers easy access to essential information. </p> <ul> <li>FAQ: Git Flow Support for Multiple mainlines</li> <li>FAQ: Git\u2010Flow: Developers Branching Model</li> <li>FAQ: Release Engineers: Performing a release with git flow</li> <li>FAQ:-Vagrant: Setting Up and Managing Your Vagrant-VM</li> <li>FAQ: Migrating Binaries to <code>Git-LFS</code></li> <li>FAQ: C macro that prints the function name, parameter names with values</li> <li>FAQ: C Macro that prints structure fields</li> <li>FAQ: Black-Box Testing and Code Coverage Metrics</li> <li>FAQ: RDK Docker Toolchain</li> <li>FAQ: Video and Audio Playback Performance Metrics</li> <li>FAQ: Choosing GHEC-ORG or RDKCentral</li> <li>FAQ: Comparing Python Development Platforms</li> <li>FAQ: UT-Core Framework Overview</li> <li>FAQ: Sign up for RDK Central Tier-1 Registration </li> <li>FAQ: Buildroot vs. Yocto Project vs. Bob the Builder</li> <li>FAQ: Software Post Release Development Cycle</li> </ul>"},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/","title":"1.0. Standards: Tier 1 Operator Guide: Branching for Direct Contributions","text":""},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#tier-1-operator-guide-branching-for-direct-contributions","title":"Tier 1 Operator Guide: Branching for Direct Contributions","text":""},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#overview-of-contributions","title":"Overview of Contributions","text":"<p>We welcome contributions from all community members, both Tier 1 (direct access) and Tier 2 (forked workflow) contributors. Your participation is vital to the project's success. Here's how you can get involved:</p> <ul> <li>Code Contributions: We invite you to contribute code, whether it's new features or bug fixes. Please follow the detailed steps below to ensure your contributions align with our project standards.</li> <li>Issue Reporting: If you discover bugs or have enhancement suggestions, please raise an issue in the repository. Your reports help us improve the project efficiently.</li> <li>Discussions and Ideas: We encourage you to initiate discussions on various topics related to the project. Your insights and feedback drive continuous improvement and innovation.</li> </ul> <p>Access Levels and Workflows</p> <ul> <li> <p>Tier 1 Operators (Direct Access): You have direct write access to the main repository. Follow the branching workflow detailed below. see the Tier 1 Registration Process</p> </li> <li> <p>Tier 2 Operators (Forked Workflow): You don't have direct write access. Contribute by forking the repository, see the Tier 2 Guide Operator Guide for detailed instructions.</p> </li> </ul>"},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#contributor-license-agreement-cla","title":"Contributor License Agreement (CLA)","text":"<p>Before your contributions can be accepted into the project, you must sign the RDK Contributor License Agreement (CLA). This legal document ensures that you have the rights to contribute the code and that the community can use your contributions freely. First-time contributors will need to complete the license agreement before their code can be merged:</p>"},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#getting-started-with-git-collaboration","title":"Getting Started with Git Collaboration","text":""},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#1-clone-the-repository","title":"1. Clone the Repository","text":"<p>To start, clone the repository to your local machine: <pre><code>git clone https://github.com/rdkcentral/ut-core.git\n</code></pre></p>"},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#2-set-up-git-flow","title":"2. Set Up Git Flow","text":"<p>We use the Git Flow branching model for managing branches. If you're new to Git Flow, please review this guide:</p> <p>Example of initialising git flow:</p> <pre><code>git flow init -d\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#3-create-a-feature-branch","title":"3. Create a Feature Branch","text":"<p>Create a new feature branch from the 'develop' branch for both new features and bug fixes, adhering to the naming convention: feature/gh_. The  should briefly summarize the branch's purpose. <p>Example of creating a feature branch:</p> <pre><code>git flow feature start gh123_add-logging-enhancements\n</code></pre> <p>Compliance Notice: All contributors must strictly follow our Git branching guidelines. Every branch must be accurately named using the corresponding issue ID from our issue tracker, ensuring traceability and upholding automated workflow integrity. Incorrectly named or untraceable branches will fall under a retention policy, allowing for correction within 30 days before removal. This policy is crucial for maintaining the clarity and reliability of our project management processes.</p>"},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#4-implement-changes","title":"4. Implement Changes","text":"<p>Make changes according to the project\u2019s coding guidelines.</p>"},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#5-commit-your-changes","title":"5. Commit Your Changes","text":"<p>Ensure your commits are clear and adhere to the 50/72 rule: - Summary: Start with an imperative verb, include the GitHub issue ID, and succinctly describe the change. - Body: Optionally, provide a detailed explanation, keeping lines to 72 characters.</p> <p>Example of a Commit Message:</p> <pre><code>Fix #123: Update error handling in authentication module\n\nThis commit enhances error detection and adds comprehensive logging to address frequent issues reported by users.\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#6-push-changes","title":"6. Push Changes","text":"<p>Push your changes to the repository: <pre><code>git push origin feature/gh123_add-logging-enhancements\n</code></pre></p>"},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#7-open-a-pull-request","title":"7. Open a Pull Request","text":"<p>Create a pull request from your branch to the <code>develop</code> branch. It will be automatically assigned for review based on the <code>CODEOWNERS</code> file.</p>"},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#8-merge-the-pull-request","title":"8. Merge the Pull Request","text":"<p>Once approved, merge your branch using Git Flow: <pre><code>git flow feature finish gh123_add-logging-enhancements\n</code></pre></p>"},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#9-code-ownership-and-releases","title":"9. Code Ownership and Releases","text":"<p><code>CODEOWNERS</code> are responsible for reviewing and approving changes. They also manage the release and tagging of components according to the project\u2019s schedule.</p> <p>Example of the CODEOWNERS file: <pre><code># Default owners for everything in the repo\n*       @rdkcentral/ut-core_codeowner\n</code></pre></p>"},{"location":"external_content/ut-core-wiki/1.0.-Standards%3A-Tier-1-Operator-Guide%3A-Branching-for-Direct-Contributions/#requirements-for-contributions","title":"Requirements for Contributions","text":"<p>Please ensure your contributions meet the following: - Adherence to Git Flow - Clear and Concise Commit Messages - Peer Review Approval - Open Discussions and Contributions</p> <p>By following these guidelines, you help maintain the quality and integrity of the project while fostering an inclusive and collaborative community environment. We look forward to your contributions and thank you for being part of our community-driven project.</p>"},{"location":"external_content/ut-core-wiki/1.0.1-Standards%3A-Tier-2-Operator-Guide%3A-Forking-for-External-Contributions/","title":"1.0.1 Standards: Tier 2 Operator Guide: Forking for External Contributions","text":""},{"location":"external_content/ut-core-wiki/1.0.1-Standards%3A-Tier-2-Operator-Guide%3A-Forking-for-External-Contributions/#tier-2-operator-guide-forking-for-external-contributions","title":"Tier 2 Operator Guide: Forking for External Contributions","text":""},{"location":"external_content/ut-core-wiki/1.0.1-Standards%3A-Tier-2-Operator-Guide%3A-Forking-for-External-Contributions/#introduction","title":"Introduction","text":"<p>Welcome to the Tier 2 Operator Guide! This guide is tailored for engineers and third-party contributors who want to enhance the project but don't have direct write access to the main repository. Forking is your key tool, enabling you to experiment and contribute without impacting the original code base.</p>"},{"location":"external_content/ut-core-wiki/1.0.1-Standards%3A-Tier-2-Operator-Guide%3A-Forking-for-External-Contributions/#what-is-forking","title":"What is Forking?","text":"<p>Forking creates a personal copy of a repository on your own GitHub account. This copy is entirely independent, allowing you to modify the code freely without affecting the original project. It's like having your own sandbox to play in!</p>"},{"location":"external_content/ut-core-wiki/1.0.1-Standards%3A-Tier-2-Operator-Guide%3A-Forking-for-External-Contributions/#why-fork","title":"Why Fork?","text":"<ul> <li>Safe Experimentation:  Explore new ideas, fix bugs, or add features without the risk of breaking the main project.</li> <li>Contribution Pathway:  Once your changes are ready, you can submit them as a pull request to the original repository for consideration.</li> <li>Open Source Collaboration:  Forking is the cornerstone of open-source contribution, empowering individuals and teams to work together.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.0.1-Standards%3A-Tier-2-Operator-Guide%3A-Forking-for-External-Contributions/#step-by-step-forking-workflow","title":"Step-by-Step Forking Workflow","text":"<ol> <li>Find the Repository: Locate the project's repository on GitHub.</li> <li>Click \"Fork\":  You'll find this button at the top right corner of the repository page.</li> <li>Choose Destination: Select your GitHub account as the destination for the fork.</li> <li>Clone Your Fork: Clone your newly created fork to your local machine using Git.    <pre><code>git clone https://github.com/&lt;your-username&gt;/&lt;repository-name&gt;.git\n</code></pre></li> <li>Create a Branch: (Optional but recommended) Create a new branch for your specific changes. This keeps your work organized.    <pre><code>git checkout -b feature/my-new-feature\n</code></pre></li> <li>Make Changes: Edit, add, or remove files as needed.</li> <li>Commit Changes: Save your work regularly with clear and descriptive commit messages.    <pre><code>git commit -m \"Add new feature: &lt;description&gt;\"\n</code></pre></li> <li>Push Changes: Upload your commits to your forked repository on GitHub.    <pre><code>git push origin feature/my-new-feature\n</code></pre></li> <li>Create a Pull Request:  Navigate to the original repository and click \"New Pull Request.\" Select your fork and branch, then provide a detailed description of your changes.</li> <li>Collaboration &amp; Review: The maintainers of the original repository will review your pull request, offer feedback, and potentially merge your changes if they align with the project's goals.</li> </ol>"},{"location":"external_content/ut-core-wiki/1.0.1-Standards%3A-Tier-2-Operator-Guide%3A-Forking-for-External-Contributions/#important-considerations","title":"Important Considerations","text":"<ul> <li>Keep Your Fork Up-to-Date:  Regularly sync your fork with the original repository to avoid conflicts.</li> <li>Clear Communication: In your pull request, clearly explain the purpose and benefits of your changes.</li> <li>Be Patient: The review process might take some time.  Be open to feedback and iterate as needed.</li> <li>Respect Project Guidelines: Follow the project's coding conventions and contribution guidelines.</li> </ul> <p>Refer to the RDK Documentation how_to_contribute</p>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/","title":"Standards: Principles from Code Complete (C/C++)","text":"<p>This coding standard inspired by the principles in Steve McConnell's \"Code Complete,\" aiming for clarity, maintainability, and robustness:</p> <ul> <li>\"Effective software construction practices are crucial for maintaining code quality.\"</li> </ul>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#1-layout-and-formatting","title":"1. Layout and Formatting","text":"<ul> <li>Indentation: Use consistent indentation (spaces, not tabs) to clearly show code structure.</li> <li>Line Length: Keep lines to a reasonable length (around 80 characters).</li> <li>Whitespace: Use blank lines to separate logical sections.</li> <li>Braces: Always use braces for blocks, even for single-statement blocks. Place each brace on a new line.</li> </ul> <pre><code>// GOOD\nif (x &gt; 0)\n{\n    std::cout &lt;&lt; \"x is positive\\n\";\n}\nelse\n{\n    std::cout &lt;&lt; \"x is not positive\\n\";\n}\n\n// BAD (no braces for single-statement block)\nif (x &gt; 0)\n    std::cout &lt;&lt; \"x is positive\\n\";\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#2-naming-conventions","title":"2. Naming Conventions","text":""},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#meaningful-names","title":"Meaningful Names:","text":"<pre><code>int employee_count;    \ndouble total_revenue;   \n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#pronounceable-names","title":"Pronounceable Names:","text":"<pre><code>// GOOD\nbool is_valid_input(int input);\n\n// BAD\nbool chk_inp(int in); \n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#consistent-style","title":"Consistent Style:","text":"<p>Stick to a consistent naming convention, e.g., snake_case for variables and PascalCase for classes.</p> <pre><code>double interest_rate;\nclass BankAccount { /* ... */ };\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#3-comments-and-documentation","title":"3. Comments and Documentation","text":""},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#clear-comments","title":"Clear Comments:","text":"<pre><code>// Calculate average temperature to assess if heating is needed (why)\nfloat avg_temperature = calculate_average(temperatures, num_readings);\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#doxygen-comments-c","title":"Doxygen Comments (C++):","text":"<pre><code>/**\n * @brief Calculates the area of a circle.\n * @param radius The radius of the circle.\n * @return The area of the circle.\n */\ndouble calculate_circle_area(double radius) \n{\n    return M_PI * radius * radius;\n}\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#4-functions-and-modules","title":"4. Functions and Modules","text":""},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#cohesion","title":"Cohesion:","text":"<pre><code>// GOOD (Single Responsibility)\ndouble calculate_tax(double price, double tax_rate) \n{\n    // ... implementation\n}\n\n// BAD (Multiple Responsibilities)\nvoid process_order(Order* order) \n{\n    calculate_price(order);\n    apply_discount(order);\n    send_email_confirmation(order);\n}\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#positive-negative-coding-path-c","title":"Positive-Negative Coding Path (C++):","text":"<pre><code>int divide(int numerator, int denominator) \n{\n    // Negative Check (Guard Clause)\n    if (denominator == 0) \n    {\n        throw std::runtime_error(\"Error: Division by zero\");\n    }\n\n    // Positive Flow (Main Logic)\n    return numerator / denominator;\n}\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#5-error-handling-c","title":"5. Error Handling (C++):","text":"<pre><code>try \n{\n    int result = divide(10, 0); // Potential for division by zero\n} \ncatch (const std::runtime_error&amp; e) \n{\n    std::cerr &lt;&lt; \"Error: \" &lt;&lt; e.what() &lt;&lt; std::endl; // Clear error message\n}\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#6-classes-and-objects","title":"6. Classes and Objects","text":""},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#encapsulation","title":"Encapsulation:","text":"<p>Encapsulation bundles data (attributes) and the operations that manipulate that data (methods) into a single unit, the class. This hides implementation details, making the code easier to understand and maintain.</p> <pre><code>// Example (C++)\nclass BankAccount \n{\nprivate: // Private members (encapsulated)\n    double balance;\n\npublic:\n    void deposit(double amount) \n    {\n        balance += amount;\n    }\n\n    double getBalance() const \n    {\n        return balance;\n    }\n};\n</code></pre> <p>In this example, the <code>balance</code> attribute is private, so it can only be modified or accessed through the public <code>deposit</code> and <code>getBalance</code> methods. This protects the internal state of the object.</p>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#inheritance","title":"Inheritance:","text":"<p>Inheritance allows you to create new classes (derived classes) that are based on existing classes (base classes). Derived classes inherit the properties and behaviours of the base class, promoting code reuse and establishing hierarchical relationships.</p> <pre><code>// Example (C++)\nclass Animal // Base class\n{\npublic:\n    virtual void makeSound() const = 0; // Pure virtual function \n};\n\nclass Dog : public Animal // Derived class (inherits from Animal)\n{\npublic:\n    void makeSound() const override \n    {\n        std::cout &lt;&lt; \"Woof!\\n\";\n    }\n};\n\nclass Cat : public Animal // Derived class (inherits from Animal)\n{\npublic:\n    void makeSound() const override \n    {\n        std::cout &lt;&lt; \"Meow!\\n\";\n    }\n};\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#polymorphism","title":"Polymorphism:","text":"<p>Polymorphism enables you to use objects of different classes through a common interface. This flexibility is achieved through virtual functions (C++) or function pointers (C), allowing the same function call to behave differently based on the object's type.</p> <pre><code>// Using polymorphism (C++)\nAnimal* animal1 = new Dog();\nAnimal* animal2 = new Cat();\nanimal1-&gt;makeSound(); // Output: Woof!\nanimal2-&gt;makeSound(); // Output: Meow!\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#7-testing-and-quality-assurance","title":"7. Testing and Quality Assurance","text":""},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#unit-tests","title":"Unit Tests:","text":"<p>Unit tests are small, isolated tests that verify the correctness of individual units of code (e.g., functions, methods).</p> <pre><code>// Example (using Google Test framework in C++)\nTEST(MathTest, Addition) \n{\n    EXPECT_EQ(add(2, 3), 5);\n    EXPECT_EQ(add(-1, 1), 0);\n}\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#code-reviews","title":"Code Reviews:","text":"<p>Code reviews involve having other developers examine your code to catch errors, improve code quality, and share knowledge.</p>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#automated-testing","title":"Automated Testing:","text":"<p>Tools like linters (e.g., Clang-Tidy) and formatters (e.g., ClangFormat) can help you automatically enforce coding standards and detect potential issues.</p>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#8-collaboration-and-communication","title":"8. Collaboration and Communication","text":""},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#clear-commit-messages-example","title":"Clear Commit Messages (Example):","text":"<pre><code>Added error handling for invalid file input in process_data() function. \n</code></pre> <p>See also Commit Message: The 50/72 Rule: A Simple Guide</p>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#pair-programming","title":"Pair Programming:","text":"<p>Involves two developers working on the same code simultaneously, sharing knowledge, catching errors, and improving design.</p>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#documentation","title":"Documentation:","text":"<pre><code>- Use comments within the code to explain complex logic or important decisions.\n- Create external documentation (README files, wikis, etc.) to provide an overview of the project, instructions for use, and API references.\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#additional-considerations","title":"Additional Considerations","text":"<ul> <li>Language-Specific Conventions:  Follow the conventions and best practices specific to the programming language you're using.</li> <li>Performance: Consider performance implications, but prioritize readability and maintainability over premature optimization.</li> <li>Security: Write secure code by following best practices to prevent vulnerabilities (e.g., input validation, sanitization).</li> </ul>"},{"location":"external_content/ut-core-wiki/1.1.-Standards%3A-Principles-from-Code-Complete/#references","title":"References","text":"<ul> <li>McConnell, S. (2004). Code Complete: A Practical Handbook of Software Construction (2nd ed.). Microsoft Press. Retrieved from https://github.com/media-lib/prog_lib/blob/master/general/Steve%20McConnell%20-%20Code%20Complete%20(2nd%20edition).pdf</li> </ul>"},{"location":"external_content/ut-core-wiki/1.2.-Standards%3A-Issue-Description-Guideline/","title":"GitHub Issue Best Practices: Writing Clear and Actionable Tasks/Bugs &amp; Feature Requests","text":""},{"location":"external_content/ut-core-wiki/1.2.-Standards%3A-Issue-Description-Guideline/#why-issue-quality-matters","title":"Why Issue Quality Matters","text":"<ul> <li>Clear Communication: Well-written issues and feature requests ensure everyone understands the requirements and context within the project.</li> <li>Efficient Collaboration: Good documentation helps developers prioritise their efforts, leading to faster resolution times.</li> <li>Trackable Progress:  Clearly defined issues and features make it easier to track progress and assess project status.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.2.-Standards%3A-Issue-Description-Guideline/#core-principles-for-effective-tasksbugs-feature-requests","title":"Core Principles for Effective Tasks/Bugs &amp; Feature Requests","text":"<ol> <li>Problem or Opportunity-Focused: Describe the specific problem you're facing or the opportunity for enhancement. Be detailed and provide relevant context.</li> <li>Concise and Actionable: Clearly state what needs to be fixed or implemented to address the problem/opportunity.</li> </ol>"},{"location":"external_content/ut-core-wiki/1.2.-Standards%3A-Issue-Description-Guideline/#bug-template-recommended","title":"Bug Template (Recommended)","text":"<ul> <li>GitHub Title: <code>Bug:&lt;Short summary of the problem&gt;</code></li> <li>Set the GitHub Issue Type: <code>BUG</code></li> <li>Set the GitHub Label: e.g. <code>Bug</code></li> <li>Set the GitHub Project Field: Engineering Workflow Project Template</li> </ul> <pre><code>### Description:\n\n**Problem:** &lt;Clearly stating the problem upfront is crucial for understanding the issue..&gt;\n\n**Steps to Reproduce:** &lt;If applicable, This is essential for bugs, allowing others to replicate the problem and verify solutions.&gt;\n\n**Expected Behaviour:** &lt;Explain what should happen instead of the current behaviour.&gt;\n\n**Actual Behaviour:** &lt;Describe what is currently happening, highlighting the discrepancy with the expected behaviour.&gt;\n\n### Notes (Optional):\n\n* &lt;Any other helpful info, environment, links, screenshots, Error messages, console logs, relevant code snippets&gt;\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.2.-Standards%3A-Issue-Description-Guideline/#task-template-recommended","title":"Task Template (Recommended)","text":"<ul> <li>GitHub Title: <code>Task:&lt;Short summary of the problem&gt;</code></li> <li>Set the GitHub Issue Type: <code>TASK</code></li> <li>Set the GitHub Label: e.g. <code>documentation</code> or <code>enhancement</code></li> <li>Set the GitHub Project Field: Engineering Workflow Project Template</li> </ul> <pre><code>### Description:\n\n* Goal: &lt;Clearly stating the goal of the task is crucial for understanding the requirement..&gt;\n\n### Notes (Optional):\n\n* &lt;Any other helpful info, environment, links&gt;\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.2.-Standards%3A-Issue-Description-Guideline/#feature-request-template-recommended","title":"Feature Request Template (Recommended):","text":"<ul> <li>GitHub Issue Title: <code>Feature: &lt;Short summary of the problem&gt;</code></li> <li>Set the GitHub Issue Type: <code>FEATURE</code></li> <li>Set the GitHub Label: <code>Documentation</code>, <code>Enhancement</code>, <code>Bug</code> etc.</li> <li>Set the GitHub Project Field: Engineering Workflow Project Template</li> </ul> <pre><code>### Description:\n\n**Problem/Opportunity:** &lt;Describe the user need or problem this feature solves/improves.&gt;\n\n**Proposed Solution:** &lt;Explain your idea for the feature and how it addresses the problem/opportunity.&gt;\n\n### Acceptance Criteria: (Optional)\n\n* &lt;Specific condition 1&gt;\n* &lt;Specific condition 2&gt;\n* ...\n\n### Additional Notes (Optional):\n* &lt;Mockups, sketches, wireframes, etc.&gt;\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.2.-Standards%3A-Issue-Description-Guideline/#examples-of-good-and-bad-feature-requests","title":"Examples of Good and Bad Feature Requests","text":"Bad Feature Request Good Feature Request Title: \"Add more stuff\" Title: \"Add a \"Dark Mode\" toggle to the user interface\" Description: \"We need more features.\" Description:  Many users have requested a dark mode option to reduce eye strain, especially during nighttime usage. This feature would improve accessibility and user experience."},{"location":"external_content/ut-core-wiki/1.2.-Standards%3A-Issue-Description-Guideline/#additional-tips","title":"Additional Tips","text":"<ul> <li>Prioritise: Not all features can be implemented at once. Discuss and prioritise requests based on their impact and feasibility.</li> <li>Collaborate: Encourage feedback and discussion from the team and stakeholders to refine feature requests.</li> <li>Keep it Updated: As development progresses, update feature requests with new information or changes in scope.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.2.-Standards%3A-Issue-Description-Guideline/#lets-write-better-issues-and-feature-requests-together","title":"Let's Write Better Issues and Feature Requests Together!","text":"<p>By following these guidelines, we can improve our communication and collaboration, leading to more focused development and successful project outcomes.  </p> <p>Questions? Feedback? Reach out to your team lead or project manager for assistance.</p>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/","title":"GitHub Milestone Description Guideline","text":"<p>This guide exists to empower teams using GitHub to communicate project progress clearly and effectively.  By standardizing the way milestones are described, including the use of semantic versioning, it ensures that everyone involved (developers, project managers, stakeholders) has a shared understanding of the project's trajectory. This leads to better coordination, informed decision-making, and ultimately, a higher likelihood of successful project delivery.</p>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#1-title-for-release-milestone-with-semantic-version-tag","title":"1. Title for Release Milestone (with Semantic Version Tag):","text":"<ul> <li>Use a brief, action-oriented title that summarizes the milestone's core purpose.</li> <li>Include a semantic version tag at the beginning of the title. This tag should follow the Major.Minor.Patch/Bugfix format (e.g., 1.2.0, 0.1.3).</li> <li>Include repository name in milestone titles to streamline planning.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#examples","title":"Examples:","text":"<pre><code>1.0.0 - ut_core: Initial Release\n</code></pre> <pre><code>0.3.1 - ut_core: Beta Testing\n</code></pre> <pre><code>2.5.0 - ut_core: Major Feature Upgrade.\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#11-title-for-internal-milestone","title":"1.1 Title for Internal Milestone:","text":"<ul> <li>Use a brief, descriptive title that highlights the phased delivery nature of the milestone and its focus on progressively merging code into the main development branch.</li> <li>Include the repository name in the milestone title to streamline planning.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#examples_1","title":"Examples:","text":"<pre><code>ut_core: Phased Integration - Part 1\n</code></pre> <pre><code>ut_core: Rolling Integration - Feature X\n</code></pre> <pre><code>ut_core: Pre-Release Integration\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#2-goals-1-3-sentences","title":"2. Goals (1-3 sentences):","text":"<ul> <li>Explain the \"why\" behind the milestone. What overall goal does it serve within the project?</li> <li>Briefly mention the target audience or impact area if relevant.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#example","title":"Example:","text":"<pre><code>## Goals\n\nThis milestone focuses on improving user retention by enhancing the on-boarding experience for new customers.\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#3-key-deliverables-bulleted-list","title":"3. Key Deliverables (Bulleted List)","text":"<ul> <li>List the 3-5 most significant features, functionalities, or outcomes that define the milestone's success.</li> <li>Use <code>[ ]</code> - This allows in the github UI to click on tasks completed</li> <li>Use clear, specific language that aligns with your project's terminology, this should be the title of your task</li> <li>Optionally, link each deliverable to its corresponding GitHub issue or pull request (e.g., \"Implement user profile customization (#123)\").</li> <li>This information (including links), can be mirrored in Project Management Tracking tools, e.g. Jira as User Stores.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#example_1","title":"Example","text":"<pre><code>## Key Deliverables (Bulleted List)\n\n  * [ ] Implement basic user authentication and authorization (#45)\n  * [ ] Build core product functionality for content creation and sharing (#52)\n  * [ ] Design and launch initial user interface (#68)\n  * [ ] Set up analytics tracking for key user actions (#71)\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#4-exit-criteria","title":"4. Exit Criteria:","text":"<ul> <li>If applicable, mention measurable targets that will indicate whether the milestone is achieved.</li> <li>These could be quantitative (e.g., \"Reduce user churn by 15%\") or qualitative (e.g., \"Positive feedback from beta testers\").</li> </ul>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#example_2","title":"Example:","text":"<pre><code>## Exit Criteria\n\n * At least 50 beta users actively using the platform\n * Positive feedback on core features from at least 75% of beta users\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#5-timeline-or-due-date","title":"5. Timeline or Due Date:","text":"<ul> <li>Include a target completion date or a general timeframe if known.</li> <li>This helps communicate expectations and urgency.</li> <li>This should be reflected in the github meta data for the milestone.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#example_3","title":"Example","text":"<pre><code>## Due Date (GitHub MetaData)\n\nSeptember 30, 2024\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#6-additional-notes-optional","title":"6. Additional Notes (Optional):","text":"<ul> <li>Briefly mention any dependencies on external factors, other teams, or specific technologies.</li> <li>Highlight any known risks or challenges that might impact the milestone.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#example_4","title":"Example","text":"<pre><code>## Additional Notes\n\n  * Dependent on completion of API backend by the development team.\n  * Potential risk: Limited resources for user testing and feedback collection.\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#why-semantic-versioning-in-milestone-titles","title":"Why Semantic Versioning in Milestone Titles?","text":"<ul> <li>Clear Communication:  It instantly signals the stage and scale of the release (major, minor, or patch).</li> <li>Organized Tracking: It makes it easy to track the evolution of your project through milestones.</li> <li>Consistent Expectations:  It sets clear expectations for what kind of changes users can anticipate. </li> </ul>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#7-template-paste-able","title":"7. Template (Paste-able)","text":"<p>Below is the text that can be pasted in as a template.</p>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#github-metadata-fields","title":"GitHub Metadata Fields","text":"<ul> <li>Title: <code>&lt;Semantic Version Tag&gt; - &lt;GitHub Project&gt;: &lt;Milestone Title&gt;</code></li> <li>Due date (optional): <code>dd/mm/yyyy</code></li> <li>Description:</li> </ul> <pre><code>## Goals\n\n*Briefly describe the purpose of the milestone and its impact on the project.*\n\n## Key Deliverables\n\n* [ ] &lt;Deliverable 1&gt; (Issue/PR #)\n* [ ] &lt;Deliverable 2&gt; (Issue/PR #)\n* [ ] &lt;Deliverable 3&gt; (Issue/PR #)\n* [ ] ...\n\n## Exit Criteria\n\n* &lt;Metric 1&gt;\n* &lt;Metric 2&gt;\n* ...\n\n## Additional Notes (Optional)\n\n### Dependencies\n\n* &lt;Metric 1&gt;\n\n### Risks\n\n* &lt;Metric 1&gt;\n\n### Challenges\n\n* &lt;Metric 1&gt;\n\n### Up-link Data\n\n* **Jira:** &lt;project&gt;-&lt;id&gt;  \n    * This Jira issue details the user story that directly aligns with this milestone's goals and deliverables.\n    * Include the Jira ID for easy reference and tracking.\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#example-populated-template","title":"Example populated template","text":""},{"location":"external_content/ut-core-wiki/1.3.-Standards%3A-Milestone-Description-Guideline/#github-fields","title":"GitHub Fields","text":"<ul> <li>Title: <code>1.0.0 - ut-core: Initial Release</code></li> <li>Due date (optional): <code>30/10/2024</code></li> <li>Description:</li> </ul> <pre><code>## Goals\n\nThis milestone marks the official launch of our product, introducing core features and functionality to the market. \n\n### Key Deliverables\n\n* [ ] Implement basic user authentication and authorization (#45)\n* [ ] Build core product functionality for content creation and sharing (#52)\n* [ ] Design and launch initial user interface (#68)\n* [ ] Set up analytics tracking for key user actions (#71)\n\n## Exit Criteria\n\n* At least 50 beta users actively using the platform\n* Positive feedback on core features from at least 75% of beta users\n\n## Additional Notes:\n\n### Dependencies\n\n* Dependent on completion of API back-end by the development team.\n\n### Risks\n\n* Potential risk: Limited resources for user testing and feedback collection.\n\n### Up-link Data\n\n* **Jira:** RDK-1234\n</code></pre>"},{"location":"external_content/ut-core-wiki/1.4.-Standards%3A-Commit-Message%3A-The-50%E2%80%9072-Rule%3A-A-Simple-Guide/","title":"1.4. Standards: Commit Message: The 50\u201072 Rule: A Simple Guide","text":"<p>The 50/72 rule is a widely adopted convention for formatting Git commit messages. It provides a clear and concise structure that makes it easier to understand the changes made in each commit. The rule breaks down as follows:</p> <ol> <li>Subject Line (50 Characters or Less):</li> <li>Summarize the key change in a brief, imperative sentence (e.g., \"Fix typo in README,\" \"Add new user registration feature\").</li> <li>Use the present tense.</li> <li>Avoid vague or overly general messages.</li> <li> <p>Use imperative verbs:</p> <ul> <li>Add (e.g., \"Add a change to the code.\")</li> <li>Clean (e.g., \"Cleaned unwanted files\")</li> <li>Fix (e.g., \"Fix the broken build.\")</li> <li>Improve (e.g., \"Improve the code documentation.\")</li> <li>Merge (e.g., \"Merge the branch into develop.\")</li> <li>Refactor (e.g., \"Refactor the class for better readability.\")</li> <li>Remove (e.g., \"Remove the duplicate files.\")</li> <li>Test (e.g., \"Test the new feature thoroughly.\")</li> <li>Update (e.g., \"Update the dependencies.\")</li> </ul> </li> <li> <p>Body (72 Characters per Line, Optional):</p> </li> <li>Provide more context and details about the change. Explain the motivation behind the change, the problem it solves, and any relevant implementation details.</li> <li>Use complete sentences.</li> <li> <p>Wrap lines at 72 characters to ensure readability in various environments (e.g., terminals, code editors).</p> </li> <li> <p>Blank Line:</p> </li> <li>Separate the subject line and body with a single blank line.</li> </ol> <p>Example Overview:</p> <pre><code>Update user profile validation (50 characters)\n\nImplement stricter validation rules for user profile fields to prevent invalid data entry. Added checks for:\n\n* Minimum password length (8 characters)\n* Valid email format\n* Unique username\n\nUpdated the UI to display appropriate error messages. (72 characters)\n</code></pre> <p>Example Reality:</p> <pre><code>Fix #123: Update error handling in authentication module\n\nThis commit enhances error detection and adds comprehensive logging to address frequent issues reported by users.\n</code></pre> <p>Why the 50/72 Rule Matters:</p> <ul> <li>Readability: Makes commit history easier to scan and understand.</li> <li>Maintainability: Helps future developers (including yourself) grasp the reasoning behind past changes.</li> <li>Collaboration: Provides context for code reviews and discussions.</li> <li>Automation: Well-formatted commit messages can be used by tools for automated changelog generation or issue tracking integration.</li> </ul> <p>Tips for Writing Great Commit Messages:</p> <ul> <li>Be Specific: Avoid vague messages like \"Update code\" or \"Fix bug.\"</li> <li>Explain Why, Not Just What: Describe the problem the commit solves and the motivation behind the change.</li> <li>Focus on One Change: Each commit should ideally represent a single, logical change.</li> <li>Review Your Message: Before committing, double-check that your message is clear, concise, and accurately describes the change.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.5.-Standards%3A-Semantic-Versioning-and-Testing-Suite-Alignment/","title":"1.5. Standards: Semantic Versioning and Testing Suite Alignment","text":""},{"location":"external_content/ut-core-wiki/1.5.-Standards%3A-Semantic-Versioning-and-Testing-Suite-Alignment/#semantic-versioning-and-testing-suite-alignment","title":"Semantic Versioning and Testing Suite Alignment","text":"<p>This document outlines how to use semantic versioning SemVer in conjunction with a the testing suite strategy. We'll follow the <code>major.minor.bugfix/doc</code> format and establish clear guidelines for versioning and testing.</p>"},{"location":"external_content/ut-core-wiki/1.5.-Standards%3A-Semantic-Versioning-and-Testing-Suite-Alignment/#semantic-versioning-semver","title":"Semantic Versioning (SemVer)","text":"<p>SemVer is a widely adopted versioning system that uses a three-part version number: <code>MAJOR.MINOR.BUGFIX</code>.</p> <ul> <li>MAJOR: Increased when you make incompatible API changes.</li> <li>MINOR: Increased when you add functionality in a backwards-compatible manner.</li> <li>BUGFIX/DOC: Increased when you make backwards-compatible bug fixes or documentation upgrades.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.5.-Standards%3A-Semantic-Versioning-and-Testing-Suite-Alignment/#versioning-guidelines","title":"Versioning Guidelines","text":"<ol> <li> <p>Interface Extension:</p> <ul> <li>If you extend an interface without requiring the caller to rebuild, it's a MINOR change.</li> <li>If the caller needs to rebuild due to the interface extension, it's a MAJOR change.</li> </ul> </li> <li> <p>Bug Fixes and Documentation:</p> <ul> <li>Bug fixes and documentation changes are considered BUGFIX or DOC changes, respectively.</li> </ul> </li> </ol>"},{"location":"external_content/ut-core-wiki/1.5.-Standards%3A-Semantic-Versioning-and-Testing-Suite-Alignment/#testing-suite-alignment","title":"Testing Suite Alignment","text":"<ol> <li> <p>Major and Minor Alignment:</p> <ul> <li>Testing suites should be aligned with MAJOR.MINOR versions.</li> <li>Each testing suite should comprehensively test all functions within that specific <code>MAJOR.MINOR</code> version.</li> </ul> </li> <li> <p>Bugfix/Doc Update Ingestion:</p> <ul> <li>BUGFIX and DOC upgrades should be automatically ingested into the testing suite to ensure compatibility with the existing interface.</li> </ul> </li> <li> <p>Minor Upgrade and Testing Suite:</p> <ul> <li>When a MINOR upgrade introduces new functionality, the corresponding testing suite must also be upgraded to support and test that new functionality.</li> </ul> </li> <li> <p>Testing Suite Cloning:</p> <ul> <li>Testing suites should be cloned and aligned with MAJOR.MINOR versions to maintain separate test coverage for each distinct interface.</li> </ul> </li> </ol>"},{"location":"external_content/ut-core-wiki/1.5.-Standards%3A-Semantic-Versioning-and-Testing-Suite-Alignment/#ut-core-template-scripts-and-version-selection","title":"UT-Core Template Scripts and Version Selection","text":"<p>UT-Core template scripts allow for selecting the new version before the testing suite is released. </p> <ul> <li>The HALIF <code>build_ut.sh</code> script automatically selects the next highest version number.</li> <li>This enables releases with a fixed tag ahead of testing suite implementation.</li> <li>Testing suites must be selected via tags, facilitating a streamlined release process.</li> </ul>"},{"location":"external_content/ut-core-wiki/1.5.-Standards%3A-Semantic-Versioning-and-Testing-Suite-Alignment/#example-workflow-hal-interface-upgrade","title":"Example Workflow: HAL Interface Upgrade","text":"<ol> <li>Development: You add a new backwards-compatible feature to your HAL interface.</li> <li>Versioning: Increment the MINOR version (e.g., from 1.2.5 to 1.3.0).</li> <li>Testing Suite:  Prepare the corresponding testing suite (e.g., <code>1.3.x</code>) to include tests for the new feature. This might involve creating a new branch or updating configuration files.  (The testing suite itself will be released later.)</li> <li>Release: <ul> <li>Release the new version (1.3.0) of your HAL interface. </li> <li>Update the <code>build_ut.sh</code> script in the HAL implementation to set <code>UT_PROJECT_VERSION=\"1.3.\"</code>. This ensures that when the 1.3.x testing suite is released, it will be automatically selected.</li> </ul> </li> </ol>"},{"location":"external_content/ut-core-wiki/1.5.-Standards%3A-Semantic-Versioning-and-Testing-Suite-Alignment/#example-workflow-hal-testing-suite-upgrade","title":"Example Workflow: HAL Testing Suite Upgrade","text":"<ol> <li>Development:  Develop new functions or upgrades for the testing suite to accommodate the new features in the released HAL interface (e.g., 1.3.0).</li> <li>Versioning: Increment the MINOR version of the testing suite (e.g., from 1.2.x to 1.3.0).</li> <li>Release: Release the new version of your testing suite (1.3.0). The <code>build_ut.sh</code> scripts in the HAL implementation, which were previously updated to <code>UT_PROJECT_VERSION=\"1.3.\"</code>, will now automatically select this new testing suite version.</li> </ol>"},{"location":"external_content/ut-core-wiki/1.5.-Standards%3A-Semantic-Versioning-and-Testing-Suite-Alignment/#example-workflow-bug-fix-in-testing-suite","title":"Example Workflow: Bug Fix in Testing Suite","text":"<ol> <li>Bug Fix: You discover and fix a bug in the released testing suite.</li> <li>Versioning: Increment the BUGFIX version of the testing suite (e.g., from 1.3.0 to 1.3.1).</li> <li>Release: Release the bug fix version of the testing suite. The <code>build_ut.sh</code> scripts will automatically use this updated version.</li> </ol>"},{"location":"external_content/ut-core-wiki/1.5.-Standards%3A-Semantic-Versioning-and-Testing-Suite-Alignment/#benefits-of-this-approach","title":"Benefits of this Approach","text":"<ul> <li>Clear Versioning: Ensures consistent and predictable versioning practices.</li> <li>Comprehensive Testing: Guarantees thorough testing of all functionalities for each interface version.</li> <li>Streamlined Release Process: Facilitates efficient release cycles with automated version selection and testing suite alignment.</li> <li>Improved Code Quality: Reduces the risk of regressions and ensures compatibility across versions.</li> </ul>"},{"location":"external_content/ut-core-wiki/2.-Standards%3A-Single-Source-of-Truth-%E2%80%90-HAL-Interfaces-and-Testing-Suites/","title":"2. Standards: Single Source of Truth \u2010 HAL Interfaces and Testing Suites","text":""},{"location":"external_content/ut-core-wiki/2.-Standards%3A-Single-Source-of-Truth-%E2%80%90-HAL-Interfaces-and-Testing-Suites/#introduction","title":"Introduction","text":"<p>This document details our transition to a centralized, transparent approach for managing HAL interfaces and testing suites. This change aims to enhance development, boost collaboration, and resolve past issues with fragmented repositories and outdated practices.</p>"},{"location":"external_content/ut-core-wiki/2.-Standards%3A-Single-Source-of-Truth-%E2%80%90-HAL-Interfaces-and-Testing-Suites/#challenges-of-the-previous-system","title":"Challenges of the Previous System","text":"<p>Our previous development landscape faced several challenges:</p> <ul> <li>Fragmented repositories: Interfaces and testing suites were scattered across different locations, making access and collaboration difficult.</li> <li>Outdated version control: Manual syncing and inconsistent branching led to discrepancies and errors.</li> <li>Limited accessibility: Vendors and third parties lacked proper access to essential resources.</li> <li>Multiple code locations: Internal, collaboration, and final code locations caused confusion and maintenance overhead.</li> <li>Rewritten commit histories: Login credential changes forced commit history rewrites, obscuring development history.</li> </ul>"},{"location":"external_content/ut-core-wiki/2.-Standards%3A-Single-Source-of-Truth-%E2%80%90-HAL-Interfaces-and-Testing-Suites/#introducing-the-single-source-of-truth-approach","title":"Introducing the Single Source of Truth Approach","text":"<p>To address the challenges of scattered documentation and inconsistent information, we're adopting a single source of truth model.</p> <p>This means:</p> <ul> <li>Centralised repository: All interfaces, testing suites, and documentation will be housed in a central repository, either publicly or privately on rdkcentral.</li> <li>High-Quality Documentation:  We are committed to providing comprehensive, up-to-date documentation, including:<ul> <li>Conceptual documentation:  Explaining the architecture, design principles, and key concepts.</li> <li>API Documentation with Doxygen:  Detailed API references generated with Doxygen, ensuring accuracy and consistency.</li> <li>Tutorials and Examples: Practical guides and examples to help developers get started quickly.</li> </ul> </li> <li>Transparent access: Vendors and third parties will have clear, consistent access to all resources, including all documentation.</li> <li>Semantic versioning: We'll use semantic versioning to ensure compatibility between old and new interfaces and keep documentation aligned with each version.</li> <li>Fixed version usage: Components will use fixed interface versions for stability, referencing the corresponding documentation version.</li> <li>Upgraded interfaces and testing suites: We'll upgrade the interfaces and the testing suites in the open, with documentation updated simultaneously.</li> </ul>"},{"location":"external_content/ut-core-wiki/2.-Standards%3A-Single-Source-of-Truth-%E2%80%90-HAL-Interfaces-and-Testing-Suites/#benefits-of-the-new-system","title":"Benefits of the New System","text":"<p>This new system provides numerous benefits:</p> <ul> <li>Simplified development process: Clear visibility and access to resources, including easy-to-find documentation, streamline workflows.</li> <li>Enhanced collaboration: Shared knowledge and resources, along with a common understanding fostered by consistent documentation, improve collaboration.</li> <li>Reduced errors and inconsistencies: A single reference point for code and documentation minimises discrepancies and errors.</li> <li>Improved efficiency and time savings: Streamlined workflows and readily available documentation increase efficiency and save time.</li> <li>Increased transparency and trust: Open access to information, including all documentation for all parties, fosters trust and transparency.</li> <li>Improved developer experience: High-quality documentation makes it easier for developers to understand, use, and integrate with our platform.</li> <li>Reduced support costs: Clear and comprehensive documentation reduces the need for support requests.</li> </ul>"},{"location":"external_content/ut-core-wiki/2.-Standards%3A-Single-Source-of-Truth-%E2%80%90-HAL-Interfaces-and-Testing-Suites/#conclusion","title":"Conclusion","text":"<p>This transition to a single source of truth is a significant advancement in HAL interface development. We're dedicated to continuous improvement and welcome participation and feedback from all stakeholders. Through open communication and collaboration, we can ensure the success of this initiative and provide an enhanced development experience for everyone.</p>"},{"location":"external_content/ut-core-wiki/2.1.-Standards%3A-Doxygen%3A-Crafting-Excellent-Documentation/","title":"2.1. Standards: Doxygen: Crafting Excellent Documentation","text":""},{"location":"external_content/ut-core-wiki/2.1.-Standards%3A-Doxygen%3A-Crafting-Excellent-Documentation/#doxygen-governance-manual-crafting-excellent-documentation","title":"Doxygen Governance Manual: Crafting Excellent Documentation","text":""},{"location":"external_content/ut-core-wiki/2.1.-Standards%3A-Doxygen%3A-Crafting-Excellent-Documentation/#introduction","title":"Introduction","text":"<p>Clear and well-structured documentation is essential for code maintainability, readability, and collaboration. Doxygen is a powerful tool that generates documentation from source code comments. This manual aims to establish best practices and guidelines for writing Doxygen comments that enhance the understanding and usability of your codebase.</p>"},{"location":"external_content/ut-core-wiki/2.1.-Standards%3A-Doxygen%3A-Crafting-Excellent-Documentation/#core-principles","title":"Core Principles","text":"<ul> <li>Clarity: Write comments that are easy to understand, even for developers who are not familiar with the specific codebase. Avoid jargon, ambiguity, and unnecessary technical details.</li> <li>Conciseness: Be brief and to the point. Avoid long, rambling sentences and paragraphs. Use clear, concise language to convey essential information.</li> <li>Consistency: Follow a consistent style and formatting throughout your Doxygen comments. This includes indentation, spacing, tag usage, and the level of detail provided.</li> <li>Completeness: Ensure your comments cover all the essential aspects of the code element being documented. Include information on the purpose, parameters, return values, possible errors, and any relevant side effects.</li> <li>Accuracy: Double-check your comments for technical correctness and ensure they accurately reflect the code's behavior and functionality.</li> </ul>"},{"location":"external_content/ut-core-wiki/2.1.-Standards%3A-Doxygen%3A-Crafting-Excellent-Documentation/#best-practices","title":"Best Practices","text":"<ul> <li>Use <code>/**! */</code> for Single-Line Comments: This is the preferred format for brief descriptions, eliminating the need for the <code>@brief</code> tag:</li> </ul> <pre><code>/**! Retrieves the current Ethernet WAN interface name. */\n</code></pre> <ul> <li>Use <code>/** ... */</code> for Multi-Line Comments: For functions with parameters, return values, or more detailed explanations, use multi-line comments to maintain readability:</li> </ul> <pre><code>/**\n * @brief Initiates a firmware update and factory reset.\n * \n * This function updates the device's firmware (optionally from a specified URL) \n * and then performs a factory reset.\n *\n * ... (more details)\n */\n</code></pre> <ul> <li> <p>Focused <code>@brief</code> Tags:  Keep the <code>@brief</code> description concise and action-oriented, summarizing the core purpose of the function or data structure.</p> </li> <li> <p>Informative <code>@param</code> and <code>@returns</code>:</p> <ul> <li><code>@param</code>: Clearly state the parameter's purpose, expected type, and any constraints or valid values. Use <code>-</code> to separate the parameter name from its description.</li> <li><code>@returns</code>: Provide a general overview of the return value and its meaning.</li> </ul> </li> <li> <p>Detailed <code>@retval</code>s: List each possible return value, followed by a hyphen and a clear explanation.</p> </li> <li> <p>Use Additional Tags: Leverage other Doxygen tags like <code>@note</code>, <code>@warning</code>, <code>@see</code>, and <code>@deprecated</code> to provide supplementary information, warnings, references, or deprecation notices.</p> </li> <li> <p>Error Handling (TODO):  Prioritize moving away from generic <code>RETURN_ERR</code> values. Instead, define and use an enum for specific error codes to enhance debugging and clarity.</p> </li> </ul>"},{"location":"external_content/ut-core-wiki/2.1.-Standards%3A-Doxygen%3A-Crafting-Excellent-Documentation/#example-well-documented-function","title":"Example: Well-Documented Function","text":"<pre><code>/**!\n * @brief Retrieves the current DOCSIS registration status.\n *\n * This function populates a provided `CMMGMT_CM_DOCSIS_INFO` structure with DOCSIS registration details. \n *\n * @param[out] pinfo - Pointer to a pre-allocated `CMMGMT_CM_DOCSIS_INFO` structure.\n *\n * @returns Status of the operation:\n * @retval RETURN_OK - On success.\n * @retval RETURN_ERR - On failure (e.g., retrieval error, invalid input).\n *\n * @note The caller is responsible for providing the `PCMMGMT_CM_DOCSIS_INFO` structure.\n */\nINT docsis_GetDOCSISInfo(PCMMGMT_CM_DOCSIS_INFO pinfo);\n</code></pre>"},{"location":"external_content/ut-core-wiki/2.1.-Standards%3A-Doxygen%3A-Crafting-Excellent-Documentation/#common-pitfalls-to-avoid","title":"Common Pitfalls to Avoid","text":"<ul> <li>Repetition: Avoid repeating information that is already clear from the code element's name or type.</li> <li>Vague Language: Be as specific as possible in your descriptions.</li> <li>Incorrect Information: Double-check your comments for technical accuracy.</li> <li>Overly Long Comments: Keep comments concise and focused on the most important details.</li> </ul>"},{"location":"external_content/ut-core-wiki/2.2.-Standards%3A-Forking-And-Branching/","title":"2.2. Standards: Forking And Branching","text":"<p>Forking and branching in Git are distinct tools, each with its own purpose:</p> <ul> <li>Forking: Creating an independent copy of a repository on your own account, typically for personal experimentation or contributions to external projects.</li> <li>Branching: Creating parallel versions within the same repository, ideal for collaborative development and managing feature work.</li> </ul> <p>Importantly, forking and branching are not mutually exclusive. You can still fork a repository and create branches within your fork. However, it's crucial to choose the right collaboration model for the project's specific needs.</p>"},{"location":"external_content/ut-core-wiki/2.2.-Standards%3A-Forking-And-Branching/#forking-vs-branching-choosing-the-right-path-for-collaboration","title":"Forking vs. Branching \u2013 Choosing the Right Path for Collaboration","text":"<p>GitHub defines forking and branching as follows:</p> <ul> <li>Fork: \"A fork is a personal copy of another user's repository that lives on your account. Forks allow you to freely make changes to a project without affecting the original upstream repository.\"</li> <li>Branch: \"A branch is a parallel version of a repository. It is contained within the repository, but does not affect the primary or main branch, allowing you to work freely without disrupting the 'live' version.\"</li> </ul> <p>Collaboration Models:</p> <ul> <li>Divergence (Forking): <ul> <li>Best suited for scenarios where you want to experiment, create your own variations, or contribute back to an open-source project where you don't have direct write access.</li> <li>Your fork is a completely separate entity from the original repository, allowing you to explore new ideas without risk.</li> </ul> </li> <li>Convergence (Branching):<ul> <li>Ideal for collaborative development within a single project or team.</li> <li>Branches allow multiple contributors to work on different features simultaneously, with the intention of merging their changes back into the main branch.</li> <li>Facilitates code review, testing, and controlled integration of changes.</li> </ul> </li> </ul>"},{"location":"external_content/ut-core-wiki/2.2.-Standards%3A-Forking-And-Branching/#rdk-collaboration-a-case-for-branching","title":"RDK Collaboration: A Case for Branching","text":"<p>Given the collaborative nature of RDK development, the branching model aligns more closely with the goals:</p> <ol> <li>Shared Codebase: All contributors work on the same repository, ensuring everyone is on the same page.</li> <li>Controlled Contributions: Changes are made on branches, subjected to code reviews, and then merged into the main branch upon approval, maintaining quality and consistency.</li> <li>Streamlined Integration: Merging branches is less cumbersome than merging forks, making the integration process smoother.</li> </ol> <p>When Forking Might Be Useful in RDK:</p> <ul> <li>Initial Exploration: If you're new to a project and want to experiment without immediately contributing, you might fork the repository to get a feel for the codebase.</li> <li>Major Divergence: If you have a fundamentally different vision for a project, a fork can allow you to explore that path independently.</li> </ul>"},{"location":"external_content/ut-core-wiki/2.2.-Standards%3A-Forking-And-Branching/#key-points","title":"Key Points:","text":"<ul> <li>Forking: Individual work, experimentation, contributing to external projects.</li> <li>Branching: Collaborative work within a team, controlled integration of changes.</li> <li>RDK Collaboration: Favours branching for its streamlined collaboration and code integration benefits.</li> </ul>"},{"location":"external_content/ut-core-wiki/2.3.-Standards%3A-Performing-Changes-to-an-interface/","title":"2.3. Standards: Performing Changes to an interface","text":""},{"location":"external_content/ut-core-wiki/2.3.-Standards%3A-Performing-Changes-to-an-interface/#scope","title":"Scope","text":"<p>This document outlines the procedures for making changes to the interface. </p> <p>Please also refer to the 2. Standards: Single Source of Truth - HAL Interfaces and Testing Suites document.</p>"},{"location":"external_content/ut-core-wiki/2.3.-Standards%3A-Performing-Changes-to-an-interface/#executive-summary","title":"Executive Summary","text":"<p>Modifying the interface is a controlled process requiring collaboration, approval, and meticulous documentation. All changes must be proposed and tracked through GitHub issues, reviewed by the component owner and architecture team, and validated with updated testing suites.  This ensures alignment with architectural standards, maintains interface consistency, and preserves backward compatibility.</p>"},{"location":"external_content/ut-core-wiki/2.3.-Standards%3A-Performing-Changes-to-an-interface/#introduction","title":"Introduction","text":"<p>Modifications to the interface should generally be avoided unless approved by the design and architecture teams. Pre-approved design changes are required before starting work, with final authorization granted upon completion.</p>"},{"location":"external_content/ut-core-wiki/2.3.-Standards%3A-Performing-Changes-to-an-interface/#architecture-discussions","title":"Architecture Discussions","text":"<ul> <li>Create an issue ticket in github on the goals &amp; requirements that need to be met with clear requirements</li> <li>Discuss any proposed code changes with the architecture team to ensure alignment with current and future needs.</li> <li>Document in the issue ticket, </li> <li>Maintain interface consistency across all components, as design decisions impact the entire interface, not just individual parts.</li> </ul>"},{"location":"external_content/ut-core-wiki/2.3.-Standards%3A-Performing-Changes-to-an-interface/#change-process","title":"Change Process","text":"<p>Any interface modification involves the following steps, managed through GitHub:</p> <ol> <li> <p>Define and Discuss:</p> <ul> <li>Raise an issue ticket in GitHub to outline the goals and proposed changes to the interface. Clearly define the requirements and reasons for the modification.</li> <li>Discuss the proposed changes with the component owner and the architecture team within the issue ticket. This ensures alignment with current and future architectural needs and maintains interface consistency across all components.</li> </ul> </li> <li> <p>Develop and Document:</p> <ul> <li>Create a branch from <code>develop</code> based on the issue ticket ID (e.g., <code>issue-123-interface-update</code>). </li> <li>In this branch, implement the interface changes and update the corresponding documentation. Ensure the documentation accurately reflects the modified functionality.</li> </ul> </li> <li> <p>Review and Approve:</p> <ul> <li>Raise a Pull Request (PR) for the changes in your branch. </li> <li>Request review and sign-off from the component owner and the architecture team. Address any feedback or concerns raised during the review process.</li> <li>Once approved, merge the PR into <code>develop</code>.</li> </ul> </li> <li> <p>Update Testing Suite:</p> <ul> <li>Raise a separate issue ticket for any required changes or upgrades to the testing suite due to the interface modification. Define the new testing requirements within this ticket.</li> <li>Create a new branch (e.g., <code>issue-124-testing-update</code>) for modifying the testing suite.</li> <li>Implement the testing suite changes to validate the updated interface functionality. </li> <li>Raise a PR for the testing suite changes. Request review and sign-off from the architecture team and code owners.</li> <li>Merge the PR into <code>develop</code> after approval.</li> </ul> </li> <li> <p>Release:</p> </li> </ol> <p>The component owner manages the release of the updated interface and testing suite, adhering to the following guidelines:</p> <ul> <li>Release Cadence: Releases follow a defined cadence methodology to ensure regular updates.</li> <li>Semantic Versioning: Both the header file and testing suite utilize semantic versioning (MAJOR.MINOR.BUGFIX) to indicate the nature of changes.<ul> <li>Major interface changes require a major version bump in both the header file and the testing suite.</li> <li>Minor, binary-compatible interface changes result in a minor version bump for both.</li> <li>Bugfix, either in the testing suites or the header file, will have no effect on the binary</li> </ul> </li> <li>Version Alignment: The testing suite version is aligned with the header file version to ensure compatibility.</li> <li> <p>Automated Upgrades:  Consideration should be given to how the testing suite can automatically upgrade to accommodate minor interface changes, potentially through mechanisms provided by HALIF.</p> </li> <li> <p>Vendor Integration:</p> <ul> <li>Communicate the interface changes to vendors.  Vendors must adjust their code and ensure compliance with the updated testing suite.</li> </ul> </li> </ul> <p>Important Notes:</p> <ul> <li>Peer review will automatically fail if the GitHub process outlined above is not followed.</li> <li>Maintain backward compatibility with existing code whenever possible.</li> <li>Clearly document all changes and justifications within the relevant GitHub issues and PRs.</li> </ul>"},{"location":"external_content/ut-core-wiki/2.3.-Standards%3A-Performing-Changes-to-an-interface/#testing","title":"Testing","text":"<ul> <li>All code must undergo manual testing before commitment.</li> <li>Engineering teams must perform iterative testing for validation and approval before merging changes.</li> <li>Code merges are gated by successful tests.</li> </ul>"},{"location":"external_content/ut-core-wiki/2.3.-Standards%3A-Performing-Changes-to-an-interface/#requirements","title":"Requirements","text":"<ul> <li>Changes must maintain backward compatibility.</li> <li>All modifications should be controlled and documented meticulously.</li> <li>Legacy platforms may run older interface versions.</li> <li>Future changes will be managed through dynamic discovery.</li> </ul> <p>When functions or structures are updated, but the interface is deemed insufficient, upgrades are allowed but must be marked with a comment:</p> <pre><code>/* TODO: This &lt;functionality/structure/etc&gt; is deprecated, and future modifications will require a redesign. */\n</code></pre>"},{"location":"external_content/ut-core-wiki/2.3.-Standards%3A-Performing-Changes-to-an-interface/#conclusion","title":"Conclusion","text":"<p>Interface stability should be maintained across all platforms and versions. The architecture team has sole authority over change decisions, and any modifications require design approval and final sign-off.</p>"},{"location":"external_content/ut-core-wiki/2.4.-Standards%3A-Repository-Access-and-Branch-Protection-Policy/","title":"2.4. Standards: Repository Access and Branch Protection Policy","text":""},{"location":"external_content/ut-core-wiki/2.4.-Standards%3A-Repository-Access-and-Branch-Protection-Policy/#purpose","title":"Purpose","text":"<p>This policy establishes a structured and secure workflow for code changes, defining distinct roles for the Layer Release Team, Contributors, and CodeOwners (typically architects). It utilises the GitFlow branching model to maintain code quality and control releases, with CodeOwners playing a key role in planning and release cadence.</p> <p>This project employs a layered architecture where the image assembly is divided into distinct functional components, each potentially managed by an independent layer release teams. Each component team is responsible for the development, testing, and release of their specific component.</p> <p>Where common functionality exists, the component team proposing a change will request review from the <code>CODEOWNERS</code>, once approved they will merge the change in accordance with an agreed process. <code>CODEOWNERS</code> will then perform the release process.</p> <ul> <li>Image Layers:</li> <li>Vendor Layer:  Contains vendor specific implementation and configurations.</li> <li>Middleware Layer: Provides core common services and functionality.</li> <li> <p>Application Layer: Implements the applications.</p> </li> <li> <p>Independent Release Teams:</p> </li> <li>Autonomy: Each team maintains a high degree of autonomy over their layer, allowing independent release cadence.</li> <li>Coordination: Teams collaborate and synchronise when changes affect shared functionalities or dependencies.</li> </ul>"},{"location":"external_content/ut-core-wiki/2.4.-Standards%3A-Repository-Access-and-Branch-Protection-Policy/#actors-and-roles","title":"Actors and Roles","text":"<ol> <li>Contributors Team (Engineers):</li> <li>Responsibilities:<ul> <li>Develop new features and bug fixes.</li> <li>Create feature branches from <code>develop</code>.<ul> <li>Can use the UI to create branches. </li> <li>Use CLI <code>git-flow feature start \"branch name\"</code></li> </ul> </li> <li>Submit pull requests (PRs) for code review.</li> <li>Merge from feature branches to <code>develop</code><ul> <li>Can use the UI to merge</li> <li>Use CLI <code>git-flow feature finish</code></li> </ul> </li> </ul> </li> <li> <p>Permissions:</p> <ul> <li>Write access to feature branches.</li> <li>Write access to <code>develop</code> for approved feature branches.</li> <li>Read access to <code>main</code></li> <li>No direct merge access to <code>main</code>.</li> </ul> </li> <li> <p>CodeOwners Team (Architects):</p> </li> <li>Responsibilities:<ul> <li>Review and approve PRs.</li> <li>Plan milestones and determine release cadence.</li> <li>Release authority (decide when to merge to <code>main</code>).</li> <li>Note: May not directly make code changes.</li> </ul> </li> <li>Permissions:<ul> <li>Write access to <code>develop</code> for approved feature branches.</li> <li>Read access to all branches.</li> </ul> </li> <li> <p>Configuration:</p> <ul> <li>Defined in the <code>./github/CODEOWNERS</code> file.</li> </ul> </li> <li> <p>Layer Release Team:</p> </li> <li>Responsibilities:<ul> <li>Release Content: Determine the specific versions of previously released components to be incorporated into the new layer release.</li> <li>Update Configuration: Modify configuration files to reference the selected component versions.</li> <li>Create the layer release branch from <code>develop</code><ul> <li>Use CLI <code>git-flow release start \"semantic version\"</code></li> </ul> </li> <li>Merge code from <code>release branch</code> to <code>main</code>.<ul> <li>Use CLI <code>git-flow release finish \"semantic version\"</code></li> </ul> </li> <li>Tag are created on <code>main</code> caused  by <code>git-flow</code></li> <li>Merge from <code>main</code> to <code>develop</code> caused by <code>git-flow</code></li> <li>Push changes to <code>main</code> and <code>develop</code>, including <code>tags</code>.</li> </ul> </li> <li>Permissions:<ul> <li>Write access to <code>main</code> &amp; <code>develop</code>.</li> <li>Read access to all branches.</li> </ul> </li> </ol>"},{"location":"external_content/ut-core-wiki/2.4.-Standards%3A-Repository-Access-and-Branch-Protection-Policy/#branch-protection","title":"Branch Protection","text":"<ul> <li> <p>main:</p> <ul> <li>Strictly protected.</li> <li>Only the Release Team can merge.</li> <li>Tags used to mark releases.</li> <li>Maintains a history of feature releases.</li> </ul> </li> <li> <p>develop:</p> <ul> <li>Protected.</li> <li>Requires a pull request from a feature branch with approval from CodeOwners to merge. </li> <li>Release team bypass this requirement</li> <li>Contributors and CodeOwners can merge.</li> <li>Maintains a history of feature integrations.</li> </ul> </li> </ul>"},{"location":"external_content/ut-core-wiki/2.4.-Standards%3A-Repository-Access-and-Branch-Protection-Policy/#workflow","title":"Workflow","text":"<ol> <li>Planning: CodeOwners plan milestones and determine the release cadence.</li> <li>Branching: Contributors create feature branches from <code>develop</code>.</li> <li>Development:  Contributors work on their feature branches.</li> <li>Pull Request: Contributors submit PRs for review, automatically assigning CodeOwners.</li> <li>Code Review: CodeOwners (architects) review code and provide feedback.</li> <li>Approval: CodeOwners approve PRs that meet quality standards.</li> <li>Merge to develop: Approved PRs are merged into <code>develop</code> (by Contributors or CodeOwners).</li> <li>Release: CodeOwners determine the release cadence.</li> <li>Release Team:: Create a release via a <code>release</code> branch and merges to <code>main</code> and <code>develop</code>.</li> </ol>"},{"location":"external_content/ut-core-wiki/2.4.-Standards%3A-Repository-Access-and-Branch-Protection-Policy/#appendix","title":"Appendix","text":"<ul> <li>FAQ: Release Engineers: Performing a release with git-flow</li> <li>FAQ: Git\u2010Flow: Developers Branching Model</li> </ul>"},{"location":"external_content/ut-core-wiki/2.5.-Standards%3A-Feature-Branch-Workflow/","title":"2.5. Standards: Feature Branch Workflow","text":"<p>Feature Branch Workflow</p> <ul> <li> <p>Core Principle:  All feature development occurs on separate branches (feature branches) that are isolated from the <code>develop</code> branch. Quality control is a priority at every stage of the process.</p> </li> <li> <p>Process:</p> <ol> <li>Branch Creation: A new short-lived branch is created from the <code>develop</code> branch for each feature.</li> <li>Requirements and Design:  Key requirements are clearly defined in an issue tracker. Rough solutions are discussed with architecture/engineering leads before implementation to align on design and approach.</li> <li>Development: Code changes are made on the feature branch.</li> <li>Testing: (Often Manual) The developer thoroughly tests their changes on the feature branch, ensuring quality standards are met.</li> <li>Early Pull Request (PR): A PR is created early in the development process to solicit feedback and facilitate early integration.</li> <li>Code Review: <code>CodeOwners</code>review the changes in the PR, ensuring adherence to coding standards, design principles, and overall quality.</li> <li>Merge: If approved and tests pass, the feature branch is merged into the <code>develop</code> branch. Merge conflicts are minimized through the use of git-flow branching strategies and short-lived branches.</li> </ol> </li> <li> <p>Benefits:</p> <ul> <li>Isolation: Protects the <code>develop</code> branch from unstable code.</li> <li>Clear History: Feature-specific changes are easily tracked.</li> <li>Easier Collaboration: Multiple developers can work on different features concurrently.</li> <li>Quality Assurance:  Prioritizing quality control at all stages minimizes the risk of introducing errors into the <code>develop</code> branch.</li> <li>Early Feedback: Early PRs and discussions with leads enable faster feedback and course correction if needed.</li> <li>Reduced Merge Conflicts: Git-flow and short-lived branches help mitigate merge conflicts.</li> <li>Controlled Integration: Slower, more deliberate integration ensures thorough testing and quality before merging into the <code>develop</code> branch.</li> </ul> </li> <li> <p>Drawbacks:</p> <ul> <li>Potential for Delays: If early PRs are not reviewed promptly or if extensive changes are required after review, the development cycle might be extended.</li> <li>Requires Discipline: The team needs to adhere to the defined workflow and prioritize quality control practices.</li> </ul> </li> </ul> <p>For more information on the commands to use see FAQ: Git-Flow: Developers Branching Model</p>"},{"location":"external_content/ut-core-wiki/3.-Standards%3A-Levels-of-Test-for-Vendor-Layer/","title":"Level of Test for the Vendor Layer","text":"<p>This document defines the testing requirements for the Vendor Layer, categorized into levels to facilitate phased delivery and vendor participation. These levels collectively form the Vendor Testing Suite (VTS).</p>"},{"location":"external_content/ut-core-wiki/3.-Standards%3A-Levels-of-Test-for-Vendor-Layer/#level-1-component-function-testing-isolated-component-environment-pre-commit-vendor-testing","title":"Level 1: Component Function Testing (Isolated Component Environment, Pre-Commit) \u2013 Vendor Testing","text":"<ul> <li>Purpose: API Function testing of individual components + requirements documentation.</li> <li>Scope: Thorough testing of each function and parameter.</li> <li>Execution: Performed by component engineers during initial pre-commit interface development or when modifying existing components, before commit.</li> </ul>"},{"location":"external_content/ut-core-wiki/3.-Standards%3A-Levels-of-Test-for-Vendor-Layer/#level-2-component-unit-testing-no-upper-stack-layers-pre-commit-vendor-test","title":"Level 2: Component Unit Testing (No upper stack layers, Pre-Commit) - Vendor Test","text":"<ul> <li>Purpose: Focused testing of individual modules in a component, aligned with requirements documentation. Scope: Independent component testing.</li> <li>Scope: Verifies the functionality of the component.</li> <li>Execution: Performed by component engineers pre-commit during initial development or when implementing changes. </li> </ul>"},{"location":"external_content/ut-core-wiki/3.-Standards%3A-Levels-of-Test-for-Vendor-Layer/#level-3-component-stimulus-testing-no-upper-stack-layers-pre-commit-vendor-test","title":"Level 3: Component Stimulus Testing (No Upper Stack Layers, Pre-Commit) - Vendor Test","text":"<ul> <li>Purpose: Pre-commit testing using external stimuli to validate component responses and adherence to requirements.</li> <li>Scope:</li> <li>May trigger both Level 1 (Component Function) and Level 2 (Component Unit) tests for deeper verification.</li> <li>Includes specific tests designed to interact with external devices and evaluate component behavior.</li> <li>May involve interactions with other, pre-tested components to simulate real-world scenarios.</li> <li>Infrastructure: May require specialized setup, either on engineers' desks or in dedicated racks, and runs on vendor-provided equipment.</li> </ul>"},{"location":"external_content/ut-core-wiki/3.-Standards%3A-Levels-of-Test-for-Vendor-Layer/#level-4-layer-system-testing","title":"Level 4: Layer &amp; System Testing","text":"<p>Level 4 encompasses a comprehensive range of system-level tests focused on validating the performance, stability, and integration capabilities of the vendor layer within the ecosystem.</p>"},{"location":"external_content/ut-core-wiki/3.-Standards%3A-Levels-of-Test-for-Vendor-Layer/#l4-system-performance-profiling-vsp","title":"L4 - System Performance Profiling (VSP)","text":"<ul> <li>Purpose: To monitor and analyse system resource usage during key operations.</li> <li>Scope:</li> <li>CPU Load: Measure CPU utilization during activities like video playback, app launch, and channel switching. Continuous monitoring via a C application with logging capabilities.</li> <li>Memory Usage: Track memory consumption patterns to identify potential leaks or areas for optimization.</li> <li>Stress Testing: Push the device to its limits to identify bottlenecks and stability issues.</li> <li>Power Consumption: Testing: Measure power usage under different conditions.</li> <li>Tools/Methods: Utilize profiling tools like <code>perf</code>, <code>valgrind</code>, or other suitable frameworks for performance data collection.</li> <li>Metrics and Reporting:  Collect and analyse performance metrics (CPU usage, memory allocation, frame rates) and generate reports to pinpoint bottlenecks and areas for improvement.</li> </ul> <p>Related: (TBC)</p>"},{"location":"external_content/ut-core-wiki/3.-Standards%3A-Levels-of-Test-for-Vendor-Layer/#l4-ad-hoc-analysis-vah","title":"L4 - Ad hoc Analysis (VAH)","text":"<ul> <li>Purpose: To conduct deep-dive investigations into specific issues or performance bottlenecks.</li> <li>Scope:</li> <li>Triggered by: Field issues, complex bugs, performance bottlenecks, or customer escalations.</li> <li>Methodology: Employ in-depth analysis using debugging tools (e.g., <code>gdb</code>), specialized logs, and code inspection.</li> <li>Collaboration: Work closely with development teams to identify root causes and implement solutions.</li> </ul> <p>Related: (TBC)</p>"},{"location":"external_content/ut-core-wiki/3.-Standards%3A-Levels-of-Test-for-Vendor-Layer/#l4-system-interface-testing-vsi","title":"L4 - System Interface Testing (VSI)","text":"<ul> <li>Purpose: To validate interactions with external interfaces and devices.</li> <li>Scope:</li> <li>Key Interfaces:<ul> <li>Bluetooth (Bluez): Verify connectivity, pairing, and data transfer.</li> <li>WiFi (WPA-supplicant): Test connection stability, roaming, and security.</li> <li>OpenGLES, OpenGL, Graphics, Vulcan: Validate graphics rendering, performance, and compliance. (Video Only)</li> <li>Kernel Headers, SysFS: Verify kernel interface compatibility and system information access.</li> </ul> </li> <li>Testing Approach: Utilize unit tests, integration tests, and functional testing to ensure proper communication and data exchange.</li> </ul> <p>Related: 3.3. Standards: L4 \u2010 System Interface Testing</p>"},{"location":"external_content/ut-core-wiki/3.-Standards%3A-Levels-of-Test-for-Vendor-Layer/#l4-qa-layer-smoke-testing","title":"L4 - QA / Layer Smoke Testing","text":"<ul> <li>Purpose: To guard against regressions and ensure basic functionality before release.</li> <li>Scope:</li> <li>Release Checks: Prevent new L4 releases from breaking functionality in higher layers (MW and APP).</li> <li>Smoke Tests: Execute essential tests of the upper layer to quickly assess core functions.</li> <li>Application-Level Checks: Test video playback (if applicable) (e.g., Netflix) and full-stack scenarios to meet release criteria.</li> <li>Test Specification:  Reference the existing specification document for detailed test cases and expected results.</li> </ul> <p>Related: 3.4. Standards: L4: Vendor Full Stack \u2010 Video \u2010 Smoke Regression Test</p>"},{"location":"external_content/ut-core-wiki/3.-Standards%3A-Levels-of-Test-for-Vendor-Layer/#l4-deep-dive-testing","title":"L4 - Deep Dive Testing","text":"<ul> <li>Purpose: To perform comprehensive functional and performance validation.</li> <li>Scope: (Video)</li> <li>Audio Quality: Test audio playback across various output interfaces, measuring fidelity, latency, and synchronization.</li> <li>Video Quality: Evaluate video playback across supported codecs, assessing smoothness, artefacts, and colour accuracy.</li> <li>A/V Synchronization: Verify audio-video sync across different content and codecs.</li> <li>Graphics Performance: Conduct end-to-end testing, measuring frame rates, rendering quality, and resource usage.</li> <li>Mixing A/V + Display Scaling: Test scenarios like picture-in-picture to ensure correct scaling and display of multiple video planes.</li> <li>Trick Modes: Evaluate seeking accuracy and responsiveness, and test video plane scaling during trick modes.</li> </ul> <p>Related: (TBC)</p>"},{"location":"external_content/ut-core-wiki/3.0.1-Standards%3A-Testing-Feedback-Loops/","title":"Feedback Loops","text":""},{"location":"external_content/ut-core-wiki/3.0.1-Standards%3A-Testing-Feedback-Loops/#testing-feedback-loops-and-issue-reproduction","title":"Testing Feedback Loops and Issue Reproduction","text":"<p>This document outlines the process for handling issues detected in the field and emphasizes the importance of reproducing these issues at the lowest possible level for efficient investigation and resolution.</p> <p>Key Principles:</p> <ul> <li>Reproducibility:  Issues found in higher-level testing or in the field should be reproducible at lower layers using dedicated testing suites. This allows the responsible team to effectively investigate and resolve the issue.</li> <li>Collaboration:  Testing suites should be accessible to all relevant parties, including internal teams and third-party vendors, to facilitate collaborative debugging and resolution.</li> <li>Continuous Improvement:  Testing suites should be continuously updated to reflect new issues and fixes. This ensures comprehensive test coverage and prevents regressions.</li> </ul> <p>Feedback Loop Process:</p> <ol> <li>Issue Detection: Issues may be identified through Level 4 or Level 5 testing, or reported from the field.</li> <li>Initial Triage: Determine whether the issue originates from the assembled product or a specific component delivery.</li> <li>Investigation (Component Level):<ul> <li>Attempt to reproduce the issue in lower-level tests (L2, L3).</li> <li>Extend existing test scenarios or create new tests to reproduce the issue at the component level.</li> <li>Commit these new tests to the relevant testing suite.</li> <li>Provide the new test suite to the vendor for further investigation.</li> </ul> </li> <li>Investigation (System Level):<ul> <li>Extend L4 and L5 test cases to reproduce and narrow down the issue.</li> <li>Commit new tests to the suite.</li> <li>Provide the updated test suite to the appropriate team for investigation.</li> </ul> </li> <li>Extending Coverage:<ul> <li>Regularly review test coverage to identify gaps.</li> <li>Extend testing suites at any level as needed to address new features or potential problem areas.</li> </ul> </li> </ol> <p>Testing Suite Management:</p> <ul> <li>All parties can contribute to the improvement of testing suites by submitting new tests or updates.</li> <li>Component owners are responsible for reviewing and approving changes to their respective testing suites.</li> <li>Testing suites are maintained with independent cadence and versioning to ensure flexibility and avoid conflicts.</li> <li>Comprehensive documentation is required for all tests, outlining the test objectives, procedures, and expected results.</li> </ul>"},{"location":"external_content/ut-core-wiki/3.1.-Standards%3A-Overview-of-Test%E2%80%90Driven-Development/","title":"Test Driven Development","text":"<p>What is Test-Driven Development?</p> <p>Test-Driven Development (TDD) is a software development approach where automated tests are written before the actual code that makes the tests pass. It's a cyclical process with these core steps:</p> <ol> <li>Red: Write a test that initially fails because the functionality it's testing doesn't exist yet.</li> <li>Green: Write the minimum amount of code necessary to make the test pass.</li> <li>Refactor: Improve the code's design and structure while ensuring the test remains green.</li> </ol> <p>The TDD Cycle</p> <p>This \"Red-Green-Refactor\" cycle is repeated continuously, with each iteration adding a small piece of functionality and its corresponding test.</p> <p>Why Use TDD?</p> <ul> <li>Confidence: TDD provides high confidence in your code's correctness. If all tests pass after changes, you're more assured the software is working as intended.</li> <li>Better Design:  Writing tests first forces you to think about how your code will be used and leads to cleaner, more modular designs.</li> <li>Living Documentation: The tests act as living documentation of the code's expected behavior.</li> <li>Reduced Debugging Time: When tests fail, you know exactly where to look for the problem, saving debugging effort.</li> <li>Faster Feedback Loop:  TDD gives quick feedback about the code's functionality, helping catch errors early.</li> </ul> <p>Key Concepts</p> <ul> <li>Unit Tests: TDD primarily focuses on unit tests, which test individual components of your software in isolation.</li> <li>Test Coverage:  TDD encourages high test coverage, meaning a large portion of your code is executed by tests.</li> <li>Refactoring: Refactoring is essential to maintain clean code and avoid accumulating technical debt.</li> </ul> <p>Benefits of TDD</p> <ul> <li>Higher Quality Code: TDD leads to more robust, reliable, and maintainable code.</li> <li>Reduced Defects:  Catching errors early in the development cycle saves time and money.</li> <li>Increased Productivity: While TDD might seem to slow down initial development, it can speed up the overall process by reducing debugging and rework.</li> <li>Improved Team Collaboration: TDD fosters collaboration between developers and testers as they work together to define test cases and ensure quality.</li> </ul> <p>Challenges of TDD</p> <ul> <li>Learning Curve: TDD requires a shift in mindset and may take time for developers to get comfortable with the process.</li> <li>Test Maintenance: Keeping tests up-to-date can be time-consuming, especially as code evolves.</li> <li>Not Always Suitable:  TDD might not be the best fit for every project or type of code.</li> </ul> <p>Is TDD Right for You?</p> <p>TDD is a valuable tool for many software development projects. Consider these factors to decide if it's suitable for your situation:</p> <ul> <li>Project Size: TDD shines in medium to large-sized projects where testing and maintenance are crucial.</li> <li>Team Experience: TDD is easier to adopt if your team has experience with testing or is open to learning new methodologies.</li> <li>Project Type: TDD is well-suited for projects with well-defined requirements and a focus on quality.</li> </ul>"},{"location":"external_content/ut-core-wiki/3.2.-Standards%3A-Requirements-for-building-testing-suites/","title":"Framework Usage","text":""},{"location":"external_content/ut-core-wiki/3.2.-Standards%3A-Requirements-for-building-testing-suites/#overview","title":"Overview","text":"<p>This details the requirements for generating and building testing suites for the RDK-E Project for the vendor layer</p> <ul> <li>L1 / L2 testing suites will use the <code>ut-core</code> testing framework</li> <li>L3/L4 levels will add the use <code>python-raft</code> infrastructure and the <code>ut-raft</code> framework and <code>ut-core</code> will still be expected to be used as required.</li> <li>It must adhere to the setup/layout guide provided here: https://github.com/rdkcentral/ut-raft/wiki/Guide-for-Setting-up-the-Python-RAFT-Testing-Suite</li> <li>Developers are expected to understand and utilize the <code>ut-raft</code> classes documented here: https://github.com/rdkcentral/ut-raft/wiki</li> <li>Examples of <code>python_raft</code> configuration and setup can be found in the aforementioned resources.</li> </ul> <p>A document outlining the tests for external interfaces will be created. This document will detail how to use the <code>python_raft</code> infrastructure to test the following:</p> <ul> <li>Selecting testing suite requirements from the platform-specific <code>deviceSettings.yaml</code>.</li> <li>Defining module-specific options for downloading assets required for testing.</li> <li>Building the necessary components for testing.</li> <li>Utilizing <code>sc docker</code> to access the toolchain.</li> <li>Tests should be designed to be platform independent, and driven by yaml configuration / profiles (see example: https://github.com/rdk-e/hal/wiki/Validation-Profiles).</li> </ul> <p>The module must be build-able and testable using the specified methods. A phased delivery model with collaboration between Tata and Sky teams is required.</p> <p>It should be noted that Vendor Layer testing is Black Box Testing.</p>"},{"location":"external_content/ut-core-wiki/3.2.-Standards%3A-Requirements-for-building-testing-suites/#levels-of-test","title":"Levels of Test","text":"<p>The levels of test to be implemented are defined here:</p> <p>https://github.com/rdkcentral/ut-core/wiki/3.-Standards:-Levels-of-Test-for-Vendor-Layer</p> <p>Testing Frameworks:</p> <ul> <li>L1/L2: <code>ut-core</code> wrapper for <code>gtest</code> (https://github.com/rdkcentral/ut-core) will be used for L1/L2 testing.</li> <li>L3: A combination of C++ and C, utilizing both <code>ut-core</code> and <code>python-raft</code> (https://github.com/rdkcentral/python-raft), will be used for L3 testing.</li> </ul> <p>See also FAQ:-UT-Core-Framework-Overview</p> <p>Phased Delivery:</p> <p>The team will follow the phased delivery which defines git tasks and review checkpoints.</p> <p>See also 3.2.1: Standards: Phased Delivery with Checkpoints</p>"},{"location":"external_content/ut-core-wiki/3.2.1%3A-Standards%3A-Phased-Delivery-with-Checkpoints/","title":"3.2.1: Standards: Phased Delivery with Checkpoints","text":""},{"location":"external_content/ut-core-wiki/3.2.1%3A-Standards%3A-Phased-Delivery-with-Checkpoints/#rrdir-research-review-design-implement-releasereview","title":"RRDIR (Research, Review, Design, Implement, Release/Review)","text":"<p>The following phases will be followed for delivery, with checkpoints at each stage. Tasks will be grouped into GitHub features, which will coordinate the release of multiple phases of delivery. GitHub project plans should be used to track and update progress throughout the workflow.  </p>"},{"location":"external_content/ut-core-wiki/3.2.1%3A-Standards%3A-Phased-Delivery-with-Checkpoints/#1-research-github-task-for-researchdesigndocumentation","title":"1. Research (GitHub Task for Research/Design/Documentation)","text":"<ul> <li>A GitHub task will be created to track research activities.  </li> <li>Each component team will provide a list of suggested tests.  </li> <li>The team will research the requirements and document findings.  </li> <li>A proposal will be generated based on the research.  </li> </ul> <p>Checkpoint: Completed research and proposal documented in the GitHub task.</p>"},{"location":"external_content/ut-core-wiki/3.2.1%3A-Standards%3A-Phased-Delivery-with-Checkpoints/#2-review-discussion-documentation","title":"2. Review (Discussion &amp; Documentation)","text":"<ul> <li>The Architecture team will review the findings either in the GitHub task or the discussion forum, as required.  </li> <li>Feedback from the Architecture team will be used to revise and refine the proposal.  </li> <li>The revised proposal will be written up for formal review.  </li> </ul> <p>Checkpoint: Written-up and approved proposal, moving towards finalization.</p>"},{"location":"external_content/ut-core-wiki/3.2.1%3A-Standards%3A-Phased-Delivery-with-Checkpoints/#3-design-wiki-documentation-for-review","title":"3. Design (Wiki Documentation for Review)","text":"<ul> <li>Based on the initial discussions, the design will be created to solidify the requirements.  </li> <li>The design will be documented on a Wiki page for review.  </li> <li>The Architecture team will review, provide feedback, and approve the design.  </li> <li>Once the design is approved, the corresponding GitHub task for the design phase will be closed, as the task is now complete.  </li> </ul> <p>Checkpoint: Design approved, documented on the Wiki page, and the design task closed.</p>"},{"location":"external_content/ut-core-wiki/3.2.1%3A-Standards%3A-Phased-Delivery-with-Checkpoints/#4-implement-github-task-for-implementation","title":"4. Implement (GitHub Task for Implementation)","text":"<ul> <li>Once the design is approved, a new GitHub task will be created to track the implementation.  </li> <li>The task will refer to the finalised design Wiki, which provides clear requirements for implementation.  </li> <li>The new task will clearly define goals, acceptance criteria, and branch name.  </li> <li>The Engineering team will begin implementation based on the design and raise a Pull Request (PR) for review.  </li> <li>The Architecture team will review the PR, provide feedback, and ensure it meets the acceptance criteria.  </li> <li>Once approved, the PR will be merged into the <code>develop</code> branch, and the implementation ticket will be closed.  </li> </ul> <p>Checkpoint: Completed implementation in the GitHub task, with the PR merged to <code>develop</code> and the implementation ticket closed.</p>"},{"location":"external_content/ut-core-wiki/3.2.1%3A-Standards%3A-Phased-Delivery-with-Checkpoints/#5-review-and-release","title":"5. Review and Release","text":"<ul> <li>The Release Team will handle the release process during the release cadence.  </li> <li>The Release Team will review the final merged code, tag it as required, and follow the release process outlined in the FAQ: Release Engineers: Performing a release with git flow.  </li> </ul> <p>Checkpoint: Release tagged and ready for deployment.</p>"},{"location":"external_content/ut-core-wiki/3.3.-Standards%3A-L4-%E2%80%90-System-Interface-Testing/","title":"L4 System Interface Testing (VSI)","text":""},{"location":"external_content/ut-core-wiki/3.3.-Standards%3A-L4-%E2%80%90-System-Interface-Testing/#overview-vsi","title":"Overview (VSI)","text":"<p>This document outlines the testing requirements and strategy for the Vendor System Interfaces (VSI) in the RDK framework.</p>"},{"location":"external_content/ut-core-wiki/3.3.-Standards%3A-L4-%E2%80%90-System-Interface-Testing/#implementing-the-testing-suite-a-proposed-approach","title":"Implementing the Testing Suite: A Proposed Approach","text":"<p>This document outlines a proposed approach for implementing a comprehensive testing suite, leveraging the <code>raft</code> framework and adhering to the RRDI (Research, Review, Design, Implement) methodology.</p> <p>Current Status: This plan is currently a work in progress and will be further refined as more information becomes available.</p> <p>Target Environment Assumptions:</p> <ul> <li>Base Image: The testing suite can assume that the target device has been programmed with a valid vendor image.</li> <li>Driver Installation: All necessary drivers are fully installed and operational on the target device.</li> <li>Clean Slate: No middleware or application layer exists on the target device. This allows for testing the vendor layer in isolation and ensures that tests are not influenced by pre-existing software components.</li> </ul> <p>Proposed Steps:</p> <p>1. Research and Review:</p> <ul> <li>Identify and Evaluate: Conduct thorough research to identify suitable open-source testing suites that align with the module's testing requirements. Consider factors like:<ul> <li>Test Coverage: Does the suite cover the necessary protocols, functionalities, and edge cases?</li> <li>Maturity and Support: Is the suite actively maintained with a strong community or support channels?</li> <li>Licensing: Is the licensing compatible with the project?</li> <li>Integration: How easily can the suite be integrated with the <code>raft</code> framework and the target environment?</li> </ul> </li> <li>Deep Dive: Review the selected testing suite's documentation and codebase to understand its capabilities, limitations, and potential integration challenges.</li> <li>Best Practices: Refer to the RRDI guidelines provided in the https://github.com/rdkcentral/ut-core/wiki/3.2.-Standards:-Requirements-for-building-testing-suites document for best practices.</li> </ul> <p>2. Design:</p> <ul> <li>Test Strategy: Based on the research and review findings, design a comprehensive testing strategy, including:<ul> <li>Test Cases: Define specific test cases to be implemented, prioritizing \"big ticket\" checks for core functionality.</li> <li>Test Data:  Outline how test data will be generated and managed. Consider using pre-defined datasets or dynamic generation techniques.</li> <li>Validation Classes: Design L4-wide validation classes to abstract the validation mechanisms, allowing for phased automation (human-assisted initially, progressing to fully automated).</li> <li><code>raft</code> Integration: Detail how the testing suite will be integrated with the <code>raft</code> framework for test execution, result collection, and reporting.</li> </ul> </li> <li>Phased Automation:  Incorporate a plan for the gradual transition from human-assisted validation to automated checks within the validation classes.</li> </ul> <p>3. Implementation:</p> <ul> <li>Leverage <code>raft</code>: Utilize the <code>raft</code> framework throughout the implementation process:<ul> <li>Download: Download a specific version of the chosen open-source testing suite using <code>raft</code>.</li> <li>Build: Build the testing suite using the toolchain provided by the <code>sc docker</code> environment, ensuring compatibility with the target platform.</li> <li>Deploy: Copy the built testing suite to the target device/environment using <code>raft</code>.</li> <li>Orchestrate: Utilize <code>raft</code> to orchestrate the execution of the test suite on the target, including setup, execution, and teardown.</li> <li>Remote Execution: Enable the capability to download and execute the test suite on a running device/environment using <code>raft</code>.</li> <li>Result Collation: Utilize <code>raft</code> to collect and collate the test results for analysis and reporting.</li> </ul> </li> <li>Debugging Support: Ensure the implementation allows for easy debugging by enabling single-stepping through <code>raft</code> scripts and providing seamless access to the target device for engineers.</li> </ul> <p>Key Considerations:</p> <ul> <li>Module Requirements: Clearly define the testing requirements and goals for the module under test. This will guide the selection of the testing suite and the design of specific test cases.</li> <li><code>raft</code> Integration: Ensure seamless integration with the <code>raft</code> framework throughout the entire testing process, from downloading and building the suite to executing tests and collecting results.</li> <li>Target Environment: Consider the specific characteristics of the target environment (e.g., hardware limitations, operating system) when selecting and building the testing suite. These will be driven by platform-specific input profiles fed into <code>raft</code> and the build process.</li> <li>Scalability and Maintainability: Design the testing suite and its integration with <code>raft</code> for scalability and maintainability, allowing for easy expansion and updates in the future.</li> </ul> <p>By following this approach and incorporating the principles outlined in the previous document, we can create a robust and efficient testing suite that effectively validates the functionality and stability of the stack.</p>"},{"location":"external_content/ut-core-wiki/3.3.-Standards%3A-L4-%E2%80%90-System-Interface-Testing/#key-interfaces","title":"Key Interfaces","text":"<p>Here's the list of main modules that require dedicated testing:</p> <ul> <li> <p>Bluetooth (Bluez)</p> <ul> <li>Requirements Definition:  Clearly define the requirements for Bluetooth functionality within RDK.</li> <li>Collaboration:  Architecture experts need to review and confirm these requirements.</li> </ul> </li> <li> <p>WiFi (wpa-supplicant)</p> </li> <li>API Testing: Utilize an open-source testing suite to conduct comprehensive API testing of wpa-supplicant.</li> <li> <p>Clear set of requirements needs to be defined</p> </li> <li> <p>OpenGLES / EGL</p> <ul> <li>Compliance and Performance:<ol> <li>Gather Vendor Test Data: Obtain a detailed description of the testing performed by the SoC vendor, including compliance tests and performance benchmarks. Request evidence (test results, reports) to support.</li> <li>Performance Benchmarking:  Establish performance benchmarks using OpenGLES benchmarking tools (e.g., glbenchmark).</li> <li>Cross-Platform Comparison: It must be possible to run the same benchmarks across all supported platforms to establish a baseline and ensure new deliveries from vendors meet the minimum performance requirements. Therefore the data output will be in a format that can be used per platform to compare.</li> </ol> </li> </ul> </li> <li> <p>Kernel Testing</p> <ul> <li>Kernel Configuration Requirements: Define specific kernel configuration requirements for RDK in collaboration with the vendor team. These requirements will guide the selection of appropriate validation testing suites from LFS.</li> <li>LFS Testing System: Leverage the Linux Foundation System (LFS) testing infrastructure for kernel-level testing.</li> </ul> </li> </ul>"},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/","title":"L4 Vendor Full Stack (VSI)","text":""},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#overview-vst","title":"Overview (VST)","text":"<p>This document outlines the automated test plan for L4 (Vendor Full Stack) testing of RDK Video releases. These tests focus on verifying the stability and functionality of the RDK Video stack by testing the integration of the vendor, application (APP), and middleware (MW) layers.</p> <p>Goal: To automate the execution of smoke and regression tests that are currently performed manually, improving efficiency and reducing testing time.</p> <p>Scope: These tests are designed as \"big ticket\" checks, focusing on core functionality:</p> <ul> <li>Is video running?</li> <li>Is audio running?</li> <li>Is video/audio sync operating correctly?</li> <li>Are trick modes operational? (Including checks for black screens, display movement, and errors) </li> </ul> <p>These tests are not intended to be deep-dive device analysis tests. Those are covered by other testing activities. The focus here is on smoke testing to validate that main functionality is still operational after:</p> <ul> <li>Integrating a new vendor layer with the existing APP/MW.</li> <li>Integrating a new APP/MW layer with the existing vendor layer.</li> </ul> <p>This ensures that any new layer introduced does not break the core functionality of the stack.</p> <p>Framework: <code>python_raft</code> will be used to automate these tests, enabling engineers and Jenkins to trigger them as needed.</p> <p>Test Approach:</p> <ul> <li>Build: A full stack image is created using the relevant combination of\u00a0 APP/MW and Vendor layers.</li> <li>Automation: <code>python_raft</code> scripts will be developed to automate the test cases described below.</li> <li>Execution: Tests can be triggered by engineers or integrated into the Jenkins CI/CD pipeline.</li> <li>Reporting: <code>python_raft</code> will provide test results and logs for analysis.</li> </ul> <p>Important: These tests are designed as a pre-release quality gate, ensuring no regressions are introduced before a new layer (vendor, APP, or MW) is released.</p> <p>Target Environment Assumptions:</p> <ul> <li>Full Stack Image: The testing suite can assume that the target device has been programmed with a valid full stack image (vendor, middleware, and application layers).</li> <li>System Ready: Tests should wait for the system to be fully operational before commencing. <code>python_raft</code> already provides mechanisms to achieve this (e.g., by monitoring system logs or specific services, see <code>waitForBoot()</code> ).</li> </ul> <p>Configuration and Platform Independence:</p> <ul> <li>Configuration-driven: The testing suites will be driven by configuration information on the CPE and the image that's running. This includes details about the platform, software version, and available features. To be clear <code>python_raft</code> already supports this, and has methods to extend based on requirements.</li> <li>Platform Abstraction: Tests should prioritize launching applications from the command line whenever possible. This approach offers several advantages:<ul> <li>Consistency: Command-line interfaces tend to be more stable across platforms and software versions compared to graphical interfaces and remote control key sequences.</li> <li>Speed: Launching applications from the command line is generally faster than navigating through menus using a remote control.</li> <li>Reliability:  Command-line launching eliminates potential issues with IR/Bluetooth signal interference or key sequence misinterpretations.</li> </ul> </li> <li>Key Playback Classes (for specific scenarios): While command-line launching is preferred, there might be scenarios where using IR/Bluetooth keys is unavoidable. In such cases:<ul> <li>Wrap platform-specific key sequences in key playback classes. These classes will abstract the underlying key sequences, providing a consistent interface for test scripts.</li> <li>Drive the testing suites by <code>versioned profiles</code> based on the platform. These profiles will contain the necessary configuration data for each platform and software version, ensuring that the correct key sequences and navigation paths are used.</li> </ul> </li> </ul> <p>By prioritizing command-line application launching and utilizing key playback classes and versioned profiles when necessary, the testing suite can achieve a high degree of platform independence and resilience to changes in the user interface and remote control configurations.</p> <p>Requirements:</p> <ol> <li>Integration with L4-wide Validation Classes: The L4 testing suite shall integrate with common L4-wide classes that perform validation checks. These classes will abstract the underlying validation mechanisms, allowing for a phased approach to automation:</li> <li>Phase 1: Human-assisted Validation: Initially, these classes may prompt a human tester with a simple yes/no question to confirm the expected behaviour.</li> <li> <p>Phase 2: Automated Validation:\u00a0 These classes will be progressively upgraded to perform automated validation by directly interacting with the system, e.g., checking proc files for decoder activity, analysing log output, or querying system states. This allows for a gradual transition from manual to automated testing.</p> </li> <li> <p>Engineering-focused Debugging: This test suite is primarily intended for use by engineers. When test failures occur, the framework should facilitate debugging by:</p> </li> <li>Single-stepping through Python Orchestration:\u00a0 Engineers should be able to easily single-step through the <code>python_raft</code> scripts to understand the test flow and pinpoint the failing steps.</li> <li>Seamless Access to Target Device: The framework should provide mechanisms for engineers to readily access the target device (e.g., via SSH) for debugging purposes. This allows them to analyse C code, examine driver data, and inspect system logs in parallel with the test execution.</li> </ol> <p>By adhering to these requirements, the L4 automated testing suite will not only provide a robust quality gate but also empower engineers to efficiently identify and resolve issues across the entire stack.</p>"},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#test-suites","title":"Test Suites","text":""},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#a-linear-channels-vod","title":"A. Linear Channels &amp; VOD","text":"Test Case Description Status (Pass/Fail) Remarks A1 General Sanity on APP Playchannels: Play channels for 5 minutes, changing channels via remote. A2 Sanity on Linear SDR Channel: Test channel 101/501. A3 Sanity on Linear UHD Channel: Test channel 406. A4 Sanity on Linear Channel Requiring PIN: Test channels 301, 302. A5 Sanity on VOD (SDR): Test SDR VOD content. A6 Sanity on VOD (UHD): Test UHD VOD content."},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#b-apps-testing","title":"B. Apps Testing","text":"Test Case Description Status (Pass/Fail) Remarks B1 APPS - YouTube - SDR: Test YouTube with SDR content. B2 APPS - YouTube - HLG: Test YouTube with HLG content. B3 APPS - YouTube - HDR10: Test YouTube with HDR10 content. B4 APPS - Netflix - SDR: Test Netflix with SDR content. B5 APPS - Netflix - DV: Test Netflix with Dolby Vision content. B6 APPS - Disney+ - SDR: Test Disney+ with SDR content. B7 APPS - Disney+ - DV: Test Disney+ with Dolby Vision content. B8 APPS - Amazon Prime - SDR: Test Amazon Prime with SDR content. B9 APPS - Amazon Prime - HDR10: Test Amazon Prime with HDR10 content. B10 APPS - Amazon Prime - DV: Test Amazon Prime with Dolby Vision content. B11 APPS - Apple TV - DV: Test Apple TV with Dolby Vision content. B12 APPS - Paramount+ - SDR: Test Paramount+ with SDR content. B13 APPS - YouTube Kids - SDR: Test YouTube Kids with SDR content. B14 APPS - BBC iPlayer - SDR: Test BBC iPlayer with SDR content. B15 APP - Peacock: Test Peacock app."},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#c-switching-between-apps","title":"C. Switching Between Apps","text":"Test Case Description Status Remarks C1 YouTube to: Netflix, Amazon Prime, Disney+, Apple TV, Paramount+, YouTube Kids, Peacock. C2 Netflix to: YouTube, Amazon Prime, Disney+, Apple TV, Paramount+, YouTube Kids, Peacock. C3 Disney+ to: YouTube, Amazon Prime, Netflix, Apple TV, Paramount+, YouTube Kids, Peacock. C4 Apple TV to: YouTube, Amazon Prime, Netflix, Disney+, Paramount+, YouTube Kids, Peacock. C5 Paramount+ to: YouTube, Amazon Prime, Netflix, Disney+, Apple TV, YouTube Kids, Peacock. C6 YouTube Kids to: YouTube, Amazon Prime, Netflix, Disney+, Apple TV, Paramount+, Peacock. C7 Peacock to: YouTube, Amazon Prime, Netflix, Disney+, Apple TV, Paramount+, YouTube Kids. C8 Amazon Prime to: YouTube, Netflix, Disney+, Apple TV, Paramount+, YouTube Kids, Peacock."},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#d-wi-fi-ethernet-test","title":"D. Wi-Fi / Ethernet Test","text":"Test Case Description Status(Pass/Fail) Remarks D1 Factory Reset and Connect: Factory reset the panel and connect to 5GHz/2.4GHz SSID during setup. D2 Connect Ethernet: Connect Ethernet while the panel is on 5GHz/2.4GHz Wi-Fi. D3 Disconnect Ethernet: Disconnect Ethernet and check if it resumes the last Wi-Fi connection. D4 Verify IP Address: Check if the panel's IP address matches the one assigned by the router. D5 Play/Stream Videos: Play/stream 4K/HDR/UHD videos on 5GHz/2.4GHz network. D6 Soft Reboot (Wi-Fi): Soft reboot the panel while connected to 5GHz/2.4GHz and ensure reconnection. D7 Boot Up Time (Wi-Fi): Check boot-up time when connected to 5GHz/2.4GHz. D8 Hard Reboot (Wi-Fi): Hard reboot the panel while connected to 5GHz/2.4GHz and ensure reconnection. D9 Boot Up Time (Wi-Fi): Check boot-up time when connected to 5GHz/2.4GHz. D10 Reset Network: Reset the network while the panel is on 5GHz/2.4GHz. D11 Soft Reboot (No Internet): Soft reboot after network reset and ensure the panel boots with no internet. D12 Boot Up Time (No Internet): Check boot-up time with no internet. D13 Hard Reboot (No Internet): Hard reboot after network reset and ensure the panel boots with no internet. D14 Boot Up Time (No Internet): Check boot-up time with no internet. D15 Disable Wi-Fi: Disable Wi-Fi via settings and ensure the \"no internet\" screen appears. D16 Hard Reboot (No Internet): Hard reboot and ensure the panel boots with no internet. D17 Disable Wi-Fi: Disable Wi-Fi via settings and ensure the \"no internet\" screen appears. D18 Soft Reboot (No Internet): Soft reboot and ensure the panel boots with no internet. D19 Enable Wi-Fi: Enable Wi-Fi and ensure the panel connects to the last Wi-Fi connection. D20 Power Cycle Router: While connected to 5GHz/2.4GHz, power cycle the router and ensure the panel reconnects. ... ... ... ..."},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#e-motion-deep-sleep-test","title":"E. Motion &amp; Deep Sleep Test","text":"Test Case Description Status (Pass/Fail) Remarks E1 Verify Motion Events: Verify motion events are detected. E2 HDMI Content and Motion: Play HDMI content and verify motion events. E3 Linear Channel and Motion: Play linear channels and verify motion events. E4 Apps and Motion: Play apps like YouTube/Netflix/Disney+ and verify motion events. E5 Power Cycle and Motion: Power cycle the panel and check motion events. E6 Standby and Motion: Put the panel in standby, wake it up, and check motion events. E7 Deepsleep and Motion: Put the panel in deep sleep, wake it up, and check motion events. E8 Auto-Standby: Ensure the panel enters standby mode after 50 minutes of inactivity. E9 Banner Removal: Check if the banner is removed by generating motion at the 51st minute. E10 Linear Channel and No Banner: Ensure no banner appears after 50 minutes of activity on linear channels. ... ... ... ..."},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#f-led-behaviour-test","title":"F. LED Behaviour Test","text":"Test Case Description Status (Pass/Fail) Remarks F1 Checking LED behaviour on power cycle from ON state F2 Checking LED behaviour on power cycle from standby mode state F3 Checking LED behaviour on power cycle from Deepsleep mode state F4 Checking LED behaviour on Soft reboot the panel from ON state F5 Checking LED behaviour on Soft reboot the panel from standby state ... ... ... ..."},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#g-remote-test","title":"G. Remote Test","text":"Test Case Description Status (Pass/Fail) Remarks G1 Wake panel via IR remote --HOME button G2 Wake panel via IR remote --Power button G3 Wake panel via IR remote --PRIME Button G4 Wake panel via IR remote -NETFLIX button G5 Navigate the EPG page, try trick modes &amp; different buttons on remote (IR) G6 Pair the remote on BT G7 Unpair the remote &amp; pair it again G8 Navigate the EPG page, try trick modes &amp; different buttons on remote (BT) G9 Wake panel from standby mode via BT remote --HOME button G10 Wake panel from standby mode via BT remote --Power button G11 Wake panel from deep sleep mode via BT remote --HOME button G12 Wake panel from deep sleep mode via BT remote --Power button"},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#h-ffv-test","title":"H. FFV Test","text":"Test Case Description Status (Pass/Fail) Remarks H1 Mic enable via side button - Launch channel, apps, volume etc via FFV H2 Mic enable via side button - Put panel in standby via FFV H3 Mic enable via side button - Wake panel via FFV from standby H4 Mic enable via side button - Put panel in deep sleep &amp; wake it via FFV H5 Mic enable via side button - Soft reboot panel &amp; check if MIC status remains persistent H6 Mic enable via side button - Hard reboot panel &amp; check if MIC status remains persistent H7 Mic disable via side button - Launch channel, apps, volume etc via FFV H8 Mic disable via side button - Put panel in standby via FFV H9 Mic disable via side button - Wake panel via FFV from standby H10 Mic disable via side button - Put panel in deep sleep &amp; wake it via FFV H11 Mic disable via side button - Soft reboot panel &amp; check if MIC status remains persistent H12 Mic disable via side button - Hard reboot panel &amp; check if MIC status remains persistent ... ... ... ..."},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#i-hdmi-source-firetv-chromecast-appletv","title":"I. HDMI Source - FireTV / Chromecast / AppleTV","text":"Test Case Description Status (Pass/Fail) Remarks I1 Launch HDMI source via HDMI Source remote I2 Play any content on HDMI source &amp; check AV I3 Change different resolution on HDMI source I4 When panel is in standby, wake panel via HDMI source I5 When panel in deep sleep, wake panel via HDMI source I6 Hot plug HDMI source I7 Switch between HDMI source, APPS"},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#j-hdmi-audio-device","title":"J. HDMI Audio Device","text":"Test Case Description Status (Pass/Fail) Remarks J1 Connect HDMI speaker on HDMI &amp; check sound coming from speakers J2 Hot plug HDMI speakers &amp; make sure Audio switches back properly J3 Check any AV sync issue J4 Check audio for contents on HDMI source when HDMI speakers connected J5 Put panel in standby &amp; wake it up, check the audio coming from HDMI speakers J6 Put panel in deep sleep &amp; wake it up, check the audio coming from HDMI speakers"},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#k-bt-audio-device","title":"K. BT Audio Device","text":"Test Case Description Status (Pass/Fail) Remarks K1 Pair BT speakers &amp; check sound coming from speakers K2 Check any AV sync issue on BT speakers while playing apps, HDMI, linear channel K3 Check audio for contents on HDMI source when BT speakers connected K4 Change the output of audio via quick menu K5 Put panel in standby &amp; wake it up, check the audio coming from BT speakers K6 Put panel in deep sleep &amp; wake it up, check the audio coming from BT speakers"},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#l-dtt-channels","title":"L. DTT Channels","text":"Test Case Description Status (Pass/Fail) Remarks L1 Checking AV of DTT channel (SD &amp; HD channels) L2 Scanning DTT channels L3 Switch between DTT channels &amp; HDMI source L4 Browsing TV guide, signal information, audio etc in DTT channels option"},{"location":"external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/#m-boot-up-time","title":"M. Boot Up Time","text":"Test Case Description Status (Pass/Fail) Remarks M1 Hard reboot (power cycle) 1 M2 Hard reboot (power cycle) 2 M3 Hard reboot (power cycle) 3 M4 Soft reboot (/rebootNow.sh) 1 M5 Soft reboot (/rebootNow.sh) 2 M6 Soft reboot (/rebootNow.sh) 3"},{"location":"external_content/ut-core-wiki/4.-Standards%3A-Dynamic-Library-Loading-for-Vendor-Abstraction/","title":"Dynamic Library Loading for Vendor Abstraction","text":""},{"location":"external_content/ut-core-wiki/4.-Standards%3A-Dynamic-Library-Loading-for-Vendor-Abstraction/#description","title":"Description","text":"<p>This example demonstrates how to use dynamic library loading to abstract vendor-specific code in a Hardware Abstraction Layer (HAL). This approach allows you to:</p> <ul> <li>Remove build time dependancies isolating vendor specific library requirements into the wrapper.</li> <li>Maintain a consistent interface for interacting with hardware from different vendors.</li> <li>Improve code modularity and maintainability by separating vendor-specific code from the HAL.</li> </ul> <pre><code>// --- hal_interface.h ---\n\n#ifndef HAL_INTERFACE_H\n#define HAL_INTERFACE_H\n\n// Define the HAL interface (concrete functions). \n// These functions provide a consistent interface to the application, \n// regardless of the underlying vendor implementation.\nint hal_init(void);                      // Initialise the HAL\nint hal_read_sensor(int sensor_id);      // Read from a sensor using the HAL\nvoid hal_write_actuator(int actuator_id, int value); // Write to an actuator using the HAL\n\n#endif // HAL_INTERFACE_H\n\n// --- hal_impl.c ---\n\n#include \"hal_interface.h\"\n#include &lt;dlfcn.h&gt;\n#include &lt;stdio.h&gt;\n\n// Define the vendor interface. This structure holds function pointers\n// to functions that will be implemented in the vendor-specific library.\ntypedef struct \n{\n  int (*vendor_init)(void);              // Initialise the vendor hardware\n  int (*vendor_read_sensor)(int sensor_id);  // Read data from a sensor\n  void (*vendor_write_actuator)(int actuator_id, int value); // Write a value to an actuator\n} vendor_interface_t;\n\n// Function to load a shared library at runtime.\n// This function uses dlopen to load the specified library file.\nvoid* load_dependency(const char* dependency_path) \n{\n  void* handle = dlopen(dependency_path, RTLD_LAZY);\n  if (!handle) {\n    fprintf(stderr, \"Error loading dependency: %s\\n\", dlerror());\n    return NULL;\n  }\n  return handle;\n}\n\n// Global variable to hold the vendor interface. This variable will \n// store the function pointers loaded from the vendor library.\nvendor_interface_t vendor;\n\n// Function to initialize the HAL and load the vendor library.\n// This function is responsible for loading the vendor-specific \n// library and initializing the HAL with the vendor's functions.\nint hal_init(void) \n{\n  // Load the vendor library (e.g., vendor_lib.so)\n  void* vendor_lib_handle = load_dependency(\"./vendor_lib.so\");\n  if (!vendor_lib_handle) \n  {\n    return -1;\n  }\n\n  // Get the 'get_vendor_interface' function from the vendor library.\n  // This function will return a populated vendor_interface_t structure.\n  vendor_interface_t (*get_vendor_interface_fn)(void) = \n      (vendor_interface_t (*)(void))dlsym(vendor_lib_handle, \"get_vendor_interface\");\n  if (!get_vendor_interface_fn) \n  {\n    fprintf(stderr, \"Error getting symbol: %s\\n\", dlerror());\n    dlclose(vendor_lib_handle);\n    return -1;\n  }\n\n  // Get the vendor interface and store it in the global variable.\n  vendor = get_vendor_interface_fn();\n\n  // Initialize the vendor library using the loaded function.\n  if (vendor.vendor_init() != 0) \n  {\n    fprintf(stderr, \"Error initializing vendor library\\n\");\n    dlclose(vendor_lib_handle);\n    return -1;\n  }\n\n  return 0;\n}\n\n// HAL function implementations using the vendor interface.\n// These functions call the corresponding functions in the \n// dynamically loaded vendor library.\nint hal_read_sensor(int sensor_id) \n{\n  return vendor.vendor_read_sensor(sensor_id);\n}\n\nvoid hal_write_actuator(int actuator_id, int value) \n{\n  vendor.vendor_write_actuator(actuator_id, value);\n}\n\n// --- vendor_lib_a.c (Example vendor implementation) ---\n\n#include \"hal_interface.h\"\n\n// Vendor A specific implementations of the functions defined in vendor_interface_t\nint vendor_init(void) \n{\n  // ... vendor A initialization ...\n  printf(\"Vendor A initialized\\n\");\n  return 0;\n}\n\nint vendor_read_sensor(int sensor_id) \n{\n  // ... vendor A sensor reading ...\n  printf(\"Vendor A reading sensor %d\\n\", sensor_id);\n  return sensor_id * 10;\n}\n\nvoid vendor_write_actuator(int actuator_id, int value) \n{\n  // ... vendor A actuator writing ...\n  printf(\"Vendor A writing %d to actuator %d\\n\", value, actuator_id);\n}\n\n// Export the 'get_vendor_interface' function. This function returns \n// a vendor_interface_t structure populated with the vendor's function pointers.\nvendor_interface_t get_vendor_interface(void) \n{\n  static vendor_interface_t vendor = \n  {\n    .vendor_init = vendor_init,\n    .vendor_read_sensor = vendor_read_sensor,\n    .vendor_write_actuator = vendor_write_actuator\n  };\n  return vendor;\n}\n\n// --- main.c (Example application) ---\n\n#include \"hal_interface.h\"\n#include &lt;stdio.h&gt;\n\nint main() \n{\n  // Initialize the HAL. This will load the vendor library and initialize\n  // the vendor-specific hardware.\n  if (hal_init() != 0) \n  {\n    fprintf(stderr, \"HAL initialization failed\\n\");\n    return 1;\n  }\n\n  // Use the HAL functions to interact with the hardware.\n  printf(\"Sensor value: %d\\n\", hal_read_sensor(5));\n  hal_write_actuator(2, 100);\n\n  return 0;\n}\n</code></pre>"},{"location":"external_content/ut-core-wiki/4.-Standards%3A-Dynamic-Library-Loading-for-Vendor-Abstraction/#code-structure","title":"Code Structure","text":"<ul> <li> <p><code>hal_interface.h</code>: Defines the vendor and HAL interfaces.</p> <ul> <li><code>vendor_interface_t</code>: Structure holding function pointers for vendor-specific functions.</li> <li>HAL functions: Concrete functions providing a consistent interface to the application.</li> </ul> </li> <li> <p><code>hal_impl.c</code>: Implements the HAL and dynamically loads the vendor library.</p> <ul> <li><code>load_dependency()</code>: Loads a shared library at runtime using <code>dlopen</code>.</li> <li><code>hal_init()</code>: Initialises the HAL, loads the vendor library, and retrieves the vendor interface.</li> <li>HAL functions: Implementations using the loaded vendor functions.</li> </ul> </li> <li> <p><code>vendor_lib_a.c</code>: Example vendor library implementation.</p> <ul> <li>Vendor functions: Implementations of the functions defined in <code>vendor_interface_t</code>.</li> <li><code>get_vendor_interface()</code>: Returns a populated <code>vendor_interface_t</code> structure.</li> </ul> </li> <li> <p><code>main.c</code>: Example application using the HAL.</p> <ul> <li><code>hal_init()</code>: Initialises the HAL.</li> <li>HAL functions: Calls to interact with the hardware through the HAL.</li> </ul> </li> </ul>"},{"location":"external_content/ut-core-wiki/4.-Standards%3A-Dynamic-Library-Loading-for-Vendor-Abstraction/#benefits","title":"Benefits","text":"<ul> <li>Abstraction: Provides a consistent HAL interface for different vendors.</li> <li>Modularity: Isolates vendor-specific code.</li> <li>Flexibility: Enables easy switching between vendors.</li> </ul>"},{"location":"external_content/ut-core-wiki/4.-Standards%3A-Dynamic-Library-Loading-for-Vendor-Abstraction/#example-output","title":"Example Output:","text":"<pre><code>Vendor A initialised\nVendor A reading sensor 5\nVendor A writing 100 to actuator 2\nSensor value: 50\n</code></pre>"},{"location":"external_content/ut-core-wiki/4.-Standards%3A-Dynamic-Library-Loading-for-Vendor-Abstraction/#faq-what-happens-if-the-library-thats-being-loaded-has-dependancies","title":"FAQ: What happens if the library that's being loaded has dependancies","text":"<p>When you use <code>dlopen</code> to load a shared library, the dynamic linker also takes care of loading any other shared libraries that the loaded library depends on. This process is called dependency resolution.</p> <p>Here's how it works:</p> <ol> <li> <p>Dependency List: Every shared library contains a list of its dependencies (other shared libraries it needs to function). This information is stored within the library file itself.</p> </li> <li> <p>Recursive Loading: When you load a library with <code>dlopen</code>, the dynamic linker examines its dependency list. For each dependency:</p> <ul> <li>It checks if the dependency is already loaded. If it is, it's reused.</li> <li>If not, it recursively loads the dependency using the same <code>dlopen</code> process, which may in turn load further dependencies.</li> </ul> </li> <li> <p>Symbol Resolution: Once all dependencies are loaded, the dynamic linker resolves symbols (function names, variables) between the libraries. This ensures that calls from one library to another are correctly linked.</p> </li> <li> <p>Search Path: The dynamic linker uses a search path to locate dependencies. This path is typically defined by the <code>LD_LIBRARY_PATH</code> environment variable and/or the <code>rpath</code> (runtime path) embedded in the library.</p> </li> </ol> <p>Example:</p> <p>If <code>libA.so</code> depends on <code>libB.so</code> and <code>libC.so</code>, and you call <code>dlopen(\"libA.so\", ...)</code>, the following will happen:</p> <ol> <li><code>libA.so</code> is loaded.</li> <li>The dynamic linker sees that <code>libA.so</code> needs <code>libB.so</code> and <code>libC.so</code>.</li> <li><code>libB.so</code> and <code>libC.so</code> are loaded (if they weren't already).</li> <li>Symbols between <code>libA.so</code>, <code>libB.so</code>, and <code>libC.so</code> are resolved.</li> </ol> <p>Important Considerations:</p> <ul> <li>Circular Dependencies: If you have circular dependencies (e.g., <code>libA.so</code> depends on <code>libB.so</code>, and <code>libB.so</code> depends on <code>libA.so</code>), the dynamic linker may not be able to resolve them, leading to errors.</li> <li>Versioning: Different versions of a library might exist. The dynamic linker needs to ensure that the correct versions are loaded to avoid compatibility issues. This is usually handled through sonames (e.g., <code>libmylib.so.1</code>).</li> <li>Error Handling: If a dependency cannot be found or loaded, <code>dlopen</code> will fail, and you should handle the error appropriately.</li> </ul> <p>In summary, <code>dlopen</code> not only loads the specified library but also automatically handles the loading and linking of its dependencies, ensuring that the library can function correctly. This makes it easier to manage complex applications with multiple shared libraries.</p>"},{"location":"external_content/ut-core-wiki/4.0.1%3A-Standards%3A-Dynamic-Library-Search-Order/","title":"4.0.1: Standards: Dynamic Library Search Order","text":"<p>The <code>dlopen</code> function in C is used to dynamically load shared libraries at runtime. Here's how it searches for libraries and how <code>LD_LIBRARY_PATH</code> plays a role:</p> <p>Search Order</p> <p>When you call <code>dlopen</code> with a library name, it follows a specific search order to locate the library:</p> <ol> <li> <p>Absolute Path: If the filename provided to <code>dlopen</code> includes a slash (\"/\"), it's treated as an absolute or relative path, and the dynamic linker will try to load the library directly from that location.</p> </li> <li> <p>RPATH: If the executable file contains a <code>DT_RPATH</code> tag (and no <code>DT_RUNPATH</code> tag), the directories listed in the <code>DT_RPATH</code> tag are searched. This allows embedding paths to dependencies within the executable itself.</p> </li> <li> <p>LD_LIBRARY_PATH: If the environment variable <code>LD_LIBRARY_PATH</code> is set when the program starts, the directories listed in it are searched. However, this is ignored for security reasons if the program has set-user-ID or set-group-ID permissions.</p> </li> <li> <p>RUNPATH: If the executable file contains a <code>DT_RUNPATH</code> tag, the directories listed in that tag are searched. This is similar to <code>DT_RPATH</code> but is often preferred because it allows more flexibility in how libraries are found.</p> </li> <li> <p>ld.so.cache: The dynamic linker checks the file <code>/etc/ld.so.cache</code> (maintained by <code>ldconfig</code>) to see if it contains an entry for the library. This cache speeds up library loading.</p> </li> <li> <p>Default Directories: Finally, the directories <code>/lib</code> and <code>/usr/lib</code> are searched.</p> </li> </ol> <p>LD_LIBRARY_PATH</p> <p><code>LD_LIBRARY_PATH</code> is an environment variable that can be used to specify additional directories where the dynamic linker should look for shared libraries. It can be useful for:</p> <ul> <li>Testing: You can temporarily add a directory with your test libraries to <code>LD_LIBRARY_PATH</code> without having to install them in the system directories.</li> <li>Development:  If you're working on a library that's not yet installed in a standard location, you can use <code>LD_LIBRARY_PATH</code> to tell your program where to find it.</li> <li>Deployment: In some cases, you might need to use <code>LD_LIBRARY_PATH</code> to point to libraries installed in non-standard locations.</li> </ul> <p>Security Considerations</p> <p>While <code>LD_LIBRARY_PATH</code> can be helpful, it's important to use it with caution:</p> <ul> <li>Security Risks: If <code>LD_LIBRARY_PATH</code> is set to include untrusted directories, it can make your program vulnerable to attacks where malicious libraries are loaded instead of the legitimate ones.</li> <li>Maintainability Issues: Overusing <code>LD_LIBRARY_PATH</code> can make your program harder to deploy and maintain, as it relies on a specific environment variable being set correctly.</li> </ul> <p>Best Practices</p> <ul> <li>Use RPATH or RUNPATH: Whenever possible, use <code>RPATH</code> or <code>RUNPATH</code> to encode the library search paths directly into your executable. This is generally a more secure and reliable approach than relying on <code>LD_LIBRARY_PATH</code>.</li> <li>Limit Use of LD_LIBRARY_PATH: If you must use <code>LD_LIBRARY_PATH</code>, try to limit its use to development and testing environments, and avoid setting it globally.</li> <li>Be Mindful of Security: Always be cautious about setting <code>LD_LIBRARY_PATH</code> to include directories that you don't fully trust.</li> </ul>"},{"location":"external_content/ut-core-wiki/4.1.-Standards%3A-Dynamically-Installable-Plugins-In-C/","title":"4.1. Standards: Dynamically Installable Plugins In C","text":"<p>Here are some ideas on how to implement a modular C program that can load optional submodules or plugins at runtime or compile-time. The approach will ensure the main module can call these plugins conditionally based on their presence.</p>"},{"location":"external_content/ut-core-wiki/4.1.-Standards%3A-Dynamically-Installable-Plugins-In-C/#step-by-step-guide","title":"Step-by-Step Guide","text":"<ol> <li>Define Plugin Interface:    Define a common interface that all plugins must implement. This could be a set of function pointers within a struct.</li> </ol> <pre><code>// plugin.h\n#ifndef PLUGIN_H\n#define PLUGIN_H\n\ntypedef struct {\n    void (*initialize)(void);\n    void (*perform_action)(void);\n    void (*cleanup)(void);\n} PluginInterface;\n\n#endif // PLUGIN_H\n</code></pre> <ol> <li>Implement Plugin:    Implement a sample plugin following the defined interface.</li> </ol> <pre><code>// plugin_impl.c\n#include \"plugin.h\"\n#include &lt;stdio.h&gt;\n\nvoid plugin_initialize(void) {\n    printf(\"Plugin initialized.\\n\");\n}\n\nvoid plugin_perform_action(void) {\n    printf(\"Plugin action performed.\\n\");\n}\n\nvoid plugin_cleanup(void) {\n    printf(\"Plugin cleaned up.\\n\");\n}\n\nPluginInterface plugin = {\n    .initialize = plugin_initialize,\n    .perform_action = plugin_perform_action,\n    .cleanup = plugin_cleanup\n};\n</code></pre> <ol> <li>Dynamic Loading (Runtime):    Use dynamic loading to load the plugin at runtime. On Linux, you can use <code>dlopen</code> and <code>dlsym</code>.</li> </ol> <pre><code>// main.c\n#include &lt;stdio.h&gt;\n#include &lt;dlfcn.h&gt;\n#include \"plugin.h\"\n\nint main(void) {\n    void *handle;\n    PluginInterface *plugin = NULL;\n\n    // Attempt to load the plugin dynamically\n    handle = dlopen(\"./plugin_impl.so\", RTLD_LAZY);\n    if (handle) {\n        plugin = (PluginInterface *)dlsym(handle, \"plugin\");\n        if (plugin) {\n            plugin-&gt;initialize();\n            plugin-&gt;perform_action();\n            plugin-&gt;cleanup();\n        }\n        dlclose(handle);\n    } else {\n        printf(\"Plugin not found. Running without plugin.\\n\");\n    }\n\n    // Main module logic\n    printf(\"Main module running.\\n\");\n\n    return 0;\n}\n</code></pre> <ol> <li>Compile-Time Loading:    Alternatively, you can conditionally compile the plugin code based on a macro definition.</li> </ol> <pre><code>// main.c\n#include &lt;stdio.h&gt;\n#include \"plugin.h\"\n\n#ifdef USE_PLUGIN\nextern PluginInterface plugin;\n#endif\n\nint main(void) {\n    PluginInterface *plugin_ptr = NULL;\n\n#ifdef USE_PLUGIN\n    plugin_ptr = &amp;plugin;\n#endif\n\n    if (plugin_ptr) {\n        plugin_ptr-&gt;initialize();\n        plugin_ptr-&gt;perform_action();\n        plugin_ptr-&gt;cleanup();\n    } else {\n        printf(\"Plugin not included. Running without plugin.\\n\");\n    }\n\n    // Main module logic\n    printf(\"Main module running.\\n\");\n\n    return 0;\n}\n</code></pre> <ol> <li>Compiling the Code:    For dynamic loading, compile the plugin as a shared library.</li> </ol> <pre><code>gcc -shared -o plugin_impl.so -fPIC plugin_impl.c\ngcc -o main main.c -ldl\n</code></pre> <p>For compile-time loading, compile with a macro definition.</p> <pre><code>gcc -DUSE_PLUGIN -o main main.c plugin_impl.c\n</code></pre>"},{"location":"external_content/ut-core-wiki/4.1.-Standards%3A-Dynamically-Installable-Plugins-In-C/#key-points","title":"Key Points:","text":"<ul> <li>Plugin Interface: Clearly define the interface the plugins must adhere to.</li> <li>Dynamic Loading: Use <code>dlopen</code> and <code>dlsym</code> to load the plugin at runtime if it is available.</li> <li>Compile-Time Option: Use conditional compilation to include the plugin if it is available at compile-time.</li> <li>Null Check: Always check if the plugin function pointers are NULL before calling them to avoid crashes if the plugin is not available.</li> </ul> <p>By following these steps, you can create a flexible C module that can optionally load and use additional functionality from plugins, either at runtime or compile-time, ensuring robust and modular design.</p>"},{"location":"external_content/ut-core-wiki/5.0.1%3A-Standards%3A-vDevice-Architecture-Overview/","title":"Architecture Overview","text":""},{"location":"external_content/ut-core-wiki/5.0.1%3A-Standards%3A-vDevice-Architecture-Overview/#architecture-overview","title":"Architecture Overview","text":"<p>The vDevice enables flexible and efficient interaction with diverse hardware platforms. It acts as an abstraction layer, decoupling the software from the underlying hardware specifics. This approach offers several key advantages:</p> <ul> <li>Hardware Agnostic Software:  By interacting with a standardized HAL API, the software remains independent of the specific hardware implementation. This allows us to develop and deploy software across different platforms without modification.</li> <li>Modular and Adaptable: The use of vComponents provides a high degree of modularity.  Each vComponent represents a specific hardware function, allowing for easy customization and adaptation to new or evolving hardware.</li> <li>Dynamic Platform Mimicking: The vDevice can dynamically configure the vComponents at boot time to match the target platform's characteristics. This enables seamless switching between different platform configurations without code changes.</li> <li>Enhanced Testability:  The vDevice facilitates runtime testing control.  Testing suites can interact with the vDevice (or individual vComponents) through a REST API to modify system behaviour and simulate various scenarios.</li> </ul> <p>The diagram illustrates the key components and interactions within the vDevice architecture:</p> <p><pre><code>block-beta\n    block: modules\n        columns 2\n        vhal(\"Vendor Hal Interface(API)\")\n        vsi(\"Vendor System Interface - (VSI)\")\n        vc(\"vComponents\")\n        sl(\"vSystem Libraries\")\n        osl(\"Open Source Libraries &amp; utils \"):2\n        ub(\"Ubuntu+Binder\"):2\n    end\n  style vhal fill:#87CEFA,stroke:#1E90FF,stroke-width:4px;\n    style vsi fill:#87CEFA,stroke:#1E90FF,stroke-width:4px;\n    style sl fill:#FFA07A,stroke:#FA8072,stroke-width:4px;\n    style ub fill:#FFA07A,stroke:#FA8072,stroke-width:4px;\n    style vc fill:#87CEFA,stroke:#1E90FF,stroke-width:4px;\n    style osl fill:#FFA07A,stroke:#FA8072,stroke-width:4px;</code></pre> * Vendor HAL Interface (API): This standardized interface defines how the software interacts with the underlying hardware. * Virtualized Components (vComponents): These modular components represent various hardware functions within the HAL implementation. * Vendor System Interface (VSI):  A collection of vendor-provided libraries and tools used by the system (e.g., OpenGL, Bluetooth drivers). * vSystem Libraries: These libraries organize and package the VSI components into functional groups for easier use. * Open Source Libraries &amp; utils:  Common open-source libraries and utilities used within the system. * Ubuntu+Binder: The underlying operating system and inter-process communication mechanism.</p>"},{"location":"external_content/ut-core-wiki/5.0%3A-Standards%3A-vDevice-Overview/","title":"vDevice Overview for TV and STB Development","text":"<p>This document explains the concept of vDevices and their role in developing software for TV and STB (Set-Top Box) platforms.</p>"},{"location":"external_content/ut-core-wiki/5.0%3A-Standards%3A-vDevice-Overview/#what-is-a-virtual-machine","title":"What is a Virtual Machine?","text":"<p>A virtual machine (VM) is essentially a computer within a computer. It's a software-based replica of a physical machine, with its own virtual CPU, memory, storage, and network interfaces. This \"virtual hardware\" is managed by the hypervisor, a software layer that sits between the VM and the actual physical hardware. The hypervisor allows multiple VMs to share the physical resources of a single machine while keeping them isolated from one another.</p> <p>Think of it like this: the hypervisor is like a landlord who owns a building (the physical server). Each VM is like a tenant who rents an apartment (a portion of the server's resources). The landlord (hypervisor) controls how much space (CPU, memory, etc.) each tenant (VM) gets, but the tenants can decorate and use their apartments (VMs) however they like.</p>"},{"location":"external_content/ut-core-wiki/5.0%3A-Standards%3A-vDevice-Overview/#key-characteristics-of-virtual-machines","title":"Key Characteristics of Virtual Machines:","text":"<ul> <li>Hardware Virtualization:  The number of virtual CPUs, their architecture, memory size, and even the availability of virtual hardware devices are all defined in software. These settings can be adjusted as required, providing flexibility and scalability.</li> <li>Software Transparency: From the perspective of the software running inside the VM, the underlying hardware is transparent. Applications and services operate as if they were running on a physical machine, unaware of the virtualization layer.</li> <li>Vendor Abstraction: While the software inside the VM interacts with virtual hardware, the vendor layer (e.g., device drivers) is responsible for abstracting the specific capabilities of the underlying physical hardware. This allows the same software to run on different virtualization platforms.</li> </ul>"},{"location":"external_content/ut-core-wiki/5.0%3A-Standards%3A-vDevice-Overview/#booting-a-linux-image-from-emmc","title":"Booting a Linux Image from eMMC","text":"<p>In the world of TVs and STBs, the software that brings these devices to life is typically a Linux-based image stored on an eMMC (embedded MultiMediaCard). When the device powers on, it loads this image from the eMMC into memory and begins executing the instructions, similar to how a computer boots up its operating system.</p> <p>Development teams concentrate on building and optimizing these Linux images. They ensure the image includes all the necessary drivers, libraries, and configurations for the target device, whether it's a physical TV or STB or a VM. This allows the software to interact correctly with the hardware, regardless of its underlying implementation.</p>"},{"location":"external_content/ut-core-wiki/5.0%3A-Standards%3A-vDevice-Overview/#why-simulation-is-essential-for-tv-and-stb-development","title":"Why Simulation is Essential for TV and STB Development","text":"<p>TVs and STBs often include specialized hardware components not typically found in standard computer systems. These components might include tuners for receiving broadcast signals, video decoders, and graphics processors optimized for displaying high-quality video.</p> <p>Since a virtual machine doesn't inherently support these TV-specific hardware components, they must be simulated in software. This is where simulators and vDevices come into play.</p>"},{"location":"external_content/ut-core-wiki/5.0%3A-Standards%3A-vDevice-Overview/#understanding-software-layers-and-vdevices","title":"Understanding Software Layers and vDevices","text":"<p>It's important to distinguish between the different software layers within a TV or STB system:</p> <ul> <li>Application Layer: This layer comprises the software that end-users interact with directly (e.g., Electronic Program Guide (EPG), streaming apps).</li> <li>Middleware Layer: This layer provides services and functionalities to the application layer, such as multimedia frameworks, network communication, and security.</li> <li>Vendor Layer: This layer interacts directly with the hardware. It contains drivers and other software components that translate hardware-specific requirements into a format that the upper layers can understand.</li> </ul> <p>Platform Independence</p> <p>A key principle in software development is platform independence. This means that the application and middleware layers should be designed to run on any platform without modification. The vendor layer is responsible for handling the specific requirements of the underlying hardware, shielding the upper layers from these details.</p>"},{"location":"external_content/ut-core-wiki/5.0%3A-Standards%3A-vDevice-Overview/#vdevice-clarification","title":"vDevice Clarification","text":"<p>A vDevice is essentially a virtualized vendor layer running within a VM. It comprises:</p> <ul> <li>Simulated Hardware: The hypervisor creates virtual representations of the target hardware, such as a vTuner or vDecoder, mimicking the behaviour of their physical counterparts as Virtual Components (vComponents).</li> <li>Simulated Device Drivers: Instead of interacting with real hardware, the vendor layer utilizes simulated device drivers specifically designed for the virtual environment. These drivers translate commands and data between the virtual hardware and the upper software layers.</li> <li>Hardware Profiles: To further enhance the simulation, vDevices are started with a hardware profile. This profile defines the specific capabilities and configurations of the simulation device, such as tuner type, supported video formats, and memory capacity. This allows developers to simulate a wide range of TV or STB models with varying hardware configurations using a single vDevice implementation.</li> </ul> <p>By incorporating hardware profiles, developers can:</p> <ul> <li>Test compatibility: Ensure their software functions correctly across different device models with varying hardware capabilities.</li> <li>Simulate specific scenarios: Recreate specific hardware configurations to test edge cases and debug issues.</li> <li>Optimize performance:  Fine-tune their software for optimal performance on different hardware profiles.</li> </ul>"},{"location":"external_content/ut-core-wiki/5.0%3A-Standards%3A-vDevice-Overview/#key-takeaways","title":"Key Takeaways","text":"<ul> <li>vDevice = Virtualized Vendor Layer: A vDevice primarily focuses on simulating the vendor layer's interaction with hardware within a VM.</li> <li>Simulation is Key: Simulated hardware and drivers are crucial for simulating TV-specific components not natively supported by VMs.</li> <li>Platform Independence is Preserved: The application and middleware layers remain platform-agnostic, unaware of the underlying hardware or virtualization.</li> <li>Swapping Between Environments is Seamless: Switching between simulation and real hardware involves simply rebuilding the image with the appropriate vendor layer.</li> </ul>"},{"location":"external_content/ut-core-wiki/5.0%3A-Standards%3A-vDevice-Overview/#benefits-of-using-simulators-in-tv-and-stb-development","title":"Benefits of using Simulators in TV and STB Development","text":"<ul> <li>Early testing: Enables software testing early in the development cycle, even before hardware prototypes are available.</li> <li>Cost-effectiveness: Reduces the need for expensive hardware and lab setups.</li> <li>Reproducibility: Provides a controlled and consistent environment for testing, ensuring reproducible results.</li> <li>Flexibility: Allows for easy manipulation of the simulated environment to test various scenarios and corner cases.</li> <li>Hardware Abstraction: Allows developers to focus on the software logic without being bogged down by hardware specifics.</li> </ul>"},{"location":"external_content/ut-core-wiki/5.0%3A-Standards%3A-vDevice-Overview/#key-components","title":"Key Components","text":"<p>The vDevice comprises of core components:</p> <ul> <li>vDevice Architecture Overview: Overview of the vDevice architecture and its role in enabling hardware abstraction and platform flexibility.</li> <li>vDevice Controller: The central orchestrator responsible for managing vComponents and the control plane.</li> <li>Control Plane: Enabling control and configuration of the running environment.</li> </ul>"},{"location":"external_content/ut-core-wiki/5.1.0%3A-Standards%3A-vDevice-Controller/","title":"Controller","text":"<p>Purpose:</p> <p>Provides a software-based vDevice for simulating the environment of the target platform. Designed to be modular and flexible, allowing for the testing and development of various components.</p> <p>Key Components:</p> <ul> <li>vDevice Controller:<ul> <li>The central orchestrator of the virtualised system.</li> <li>Manages the lifecycle of vComponent instances (initialising, starting, and stopping).</li> <li>Handles the control plane socket, routing control messages to appropriate vComponent instances.</li> </ul> </li> <li>vComponent:<ul> <li>Represents a specific HAL / Operational module within the software stack.</li> <li>Receives and processes control plane messages and will extract information relevant to its specific domain.</li> <li>Can optionally run in standalone mode with their own control plane sockets.</li> </ul> </li> <li>Control Plane:<ul> <li>Provides a WebSocket interface for sending control messages to alter the behaviour of internal components.</li> <li>Allows external users or systems to control, configure, or trigger actions in vComponents.</li> <li>Supports communication across multiple modules using YAML-based messages, enabling flexible and scalable control.</li> </ul> </li> </ul> <p>Architecture:</p> <ul> <li>Modular Design: vComponent instances are packaged as component libraries, ideally moving towards <code>opkg</code> for easier integration.</li> <li>Centralized Control: The vDevice Controller acts as the main coordinator.</li> <li>Unified Control Plane: The vDevice Controller provides a common control plane socket for all modules.</li> </ul> <p>System Workflow (Boot Sequence)</p> <ol> <li>Initialization: vDevice Controller starts up and loads configuration.</li> <li>Component Registration: Initialization and exit functions of each vComponent instance are registered with the vDevice Controller.</li> <li>Control Plane Activation: vDevice Controller initiates the control plane socket.</li> <li>Component Startup: vDevice Controller triggers the initialization (<code>init()</code> function) of all registered vComponent instances based on the provided platform profile.</li> </ol> <p>Considerations:</p> <ul> <li>Platform Profile: Ensure that the <code>platformProfile.yaml</code> format is well-defined, enabling flexible configuration of vComponent instances during startup.</li> <li>Control Plane Messages: Clearly define the structure and types of control plane messages that the system will use.</li> <li>Documentation: Thoroughly document each vComponent instance's API, supported control messages, and configuration options.</li> </ul> <pre><code>graph TD\n    subgraph System\n        subgraph High Level Overview\n          EmulatorController[vDevice] --&gt; |Initializes/Terminates| ModuleEmulator1[vComponent 1]\n          EmulatorController --&gt; |Initializes/Terminates| ModuleEmulator2[vComponent 2] \n          EmulatorController --&gt; |Initializes/Terminates| ModuleEmulatorN[vComponent N]\n         end \n         subgraph Starting/Stopping\n          EmulatorController --&gt; |Starts/Stops| ModuleEmulator1\n          EmulatorController --&gt; |Starts/Stops| ModuleEmulator2 \n          EmulatorController --&gt; |Starts/Stops| ModuleEmulatorN\n         end \n        EmulatorController --&gt; |Control Plane Socket| ControlPlane[Control Plane]\n        subgraph MessageSending\n           ControlPlane -- Sends Messages --&gt; ModuleEmulator1\n           ControlPlane -- Sends Messages --&gt; ModuleEmulator2\n           ControlPlane -- Sends Messages --&gt; ModuleEmulatorN\n         end \n    end</code></pre>"},{"location":"external_content/ut-core-wiki/5.1.1%3A-Standards%3A-vDevice-Control-Plane/","title":"Control Plane","text":"<p>The Control Plane is a central component responsible for facilitating interaction between external users or systems and the internal behaviour of both virtual devices (vComponents) and physical rack setups. Control messages are used to configure and control devices, whether they're virtual or physically connected racks, depending on the platform configuration.\u00a0</p>"},{"location":"external_content/ut-core-wiki/5.1.1%3A-Standards%3A-vDevice-Control-Plane/#key-points","title":"Key Points","text":"<ul> <li>WebSocket Interface (for vDevices):</li> <li>When dealing with virtual devices (vComponents), the Control Plane exposes a WebSocket server that provides a connection for external stimulus.</li> <li> <p>Test users, automation tools, or other systems use this WebSocket interface to send control messages to virtual components in real-time.</p> </li> <li> <p>Control for Physical Rack Setups:</p> </li> <li> <p>In a physical rack setup, the WebSocket is not used. Instead, the ControlPlaneClass interprets the control messages, determining whether they are intended for a virtual device or a physical rack, and converts them into commands that control the physical rack via python_raft control classes. \u00a0 - If the message involves controlling external hardware, the ControlPlaneClass uses the python_raft control classes to handle the necessary configurations and manage the rack\u2019s hardware interactions.</p> </li> <li> <p>Control Messages:</p> </li> <li>Control messages are structured using YAML format and are designed to control both virtual and physical setups based on the system configuration.</li> <li>The same message format can apply to both virtual and physical environments. For instance, a command to power on a device could either trigger an action on a virtual HDMI device or, if connected externally to a rack, control the actual hardware via python_raft.</li> <li> <p>The ControlPlaneClass interprets each message and routes it to the appropriate target\u2014either via a WebSocket to a virtual device or through python_raft to a physical rack.</p> </li> <li> <p>Unified Message Handling:</p> </li> <li> <p>The Control Plane seamlessly handles both virtual and physical environments by using the same control message structure. The ControlPlaneClass decides whether the message is targeting a virtual device or a physical rack, ensuring flexible and unified control. \u00a0 - For virtual devices, the control message is routed through a WebSocket to the relevant vComponent. \u00a0 - For physical racks, the control message is processed by the ControlPlaneClass, which converts it into commands for the python_raft control classes to configure and control the hardware directly.</p> </li> <li> <p>Python Raft Integration:</p> </li> <li>When using python_raft, the system sends control messages to the ControlPlaneClass, which interprets them and interacts with the python_raft control classes to manage the physical hardware. \u00a0 - If the system is configured for virtual devices, the ControlPlaneClass will instead forward the message via the WebSocket to the relevant vComponent.</li> </ul>"},{"location":"external_content/ut-core-wiki/5.1.1%3A-Standards%3A-vDevice-Control-Plane/#control-plane-workflow","title":"Control Plane Workflow","text":""},{"location":"external_content/ut-core-wiki/5.1.1%3A-Standards%3A-vDevice-Control-Plane/#1-message-reception","title":"1. Message Reception","text":"<p>The ControlPlaneClass receives control messages. Depending on the nature of the message and the platform configuration, it determines whether the message is targeting a virtual device or an external rack setup.</p> <ul> <li>vDevice Setup: The control message is sent through the WebSocket and processed by the vDevice Controller, which forwards the message to the appropriate vComponent.</li> <li>Rack Setup: If the message requires controlling external hardware, the ControlPlaneClass converts the message into specific commands for the python_raft control classes, which then control the rack hardware.</li> </ul>"},{"location":"external_content/ut-core-wiki/5.1.1%3A-Standards%3A-vDevice-Control-Plane/#2-message-routing","title":"2. Message Routing","text":"<ul> <li>For virtual components, the message is routed through the WebSocket to the relevant vComponent, which processes the message and acts accordingly.</li> <li>For rack setups, the ControlPlaneClass uses the python_raft control classes to control the hardware directly, without the need for a WebSocket.</li> </ul>"},{"location":"external_content/ut-core-wiki/5.1.1%3A-Standards%3A-vDevice-Control-Plane/#3-component-or-rack-response","title":"3. Component or Rack Response","text":"<ul> <li> <p>vComponents interpret and execute the control message, triggering actions such as powering on a device, switching inputs, or sending callbacks.</p> </li> <li> <p>Rack setups receive the control commands from python_raft, and the hardware is configured or controlled based on the instructions in the message (e.g., powering on, connecting devices, etc.).</p> </li> </ul>"},{"location":"external_content/ut-core-wiki/5.1.1%3A-Standards%3A-vDevice-Control-Plane/#considerations-for-control-plane-messages","title":"Considerations for Control Plane Messages","text":"<ul> <li>Unified Message Structure: Control messages for both virtual and physical environments are unified and pre-defined. The ControlPlaneClass interprets these messages and determines the target (virtual or physical) based on the platform configuration.</li> <li>Platform Configuration: The ControlPlaneClass determines the appropriate actions based on the nature of the message and the system\u2019s platform configuration\u2014whether it's a virtual or physical (rack) environment.</li> <li>Logging and Debugging: Debugging tools will capture control messages and their processing outcomes to ensure smooth operation and easy diagnosis in both virtual and physical setups.</li> </ul>"},{"location":"external_content/ut-core-wiki/5.1.1%3A-Standards%3A-vDevice-Control-Plane/#advantages-of-using-the-control-plane","title":"Advantages of Using the Control Plane","text":"<ul> <li>Unified Control for Mixed Environments: The same control plane can manage both virtual devices and physical racks, ensuring seamless control across environments.</li> <li>Modular and Scalable: New vComponents or additional physical rack configurations can easily be integrated into the system using the same control message structure.</li> <li>Real-time Configuration: The WebSocket interface (for vDevices) and the python_raft control classes (for racks) allow real-time control of both virtual and physical systems.</li> <li>Platform-agnostic Flexibility: The Control Plane adapts to the environment, whether it\u2019s controlling virtual test environments or physical hardware, making it a versatile tool for a wide range of deployment scenarios.</li> </ul>"},{"location":"external_content/ut-core-wiki/5.1.1%3A-Standards%3A-vDevice-Control-Plane/#overview-of-expected-operation","title":"Overview of expected operation","text":"<pre><code>graph TD\n    subgraph ControlPlaneClass\n        A(Control Plane) --&gt;|Message Routing| B{Platform Configuration}\n    end\n\n    B --&gt;|vDevice| C[WebSocket Interface]\n    B --&gt;|Rack Setup| D[python_raft Control Classes]\n\n    subgraph vDevice Setup\n        C --&gt; E[vComponent 1]\n        C --&gt; F[vComponent 2]\n        C --&gt; G[vComponent N]\n    end\n\n    subgraph Rack Setup\n        D --&gt; M[Control Component 1]\n        D --&gt; N[Control Component 2]\n        D --&gt; O[Control Component N]\n        M --&gt; H[Rack Hardware 1]\n        N --&gt; I[Rack Hardware 2]\n        O --&gt; J[Rack Hardware N]\n    end\n\n    A -. External stimulus .-&gt; K[Test User]\n    K --&gt; A</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/","title":"When to Use QEMU","text":"<p>QEMU is a low-level virtualization tool that provides flexible control over virtual machines. It\u2019s best for situations where you need to: 1. Run custom configurations:    - Boot kernels directly (<code>uImage</code>, <code>zImage</code>, etc.).    - Simulate specific hardware architectures (ARM, x86, RISC-V, etc.).    - Configure low-level aspects like CPU type, machine type, or device emulation. 2. Support Embedded/IoT Development:    - QEMU is often used in embedded development for ARM-based or custom hardware simulations. 3. Run Lightweight Virtual Machines:    - You don\u2019t need Vagrant\u2019s higher-level management or provisioning capabilities. 4. Fine-Tuned Performance:    - QEMU allows advanced optimizations, especially with KVM for near-native speeds on x86 or Apple Silicon.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#pros-of-qemu","title":"Pros of QEMU:","text":"<ul> <li>Flexibility: Full control over the visualized hardware and kernel-level configuration.</li> <li>Architecture Support: Wide compatibility with architectures (ARMv7, ARM64, x86, RISC-V, etc.).</li> <li>Lightweight: No dependency on additional layers (like Vagrant) if you\u2019re scripting everything.</li> <li>Hardware Simulation: Emulates peripherals, GPUs, and devices, making it ideal for embedded development.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#cons-of-qemu","title":"Cons of QEMU:","text":"<ul> <li>Steeper Learning Curve: Requires manually configuring VM settings via CLI or scripts.</li> <li>Manual Management: Lacks built-in features for orchestrating multiple VMs or managing dependencies.</li> <li>No Provisioning Framework: You\u2019ll need custom scripts to install software/apps.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#best-use-cases-for-qemu","title":"Best Use Cases for QEMU:","text":"<ul> <li>You\u2019re working with custom hardware configurations (e.g., ARMv7, ARM64, or specific machine types).</li> <li>You need a lightweight, low-level VM without external tools.</li> <li>You\u2019re developing or testing embedded systems, kernels, or OS images.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#when-to-use-vagrant","title":"When to Use Vagrant","text":"<p>Vagrant is a higher-level tool designed to manage and automate virtual machine workflows. It abstracts much of the low-level VM setup and provides features like provisioning, networking, and multi-VM orchestration.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#pros-of-vagrant","title":"Pros of Vagrant:","text":"<ul> <li>Ease of Use: Automates VM creation and provisioning (installing apps, configuring environments).</li> <li>Provisioning: Built-in support for provisioning tools like Shell scripts, Ansible, Puppet, or Chef.</li> <li>Multi-VM Support: Easily define and manage multiple VMs in a single <code>Vagrantfile</code>.</li> <li>Cross-Provider Support: Works with VirtualBox, VMware, QEMU (via <code>libvirt</code>), and cloud providers like AWS.</li> <li>Portability: Shareable <code>Vagrantfile</code> makes it easy to replicate environments across systems.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#cons-of-vagrant","title":"Cons of Vagrant:","text":"<ul> <li>Resource Overhead: Adds an abstraction layer, which may slightly increase resource usage compared to QEMU alone.</li> <li>Dependency on Providers: Requires a supported provider like VirtualBox, libvirt, or VMware.</li> <li>Less Flexibility: While configurable, it abstracts many low-level options available in QEMU.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#best-use-cases-for-vagrant","title":"Best Use Cases for Vagrant:","text":"<ul> <li>You need to deploy multiple VMs with defined roles (e.g., database server, web server, etc.).</li> <li>You want to automate application installations and VM configuration.</li> <li>You need consistency across environments (e.g., development, testing, staging).</li> <li>You\u2019re working with a team and want a shareable, reproducible VM setup.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#comparison-table","title":"Comparison Table","text":"Feature QEMU Vagrant Ease of Use CLI or custom scripts required High-level abstraction, easy to use Multi-VM Management Manual setup via scripting Built-in support in <code>Vagrantfile</code> Provisioning Requires custom scripts Supports Shell, Ansible, Puppet, etc. Performance Lightweight, minimal overhead Slightly more overhead Architecture Support ARM, x86, RISC-V, custom hardware Depends on provider (e.g., libvirt, VirtualBox) Flexibility Full control over low-level config Less control, but easier to use Team Collaboration Requires sharing scripts manually Shareable, portable <code>Vagrantfile</code> Application Setup Manual installation/scripts Automates via provisioning"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#recommendations","title":"Recommendations","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#use-qemu-if","title":"Use QEMU if:","text":"<ol> <li>You\u2019re working with custom hardware architectures or embedded systems (e.g., ARMv7/ARM64 development).</li> <li>You want lightweight and fine-grained control over virtual machine setup.</li> <li>You\u2019re comfortable writing and maintaining custom scripts for managing VMs and provisioning.</li> </ol>"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#use-vagrant-if","title":"Use Vagrant if:","text":"<ol> <li>You need to manage multiple VMs with predefined roles and configurations (e.g., app server, database server).</li> <li>You want to automate application installation and environment setup via provisioning.</li> <li>You work in a team environment and need shareable, consistent VM setups.</li> <li>You value simplicity and portability for managing VMs.</li> </ol>"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#hybrid-approach-qemu-vagrant","title":"Hybrid Approach: QEMU + Vagrant","text":"<p>If you want the flexibility of QEMU and the automation capabilities of Vagrant, you can combine both: 1. Use QEMU as the virtualization backend with the <code>vagrant-libvirt</code> plugin. 2. Manage multiple VMs and application installations through Vagrant\u2019s provisioning system.</p> <p>Example: Vagrantfile for Multiple ARMv7 VMs Using QEMU</p> <pre><code>Vagrant.configure(\"2\") do |config|\n  # VM 1: Web Server\n  config.vm.define \"web\" do |web|\n    web.vm.provider \"libvirt\" do |libvirt|\n      libvirt.arch = \"arm\"\n      libvirt.machine_type = \"virt\"\n      libvirt.cpus = 2\n      libvirt.memory = 1024\n      libvirt.kernel = \"/path/to/web_kernel/zImage\"\n      libvirt.initrd = \"/path/to/web_initrd.img\"\n      libvirt.cmd_line = \"console=ttyAMA0 root=/dev/vda rw\"\n    end\n    web.vm.provision \"shell\", inline: \"sudo apt-get install -y nginx\"\n  end\n\n  # VM 2: Database Server\n  config.vm.define \"db\" do |db|\n    db.vm.provider \"libvirt\" do |libvirt|\n      libvirt.arch = \"arm\"\n      libvirt.machine_type = \"virt\"\n      libvirt.cpus = 2\n      libvirt.memory = 2048\n      libvirt.kernel = \"/path/to/db_kernel/zImage\"\n      libvirt.initrd = \"/path/to/db_initrd.img\"\n      libvirt.cmd_line = \"console=ttyAMA0 root=/dev/vda rw\"\n    end\n    db.vm.provision \"shell\", inline: \"sudo apt-get install -y mariadb-server\"\n  end\nend\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A--QEMU-vs-Vagrant/#conclusion","title":"Conclusion","text":"<ul> <li>For low-level control, QEMU is better, but it requires more effort for multi-VM setups and application provisioning.</li> <li>For multi-VM orchestration and ease of app installation, Vagrant is a better choice.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/","title":"Video and Audio Playback Performance Metrics Overview","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#purpose","title":"Purpose","text":"<p>This document provides a standardized set of metrics for monitoring and evaluating playback performance across video and audio streams on various platforms. These metrics help assess synchronization between the display and audio pipelines, efficiency in frame and audio buffer handling, and overall playback quality. This approach enables consistent performance analysis and identification of playback issues for both video and audio-only playback.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#core-metrics-for-video-playback","title":"Core Metrics for Video Playback","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#1-vsync-frame-rate","title":"1. VSync Frame Rate","text":"<ul> <li>Definition: The frame rate of the display, representing the refresh rate at which frames are displayed.</li> <li>Use: Determines the frequency of display refreshes, crucial for synchronizing video playback.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#2-number-of-vsyncs","title":"2. Number of VSyncs","text":"<ul> <li>Definition: Total count of vertical synchronization (VSync) events during playback.</li> <li>Use: Tracks display refresh occurrences over a specific playback duration.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#3-number-of-displayed-frames","title":"3. Number of Displayed Frames","text":"<ul> <li>Definition: The count of decoded frames successfully displayed on the screen.</li> <li>Use: Indicates the number of frames processed and displayed, which should typically align with the number of VSyncs or half of them, depending on the playback rate.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#4-number-of-frame-rate-conversions-frc","title":"4. Number of Frame Rate Conversions (FRC)","text":"<ul> <li>Definition: Occurs when the encoded frame rate differs from the display refresh rate, necessitating frame rate adjustments.</li> <li>Use: Measures the proportion of frame rate conversions to displayed frames. For example:<ul> <li>A 24fps encoded stream shown at 48fps should maintain a 50:50 FRC-to-displayed frames ratio.</li> <li>A 60fps encoded stream displayed at 60fps should have an FRC-to-displayed frames ratio of 0:100.</li> </ul> </li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#5-number-of-repeated-frames","title":"5. Number of Repeated Frames","text":"<ul> <li>Definition: Count of frames repeated due to the next frame\u2019s presentation timestamp (PTS) arriving too early, or video pause.</li> <li>Use: Indicates frame repetition instances, often due to timing issues where frames are displayed more than once because of early frame arrival or playback pauses.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#6-number-of-dropped-frames","title":"6. Number of Dropped Frames","text":"<ul> <li>Definition: Count of frames discarded because their PTS was behind the system\u2019s presentation clock (STC).</li> <li>Use: Indicates frame drops, often caused by performance lags, impacting playback smoothness.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#7-number-of-underruns-video","title":"7. Number of Underruns (Video)","text":"<ul> <li>Definition: Count of times the video pipeline was empty, meaning the display frame queue size was one frame or lower.</li> <li>Use: Tracks pipeline starvation, where playback cannot keep up with display demands, causing playback interruptions.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#expected-metric-behavior-for-video-playback","title":"Expected Metric Behavior for Video Playback","text":"<p>During playback, the following metric behaviors are expected:</p> <ul> <li> <p>VSync Events: The number of VSync events should match the playback duration when divided by the VSync frame rate.</p> </li> <li> <p>Displayed Frames: Should correspond to the encoded frame rate in relation to the VSync rate. For example, 10 seconds of playback at a 60Hz VSync rate should yield around 600 VSync events, with displayed frames aligning proportionally.</p> </li> <li> <p>Frame Rate Conversions: Frame rate conversions should match the ratio expected based on the encoded vs. display frame rates.</p> </li> <li> <p>Repeated, Dropped Frames, and Underruns: These values should remain at zero for optimal playback. Non-zero values highlight issues like timing (repeated frames), performance (dropped frames), or pipeline delays (underruns).</p> </li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#core-metrics-for-audio-playback","title":"Core Metrics for Audio Playback","text":"<p>For audio playback, where the stream is audio-only or audio is being decoded alongside video, the focus is on buffer management and pipeline stability:</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#1-audio-underruns","title":"1. Audio Underruns","text":"<ul> <li>Definition: The count of times the audio buffer was empty, causing interruptions in audio playback.</li> <li>Use: Indicates situations where the audio playback pipeline fails to maintain a continuous stream, often due to decoding or buffer management issues, causing gaps or stutters in audio.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#2-audio-overruns","title":"2. Audio Overruns","text":"<ul> <li>Definition: The count of instances where the audio buffer exceeded its maximum capacity, typically causing delays or blocking further processing until the buffer is cleared.</li> <li>Use: Reveals audio buffer overflows, potentially indicating a blockage or backpressure within the pipeline. This may occur if the buffer fills up faster than it can be processed, leading to stalled playback or delayed audio.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#expected-metric-behavior-for-audio-playback","title":"Expected Metric Behavior for Audio Playback","text":"<ul> <li> <p>Free-Running Audio: Typically, in non-broadcast environments, audio is expected to be the master clock and run freely, without frame drops or repeats. Video playback adjusts to remain in sync with the audio, ideally by adjusting the display clock to align with the audio playback.</p> </li> <li> <p>Underruns and Overruns: For audio playback, underruns and overruns should ideally be zero. Frequent underruns indicate that the audio decoding process cannot supply data quickly enough, resulting in gaps or interruptions. Overruns suggest buffer management issues, possibly due to a backlog in audio processing or timing delays.</p> </li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#regression-testing-for-playback-verification","title":"Regression Testing for Playback Verification","text":"<p>When using these metrics to validate playback performance and check for regressions, a set of standardized test streams should be used. For each test stream, baseline metrics (expected values for VSyncs, displayed frames, FRC, underruns, overruns, etc.) should be predefined. The measured values during playback can then be compared against these baselines to determine if the build passes or fails the playback test.</p> <p>By establishing known output values for these metrics, you can: - Quickly identify deviations from expected behavior, which may indicate performance or synchronization regressions. - Verify that the latest build maintains playback quality and stability across video and audio metrics.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A--Video-and-Audio-Playback-Performance-Metrics/#additional-considerations-for-implementation","title":"Additional Considerations for Implementation","text":"<p>The initial design for these generic hardware abstraction layer (HAL) metrics collection is intended to provide a unified approach for gathering video and audio playback performance metrics across platforms ensuring standardized collection across hardware could enhance cross-platform testing and optimization.</p> <p>Author: S.Webster</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Black%E2%80%90Box-Testing-and-Code-Coverage-Metrics/","title":"Black-box vs White-box","text":"<p>Black-box testing and white-box testing are two fundamental approaches to software testing. They differ primarily in their focus and the level of access to the internal workings of the system under test. Here's a breakdown of their key differences:</p> <p>Black-box Testing</p> <ul> <li>Focus: Functionality and external behaviour of the software.</li> <li>Internal knowledge: Testers do not need knowledge of the internal code, structure, or implementation details.</li> <li>Techniques:  Equivalence partitioning, boundary value analysis, decision table testing, state transition testing, use case testing.</li> <li>Advantages:<ul> <li>Simulates user perspective.</li> <li>Unbiased testing, as testers are not influenced by the code.</li> <li>Can be conducted by a separate testing team.</li> </ul> </li> <li>Disadvantages: <ul> <li>Potential for redundant testing.</li> <li>May miss certain code paths or logic errors.</li> <li>Difficult to design test cases without understanding the internal workings.</li> </ul> </li> </ul> <p>White-box Testing</p> <ul> <li>Focus: Internal structure, code, and logic of the software.</li> <li>Internal knowledge: Testers require detailed knowledge of the code base.</li> <li>Techniques: Statement coverage, branch coverage, path coverage, condition coverage, mutation testing.</li> <li>Advantages:<ul> <li>Thorough testing of all code paths and logic.</li> <li>Helps identify hidden errors and vulnerabilities.</li> <li>Can be performed early in the development cycle.</li> </ul> </li> <li>Disadvantages: <ul> <li>Requires programming skills and knowledge.</li> <li>Can be time-consuming and complex.</li> <li>May not identify issues related to user experience or usability.</li> </ul> </li> </ul> <p>In essence:</p> <ul> <li>Black-box testing treats the software as a \"black box,\" focusing on what it does rather than how it does it.</li> <li>White-box testing opens the \"black box,\" allowing testers to examine the internal workings and ensure that the code functions as intended.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Black%E2%80%90Box-Testing-and-Code-Coverage-Metrics/#black-box-testing-code-coverage","title":"Black Box Testing Code Coverage","text":"<p>In black-box testing, you don't have access to the internal code, so achieving complete code path coverage is not possible. </p> <p>Here's why:</p> <ul> <li>Lack of Visibility: Black-box testing focuses on the external behavior of the software. Testers provide inputs and observe outputs without knowing how the system processes those inputs internally. This means they can't directly target specific code paths.</li> <li>Input-Output Focus: Black-box testing relies on various techniques like equivalence partitioning, boundary value analysis, and state transition testing to design test cases. These techniques aim to cover a wide range of input scenarios and system behaviors, but they don't guarantee that all code paths will be executed.</li> <li>Complexity:  Software can have numerous code paths, including complex conditional statements and loops. Without code access, it's incredibly difficult to design test cases that guarantee the execution of every possible path.</li> </ul> <p>However, while full code path coverage isn't achievable, black-box testing can still provide good coverage in terms of:</p> <ul> <li>Functionality: Black-box testing can effectively uncover functional defects and ensure the software meets its requirements from a user perspective.</li> <li>Usability: It can help identify usability issues and ensure the software is user-friendly.</li> <li>Performance: Black-box testing can be used to assess performance characteristics like response time and resource usage.</li> <li>Security:  It can help uncover security vulnerabilities by testing different attack vectors.</li> </ul> <p>To maximize coverage in black-box testing, it's important to:</p> <ul> <li>Have clear and comprehensive requirements: This helps in designing effective test cases.</li> <li>Use a variety of testing techniques: Combining different black-box techniques can increase the chances of covering more scenarios.</li> <li>Prioritize critical functionalities: Focus on testing the most important and frequently used parts of the software.</li> </ul> <p>In summary: While black-box testing cannot guarantee full code path coverage, it remains a valuable approach for testing software from a user's perspective and uncovering a wide range of defects. To achieve broader coverage, it's often combined with white-box testing techniques that directly analyze the code.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Buildroot-vs.-Yocto-Project-vs.-Bob-the-Builder/","title":"Building Code Modules for Embedded Linux: A Comparison of Build Systems","text":"<p>This comparison focuses exclusively on the best methods for developers to build a single code module (e.g., a library or application) for an embedded Linux system. We are not concerned with building complete system images. Instead, we'll examine how each tool helps a developer compile, link, and prepare code for an embedded target.</p> <p>Key Principle: The module's build system should be triggered independently and not rely on the framework itself to initiate the build. This ensures the module remains portable and can be built on different systems without depending on the specific framework.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Buildroot-vs.-Yocto-Project-vs.-Bob-the-Builder/#buildroot","title":"Buildroot","text":"<ul> <li>Relevance for module development:  Buildroot can be adapted to build individual modules, leveraging its cross-compilation toolchain and dependency management. However, it may require extra effort to separate module builds from the Buildroot build process.</li> <li>Developer Experience: Provides a pre-configured environment, but integration with external build systems might require workarounds.</li> <li>Customization: Limited flexibility for integrating with existing build systems.</li> <li>Learning Curve: Relatively easy for basic usage.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Buildroot-vs.-Yocto-Project-vs.-Bob-the-Builder/#yocto-project","title":"Yocto Project","text":"<ul> <li>Relevance for module development: While powerful for building components, Yocto should be used to configure existing build scripts (Makefiles, CMake) rather than directly building the module. This ensures the module remains independent.</li> <li>Developer Experience:  Can be complex to integrate with external build systems due to its layered structure and BitBake.</li> <li>Customization: Highly customizable, but this can add complexity when integrating with existing build scripts.</li> <li>Learning Curve: Steep.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Buildroot-vs.-Yocto-Project-vs.-Bob-the-Builder/#bob-the-builder","title":"Bob the Builder","text":"<ul> <li>Relevance for module development: Well-suited for building modules in isolated environments. You can define dependencies and trigger builds independently.</li> <li>Developer Experience:  Modern approach with declarative configuration and containerization. Aims for ease of use and reproducibility.</li> <li>Customization:  Offers a balance between flexibility and ease of use for integrating with existing build systems.</li> <li>Learning Curve: Moderate.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Buildroot-vs.-Yocto-Project-vs.-Bob-the-Builder/#cmakemakescripts","title":"CMake/Make/Scripts","text":"<ul> <li>Relevance for module development: The most direct and independent approach. You have full control over the build process and can easily integrate with any distribution.</li> <li>Developer Experience:  Familiar tools for many developers, but requires manual configuration and scripting.</li> <li>Customization:  Highly customizable.</li> <li>Learning Curve:  Can range from moderate to steep.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Buildroot-vs.-Yocto-Project-vs.-Bob-the-Builder/#bazel","title":"Bazel","text":"<ul> <li>Relevance for module development: Excellent for building complex projects with many dependencies. Strong support for hermetic builds and remote caching.</li> <li>Developer Experience: Can have a steeper learning curve, but offers powerful features and good performance.</li> <li>Customization: Highly customizable through <code>BUILD</code> files.</li> <li>Key Considerations: May require more effort to set up initially.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Buildroot-vs.-Yocto-Project-vs.-Bob-the-Builder/#meson","title":"Meson","text":"<ul> <li>Relevance for module development: Good for building C/C++ modules. Simpler syntax and faster build times compared to CMake.</li> <li>Developer Experience: Generally considered easier to learn and use than CMake.</li> <li>Customization: Provides good customization options.</li> <li>Key Considerations: Growing in popularity, but the community might not be as large as CMake's.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Buildroot-vs.-Yocto-Project-vs.-Bob-the-Builder/#scons","title":"SCons","text":"<ul> <li>Relevance for module development: Can be used to build C/C++ modules. Offers more flexibility than Make and integrates well with Python.</li> <li>Developer Experience: Python knowledge can be helpful.</li> <li>Customization: Highly customizable due to its Python foundation.</li> <li>Key Considerations: Not as widely used as CMake or Make.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Buildroot-vs.-Yocto-Project-vs.-Bob-the-Builder/#platformio","title":"PlatformIO","text":"<ul> <li>Relevance for module development: Provides a simplified way to build modules for various embedded platforms. Can handle cross-compilation and dependencies.</li> <li>Developer Experience: User-friendly with good IDE support.</li> <li>Customization: Offers a good level of customization for embedded projects.</li> <li>Key Considerations: More focused on microcontroller-based platforms.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Buildroot-vs.-Yocto-Project-vs.-Bob-the-Builder/#custom-shell-scripts","title":"Custom Shell Scripts","text":"<ul> <li>Relevance for module development: Provides maximum flexibility and control. You can use any tools and commands you need.</li> <li>Developer Experience: Requires good shell scripting knowledge.</li> <li>Customization: Completely customizable.</li> <li>Key Considerations: Best for simple modules or when you need very specific control.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Buildroot-vs.-Yocto-Project-vs.-Bob-the-Builder/#summary-table","title":"Summary Table","text":"Feature Buildroot Yocto Bob CMake/Make Bazel Meson SCons PlatformIO Custom Scripts Focus Root filesystem Component building Streamlined builds Code building Complex builds C/C++ modules Flexible builds Embedded ecosystem Maximum control Author/Origin Peter Korsgaard Yocto Project Sony Kitware (CMake) Google Jussi Pakkanen Steven Knight PlatformIO N/A Configuration <code>menuconfig</code> Layers/recipes YAML <code>CMakeLists.txt</code>, Makefiles <code>BUILD</code> files Meson files Python scripts PlatformIO config Shell scripts Build System Makefile-based BitBake Docker CMake/Make + custom Bazel Meson SCons PlatformIO Custom Customization Limited High Balanced High High Good High Good Complete Independent Builds Requires effort Configure, not build Well-suited Ideal Excellent Good Good Good Ideal Community Active Large Growing Massive Growing Growing Moderate Growing N/A Learning Curve Moderate Steep Moderate Moderate/Steep Steep Moderate Moderate Moderate Moderate/Steep Dev Experience Less flexible Complex Modern Familiar but manual Powerful but steep User-friendly Python-based User-friendly Requires scripting Strengths Pre-configured Dependency management Reproducible builds Flexibility Hermetic builds Speed, simplicity Flexibility Simplified workflow Maximum control Weaknesses Not for modules Overkill, integration Relatively new Can be complex Initial setup Community size Less widely used Microcontroller focus Can be complex"},{"location":"external_content/ut-core-wiki/FAQ%3A-Buildroot-vs.-Yocto-Project-vs.-Bob-the-Builder/#which-one-to-choose-for-developing-code-modules","title":"Which one to choose (for developing code modules)?","text":"<ul> <li>Quick cross-compilation with standard libraries: Buildroot (with adaptation)</li> <li>Manage complex dependencies, configure build scripts: Yocto (configure, not build)</li> <li>Modern, reproducible environment, good developer experience: Bob the Builder</li> <li>Flexibility, control, portability, comfortable with scripting: CMake/Make/Scripts</li> <li>Complex projects, hermetic builds, remote caching: Bazel</li> <li>User-friendly build system for C/C++ modules: Meson</li> <li>Flexibility and Python integration: SCons</li> <li>Simplified workflow for embedded platforms: PlatformIO</li> <li>Maximum control and customization: Custom Shell Scripts</li> </ul> <p>Choosing the right tool depends on your module's complexity, your team's expertise, and your desired level of customization. Prioritize independent module builds to ensure portability and avoid unnecessary dependencies on the build framework.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-C-Macro-that-prints-structure-fields/","title":"FAQ: C Macro that prints structure fields","text":"<p>This macro prints the structure name, field names, and their corresponding values:</p> <pre><code>#include &lt;stdio.h&gt;\n\n#define LOG_STRUCT(structVar) \\\n    do { \\\n        printf(\"Structure: %s\\n\", #structVar); \\\n        _log_struct_helper(structVar); \\\n    } while (0)\n\n#define _log_struct_helper(structVar) \\\n    _log_struct_fields_helper(structVar, _get_struct_fields(structVar))\n\n#define _get_struct_fields(structVar) \\\n    _get_struct_fields_helper(0, structVar)\n\n#define _get_struct_fields_helper(index, structVar) \\\n    _Generic((structVar), \\\n        default: _get_struct_fields_helper(index + 1, structVar), \\\n        char: #structVar.index, \\\n        int: #structVar.index, \\\n        float: #structVar.index, \\\n        double: #structVar.index, \\\n        char *: #structVar.index, \\\n        int *: #structVar.index, \\\n        float *: #structVar.index, \\\n        double *: #structVar.index \\\n    )\n\n#define _log_struct_fields_helper(structVar, fieldName, ...) \\\n    do { \\\n        printf(\"  %s = \", fieldName); \\\n        _print_field_value(structVar.index); \\\n        if (sizeof((int[]){__VA_ARGS__})/sizeof(int) &gt; 0) { \\\n            printf(\"\\n\"); \\\n            _log_struct_fields_helper(structVar, __VA_ARGS__); \\\n        } \\\n    } while (0)\n\n#define _print_field_value(fieldValue) \\\n    _Generic((fieldValue), \\\n        char: printf(\"%c\", fieldValue), \\\n        int: printf(\"%d\", fieldValue), \\\n        float: printf(\"%f\", fieldValue), \\\n        double: printf(\"%lf\", fieldValue), \\\n        char *: printf(\"%s\", fieldValue), \\\n        default: printf(\"%p\", (void*)fieldValue) \\\n    )\n</code></pre> <p>Explanation</p> <ul> <li><code>LOG_STRUCT</code>: This is the main macro that you'll use. It takes the structure variable as input and prints the structure's name.</li> <li><code>_log_struct_helper</code>: This helper function recursively processes the structure fields.</li> <li><code>_get_struct_fields</code>: This helper function uses <code>_Generic</code> to determine the types of fields in the structure and generates a list of field names.</li> <li><code>_log_struct_fields_helper</code>: This helper function iterates over the list of field names, prints each field name and its value using <code>_print_field_value</code>.</li> <li><code>_print_field_value</code>: This helper function uses <code>_Generic</code> to print the field value based on its type. It handles basic types like <code>char</code>, <code>int</code>, <code>float</code>, <code>double</code>, and pointers to these types. For other types, it prints the memory address.</li> </ul> <p>Example Usage</p> <pre><code>typedef struct {\n    int id;\n    char name[50];\n    float price;\n} Product;\n\nint main() {\n    Product p = {1, \"Sample Product\", 9.99};\n    LOG_STRUCT(p);\n    return 0;\n}\n</code></pre> <p>Output</p> <pre><code>Structure: p\n  id = 1\n  name = Sample Product\n  price = 9.990000\n</code></pre> <p>Key Points:</p> <ul> <li>Limited Type Support: The macro currently supports basic types (<code>char</code>, <code>int</code>, <code>float</code>, <code>double</code>) and pointers to these types. You can extend it to handle other types by adding more cases to the <code>_Generic</code> expressions in <code>_get_struct_fields_helper</code> and <code>_print_field_value</code>.</li> <li>Nested Structures: The macro does not currently handle nested structures. You would need to add more logic to recursively process nested structures if required.</li> <li>Arrays: The macro handles arrays of basic types by printing their memory address. To print the individual elements of an array, you'll need to add custom logic.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-C-macro-that-prints-the-function-name%2C-parameter-names-with-values/","title":"FAQ: C macro that prints the function name, parameter names with values","text":"<p>C macro that prints the function name, parameter names, and their corresponding values for debugging purposes. </p> <p>It uses the <code>__func__</code> identifier to get the function name and variadic macros to handle a variable number of parameters.</p> <pre><code>#include &lt;stdio.h&gt;\n\n#define LOG_PARAMS(...) \\\n    do { \\\n        printf(\"%s(\", __func__); \\\n        _log_params_helper(__VA_ARGS__); \\\n        printf(\")\\n\"); \\\n    } while (0)\n\n#define _log_params_helper(param, ...) \\\n    do { \\\n        printf(#param \" = %p\", (void*)param); \\\n        if (sizeof((int[]){__VA_ARGS__})/sizeof(int) &gt; 0) { \\\n            printf(\", \"); \\\n            _log_params_helper(__VA_ARGS__); \\\n        } \\\n    } while (0)\n</code></pre> <p>Explanation:</p> <ul> <li><code>LOG_PARAMS</code>: This is the main macro that you'll use in your functions. <ul> <li>It uses <code>__func__</code> to print the function name.</li> <li>It calls <code>_log_params_helper</code> to handle the actual parameter logging.</li> </ul> </li> <li><code>_log_params_helper</code>: This is a recursive helper macro.<ul> <li>It takes a parameter name and its value, prints them in the format <code>param = value</code>.</li> <li>It uses a clever trick with <code>sizeof</code> and an array to check if there are more parameters to log. If so, it recursively calls itself with the remaining parameters.</li> </ul> </li> </ul> <p>Example Usage:</p> <pre><code>void myFunction(int x, float y, char* z) {\n    LOG_PARAMS(x, y, z); \n    // ... rest of your function code\n}\n\nint main() {\n    myFunction(10, 3.14, \"hello\");\n    return 0;\n}\n</code></pre> <p>Output:</p> <pre><code>myFunction(x = 0x7ff... , y = 0x7ff..., z = 0x7ff...)\n</code></pre> <p>Key Points:</p> <ul> <li>Pointers: This macro prints the memory addresses (pointers) of the parameters. For basic types like <code>int</code> or <code>float</code>, you'll see their values directly. For more complex types (structs, arrays), you'll see their memory addresses. You might need to add custom logic within the macro to handle specific types if you want to print their contents directly.</li> <li>Error Handling: This macro doesn't include extensive error handling (e.g., checking for NULL pointers). You might want to add such checks if your code requires them.</li> <li>Portability: <code>__func__</code> is widely supported, but its exact behavior might vary slightly across compilers.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Choosing-GHEC%E2%80%90ORG-or-RDKCentral/","title":"FAQ: Choosing GHEC\u2010ORG or RDKCentral","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A-Choosing-GHEC%E2%80%90ORG-or-RDKCentral/#choosing-the-right-github-organisation-and-access-level","title":"Choosing the Right GitHub Organisation and Access Level","text":"<p>This document outlines the decision-making process for selecting the appropriate GitHub organisation and repository access level for code storage and collaboration.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Choosing-GHEC%E2%80%90ORG-or-RDKCentral/#github-organisations","title":"GitHub Organisations","text":"<ul> <li> <p>rdkcentral (Github Teams Plan):</p> <ul> <li>Primarily for open-source projects with public read access.</li> <li>Private repositories require a paid licence for write access.</li> <li>No Comcast login required for public access (Read Only)</li> <li>Cost: Free for public repositories. Paid licences for write access, or private repositories.<ul> <li>Teams plan costs $4 dollars per user per month.</li> </ul> </li> </ul> </li> <li> <p>ghec-org (GHEC - GitHub Enterprise Cloud):</p> <ul> <li>Controlled by Internal DevX.</li> <li>Designed for internal and private repositories.</li> <li>Offers \"private\" (team-based access) and \"internal\" (wider access) repository settings.</li> <li>Cost: Paid enterprise license <ul> <li>GHEC Plan costs $21 dollars per user per month. (Comcast may have a discounted rate due to volume)</li> </ul> </li> </ul> </li> </ul> <p>https://github.com/pricing</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Choosing-GHEC%E2%80%90ORG-or-RDKCentral/#decision-tree","title":"Decision Tree","text":"<p>The flowchart below illustrates the decision-making process. Here's a breakdown of the key considerations:</p> <ul> <li>Public vs. Controlled Access: If the code needs to be publicly accessible or in the future will be publically accessible , <code>rdkcentral</code> is the appropriate choice. If controlled access is required, <code>ghec-org</code> is preferred.</li> <li> <p>rdkcentral Access Levels:</p> <ul> <li>Public:  Free, read-only access for everyone.</li> <li>Private: Paid licence for write access, restricted to team members.</li> <li>Write: Paid licence for write access, restricted to team members.</li> </ul> </li> <li> <p>ghec-org Access Levels:</p> <ul> <li>Internal: Visible to all users within the <code>ghec-org</code> domain.</li> <li>Private: High security, restricted to specific teams.</li> <li>Partner:  Access for external partners, requiring onboarding to Comcast enterprise.</li> </ul> </li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Choosing-GHEC%E2%80%90ORG-or-RDKCentral/#key-factors","title":"Key Factors","text":"<ul> <li>Open Source: For new/current or future, open-source projects, <code>rdkcentral</code> with public repositories is ideal.</li> <li>Collaboration with Partners:  If partners need write access, <code>rdkcentral</code> (private) offers a simpler and potentially more cost-effective solution compared to onboarding them to Comcast's GHEC.</li> <li>Security: For highly sensitive code, <code>ghec-org</code> (private) provides the highest level of security.</li> <li>Cost: Consider the costs associated with each option, including paid licences and potential onboarding expenses.</li> </ul> <p>By carefully evaluating these factors and following the decision tree, you can select the most suitable GitHub organisation and access level for your project.</p> <pre><code>graph TD\n    A[Start] --&gt; C{Public or Controlled Access?};\n    C -- Public --&gt; E{rdkcentral};\n    C -- Controlled --&gt; F{ghec-org};\n    E --&gt; G{Read-Only or Write Access?};\n    G -- Read-Only --&gt; H[rdkcentral-public - Tier 2 Engineers];\n    G -- Write Access --&gt; I{rdkcentral-private - Tier 1 Engineers};\n    F --&gt; J{Access Level?};\n    J -- Internal --&gt; K[ghec-org internal];\n    J -- Private --&gt; L[ghec-org private];\n    J -- Partner --&gt; M[ghec-org partner];\n\n    H --&gt; N(Can read all public repos&lt;br&gt;No paid license&lt;br&gt;Changes in personal forks&lt;br&gt;PRs from forks possible&lt;br&gt;Issues &amp; discussions allowed);\n    I --&gt; O(Future public release possible&lt;br&gt;Easy external sharing&lt;br&gt;Lower write access cost&lt;br&gt;No DevX onboarding&lt;br&gt;Branching &amp; PRs allowed&lt;br&gt;Read all public repos&lt;br&gt;Paid license for Tier 1 engineers&lt;br&gt;Issues &amp; discussions allowed);\n    K --&gt; P(Internal, not shared externally&lt;br&gt;All ghec-org users can see);\n    L --&gt; Q(High security&lt;br&gt;No vendor access by default);\n    M --&gt; R(Partner access possible with DevX onboarding&lt;br&gt;Internal DevX codebase access);\n\n    style N fill:#ccf,stroke:#333,stroke-width:2px\n    style O fill:#ccf,stroke:#333,stroke-width:2px\n    style P fill:#ccf,stroke:#333,stroke-width:2px\n    style Q fill:#ccf,stroke:#333,stroke-width:2px\n    style R fill:#ccf,stroke:#333,stroke-width:2px</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Comparing-Python-Development-Platforms/","title":"Python Development","text":"<p>When developing Python applications, your choice of operating system\u2014Mac, Windows, or Linux\u2014can affect the development process in terms of setup, environment management, compatibility, and available tools. Here's a concise comparison of Python development across these three platforms:</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Comparing-Python-Development-Platforms/#1-setup-and-installation","title":"1. Setup and Installation","text":"<ul> <li>Mac:</li> <li>macOS comes with Python 2.x pre-installed, but Python 3 needs to be installed separately.</li> <li>Installation via Homebrew is recommended for managing multiple versions of Python.</li> <li> <p>Smooth setup for most Python tools and libraries.</p> </li> <li> <p>Windows:</p> </li> <li>Python isn't pre-installed on Windows, so you need to download and install it from the official Python website.</li> <li>The installer now includes an option to add Python to your system's PATH, simplifying setup.</li> <li> <p>Use Windows Subsystem for Linux (WSL) to run Linux-based Python workflows within Windows.</p> </li> <li> <p>Linux:</p> </li> <li>Python is often pre-installed on most Linux distributions (typically Python 3.x).</li> <li>Package managers like apt, yum, or dnf can easily handle Python installation and version management.</li> <li>Linux is closely aligned with Unix-like systems, so Python libraries related to server and system programming often have fewer compatibility issues.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Comparing-Python-Development-Platforms/#2-environment-management","title":"2. Environment Management","text":"<ul> <li>Mac:</li> <li>Homebrew simplifies the installation of Python and related tools.</li> <li>Tools like pyenv and virtualenv are commonly used for managing multiple Python versions and virtual environments.</li> <li> <p>Most Python tools work seamlessly with macOS due to its Unix foundation.</p> </li> <li> <p>Windows:</p> </li> <li>Managing Python versions can be done using pyenv-win or Anaconda.</li> <li>Virtual environments are supported, but sometimes require extra configuration due to Windows path handling.</li> <li> <p>WSL can be used for Linux-like environment management if needed.</p> </li> <li> <p>Linux:</p> </li> <li>Environment management with pyenv, virtualenv, and Anaconda is straightforward due to Python's tight integration with Linux.</li> <li>Linux provides the most natural environment for Python development, especially for DevOps, web development, and system-level programming.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Comparing-Python-Development-Platforms/#3-development-tools-and-ides","title":"3. Development Tools and IDEs","text":"<ul> <li>Mac:</li> <li>Popular IDEs like PyCharm, Visual Studio Code, and Sublime Text work well.</li> <li>Mac also supports terminal-based development with tools like vim or Emacs.</li> <li> <p>Native support for tools like Docker and Kubernetes simplifies cloud and containerized development.</p> </li> <li> <p>Windows:</p> </li> <li>PyCharm and Visual Studio Code work well on Windows.</li> <li>Command-line tools are less consistent across environments, but PowerShell and WSL help.</li> <li> <p>GUI-based Python tools and IDEs are more commonly used on Windows due to its focus on GUI applications.</p> </li> <li> <p>Linux:</p> </li> <li>PyCharm, VS Code, and terminal-based editors like vim or Emacs are highly popular.</li> <li>Full compatibility with command-line development and system-level tools.</li> <li>Linux is ideal for server-side and cloud development, with Docker and containerization tools natively integrated.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Comparing-Python-Development-Platforms/#4-package-and-dependency-management","title":"4. Package and Dependency Management","text":"<ul> <li>Mac:</li> <li>pip and pipenv work smoothly.</li> <li>Some libraries with system-level dependencies may require additional installations via Homebrew (e.g., C libraries).</li> <li> <p>Fewer compatibility issues than Windows, but some packages may still need custom configurations.</p> </li> <li> <p>Windows:</p> </li> <li>pip works well for pure Python packages, but some libraries with C extensions (like NumPy or SciPy) may require pre-built binaries or additional configuration.</li> <li> <p>Package managers like Chocolatey or Conda can help with more complex dependencies.</p> </li> <li> <p>Linux:</p> </li> <li>Linux is ideal for managing Python packages with system-level dependencies due to easy integration with C/C++ compilers and package managers (like apt).</li> <li>pip, pipenv, and conda work seamlessly with native system dependencies.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Comparing-Python-Development-Platforms/#5-compatibility-with-python-libraries","title":"5. Compatibility with Python Libraries","text":"<ul> <li>Mac:</li> <li>Mac has good compatibility with most Python libraries, particularly those related to web development and data science.</li> <li> <p>Occasionally, there are issues with libraries that have system-level dependencies (e.g., requiring Xcode command-line tools).</p> </li> <li> <p>Windows:</p> </li> <li>Some Python libraries, especially those with C extensions or system-level dependencies, can be challenging to install or configure.</li> <li>Tools like Microsoft Visual C++ Build Tools are often required to compile C extensions.</li> <li> <p>WSL helps with Linux-native libraries, but native Windows compatibility can still be hit or miss.</p> </li> <li> <p>Linux:</p> </li> <li>Most libraries, especially system-level or server-oriented libraries, work out of the box on Linux.</li> <li>Linux is the default development environment for many Python projects, particularly in the open-source world, so compatibility is rarely an issue.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Comparing-Python-Development-Platforms/#6-performance-and-stability","title":"6. Performance and Stability","text":"<ul> <li>Mac:</li> <li>Generally offers good performance and stability for Python development.</li> <li> <p>macOS is Unix-based, so it provides a stable environment for Python development, especially for server and web-related tasks.</p> </li> <li> <p>Windows:</p> </li> <li>Python performance on Windows is solid for most tasks, but you may encounter occasional compatibility issues, especially with libraries that rely heavily on Unix-like behavior.</li> <li> <p>WSL can help with Linux-based workflows, but native Windows performance for Python remains slightly behind Linux.</p> </li> <li> <p>Linux:</p> </li> <li>Python development on Linux is highly stable and often provides the best performance, especially for system-level tasks and web development.</li> <li>Linux is the closest environment to production for many Python applications, particularly those deployed on cloud infrastructure.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Comparing-Python-Development-Platforms/#7-best-use-cases","title":"7. Best Use Cases","text":"<ul> <li> <p>Mac: Great for developers who need a Unix-like environment but also want access to mainstream software and development tools. Ideal for web development, data science, and mobile development.</p> </li> <li> <p>Windows: Best for developers who work primarily with desktop applications or GUI-based tools. WSL helps for more Linux-like development workflows.</p> </li> <li> <p>Linux: The go-to platform for server-side, DevOps, cloud, and system programming. Ideal for open-source projects and environments that closely match production.</p> </li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Comparing-Python-Development-Platforms/#summary-table","title":"Summary Table","text":"Feature Mac Windows Linux Installation Pre-installed (Python 2.x), Homebrew Requires manual install Pre-installed, easy package manager Environment Management Homebrew, pyenv pyenv-win, Anaconda, WSL pyenv, virtualenv, Anaconda Development Tools PyCharm, VS Code, Sublime, CLI tools PyCharm, VS Code, WSL, PowerShell PyCharm, VS Code, vim, Emacs Package Management Smooth with pip and Homebrew Challenges with C extensions Seamless with pip and apt/yum Library Compatibility Good, with minor system dependency issues Some challenges with certain packages Excellent, minimal compatibility issues Performance High performance, stable Good, but sometimes needs extra configuration High performance, best for system-level tasks Best For Web, data science, mobile GUI apps, general Python development Server, system programming, open-source development <p>Each platform has strengths depending on your project\u2019s requirements. Linux is ideal for server-side and system programming, macOS offers a balance with Unix-like tools and GUI development, and Windows is improving rapidly, especially with WSL.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git-Flow-Support-for-Multiple-mainlines/","title":"FAQ: Git Flow Support for Multiple mainlines","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A-Git-Flow-Support-for-Multiple-mainlines/#git-flow-supporting-for-multiple-mainlines","title":"Git Flow Supporting for Multiple mainlines","text":"<p>Git Flow enhances the Git workflow by standardizing branching conventions and providing helpful commands for managing features, releases, and hotfixes. This manual guides you through understanding and automating Git Flow configuration, where you can use this to re-configure your development mainline and have multiple configurations.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git-Flow-Support-for-Multiple-mainlines/#understanding-git-flow-variables","title":"Understanding Git Flow Variables","text":"<p>Git Flow operates by storing configuration variables within each repository's Git configuration. When you initialize Git Flow using <code>git flow init -d</code> (with defaults), it sets up these variables in the <code>.git/config</code> file.</p> <p>Viewing Configuration:</p> <p>You can inspect the current configuration in two ways:</p> <ol> <li> <p>Using Git: <pre><code>git config --list | grep gitflow \n</code></pre>    This will output lines like:    <pre><code>gitflow.branch.master=main\ngitflow.branch.develop=develop\ngitflow.prefix.feature=feature/\n...\n</code></pre></p> </li> <li> <p>Using Git Flow: <pre><code>git flow config\n</code></pre>    This provides a more user-friendly display:    <pre><code>Branch name for production releases: main\nBranch name for \"next release\" development: develop\nFeature branch prefix: feature/\n...\n</code></pre></p> </li> </ol>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git-Flow-Support-for-Multiple-mainlines/#automating-configuration-with-shared-file","title":"Automating Configuration with Shared File","text":"<p>1. Create the Shared Configuration File (<code>&lt;project_root&gt;/.gitflowconfig</code>):</p> <p>This file defines your Git Flow settings. Here's an example supporting dual <code>main</code>/<code>develop</code> branches:</p> <p><code>&lt;project_root&gt;/.gitflowconfig</code></p> <pre><code>master=main  \ndevelop=develop \nfeature=feature/\nbugfix=bugfix/  \nrelease=release/\nhotfix=hotfix/\nsupport=support/ \nversiontag=\n</code></pre> <p><code>&lt;project_root&gt;/.gitflowconfig2</code></p> <pre><code>master=main2\ndevelop=develop2\nfeature=feature/\nbugfix=bugfix/  \nrelease=release/\nhotfix=hotfix/\nsupport=support/ \nversiontag=\n</code></pre> <p>2. Write the Automation Script (<code>init_gitflow.sh</code>):</p> <pre><code>#!/bin/bash\n\n# Optionally specify a custom Git Flow configuration file path\ncustom_config_file=\"\"\nif [[ $# -gt 0 ]]; then\n  custom_config_file=$1\nfi\n\n# Check if Git Flow is already initialized \nif [[ $(git config --get gitflow.branch.master) ]]; then\n  echo \"Git Flow is already initialized.\"\n  exit 0  # Exit successfully if already initialized\nfi\n\n# Load configuration from .gitflowconfig or the specified file\nif [[ -n \"$custom_config_file\" ]]; then\n  if [[ -f \"$custom_config_file\" ]]; then\n    source \"$custom_config_file\"\n    echo \"Using custom Git Flow configuration from $custom_config_file\"\n  else\n    echo \"Error: Custom configuration file not found: $custom_config_file\"\n    exit 1\n  fi\nelse\n  if [[ -f .gitflowconfig ]]; then\n    source .gitflowconfig\n    echo \"Using default Git Flow configuration from .gitflowconfig\"\n  else\n    echo \"Error: Neither default nor custom Git Flow configuration file found.\"\n    exit 1\n  fi\nfi\n\n# Initialize Git Flow using defaults (-d)\ngit flow init -d\n\n# Set the configuration parameters from .gitflowconfig or the specified file\ngit config gitflow.branch.master $master\ngit config gitflow.branch.develop $develop\ngit config gitflow.prefix.feature $feature\ngit config gitflow.prefix.bugfix $bugfix         # Set bugfix prefix\ngit config gitflow.prefix.release $release       # Set release prefix\ngit config gitflow.prefix.hotfix $hotfix         # Set hotfix prefix\ngit config gitflow.prefix.support $support       # Set support prefix\ngit config gitflow.prefix.versiontag $versiontag # Set versiontag prefix\n\necho \"Git Flow initialized successfully!\"\n</code></pre> <p>3. Make the Script Executable:</p> <pre><code>chmod +x init_gitflow.sh\n</code></pre> <p>4. Run the Script: (using default configuration)</p> <pre><code>./init_gitflow.sh\n</code></pre> <p>or specify a global / alternative configuration</p> <pre><code>./init_gitflow.sh ~/.gitflowconfig2\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git-Flow-Support-for-Multiple-mainlines/#leveraging-git-flow-in-your-workflow","title":"Leveraging Git Flow in Your Workflow","text":"<p>The variables <code>develop</code> and <code>main</code> are setup based on configuration, allowing multiple mainlines to be supported.</p> <p>Using Feature Branches</p> <pre><code># Start a new feature branch from variable 'develop'\ngit checkout $(git config --get gitflow.branch.develop)\ngit flow feature start &lt;feature_name&gt; \n# ... (develop your feature)\n# Finish the feature branch, merging it into 'develop'\ngit flow feature finish &lt;feature_name&gt; \n</code></pre> <p>Release Branches:</p> <pre><code># Start a new release branch from variable 'develop'\ngit checkout $(git config --get gitflow.branch.develop)\ngit flow release start &lt;version_number&gt;\n# ... (perform final testing)\nautochange-log -v &lt;version_number&gt; # generates release notes\n# Finish the release branch, merging into both variable 'develop' AND variable 'main', and pushing changes\ngit flow release finish &lt;version_number&gt; \ngit push \ngit push --tags\ngit checkout $(git config --get gitflow.branch.main) # push to variable `main`\ngit push\ngit checkout $(git config --get gitflow.branch.develop) # push to variable `develop`\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git-Flow-Support-for-Multiple-mainlines/#scaling-git-flow-initialization-with-og-optional","title":"Scaling Git Flow Initialization with <code>og</code> (Optional)","text":"<p>If you have the <code>sc</code> (Source Control) scripts installed, you can leverage the <code>og</code> (Operate on Git) command to effortlessly initialize Git Flow across multiple repositories within your project's directory structure. </p> <p>Here's how it works:</p> <ol> <li>Prerequisites:</li> <li><code>sc</code> Scripts: Ensure you have the <code>sc</code> scripts installed. You can find them on GitHub or package managers for your system.</li> <li> <p><code>init_gitflow.sh</code> and <code>.gitflowconfig</code>: Make sure these files are located in your home directory (<code>~</code>).</p> </li> <li> <p>Run the <code>og</code> Command:</p> </li> </ol> <pre><code>og cmd \"~/init_gitflow.sh ~/.gitflowconfig\"\n</code></pre> <p>This command does the following:</p> <ul> <li>Starting Point: Begins at your current directory.</li> <li>Recursive Search: Looks for all Git repositories within the current directory and its subdirectories.</li> <li>Execution: In each found repository, it runs the <code>~/init_gitflow.sh</code> script.  The script will use the shared configuration file <code>~/.gitflowconfig</code> to set up Git Flow consistently.</li> </ul> <p>Example Usage:</p> <p>Let's say your project has the following structure:</p> <pre><code>my_project/\n\u251c\u2500\u2500 frontend/\n\u2502   \u2514\u2500\u2500 .git\n\u251c\u2500\u2500 backend/\n\u2502   \u2514\u2500\u2500 .git\n\u2514\u2500\u2500 docs/\n</code></pre> <p>By running <code>og cmd \"~/init_gitflow.sh ~/.gitflowconfig\"</code> from within <code>my_project/</code>, you'll initialize Git Flow in both the <code>frontend</code> and <code>backend</code> repositories, applying the settings from your shared configuration file.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/","title":"FAQ: Git\u2010Flow: Developers Branching Model","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/#1-clone-the-repository","title":"1. Clone the Repository","text":"<p>To start, clone the repository to your local machine:</p> <pre><code>git clone https://github.com/rdkcentral/ut-core.git\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/#2-set-up-git-flow","title":"2. Set Up Git Flow","text":"<p>We use the Git Flow branching model for managing branches. If you're new to Git Flow, please review this guide:</p> <p>Example of initialising git flow:</p> <pre><code>git flow init -d\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/#3-create-a-feature-branch","title":"3. Create a Feature Branch","text":"<p>Create a new feature branch from the 'develop' branch for both new features and bug fixes, adhering to the naming convention: </p> <pre><code>feature/gh&lt;issue-number&gt;_&lt;brief-description&gt;\n</code></pre> <p>or</p> <pre><code>feature/&lt;issue-number&gt;_&lt;brief-description&gt;\n</code></pre> <p>The  should briefly summarize the branch's purpose. <p>Example of creating a feature branch:</p> <pre><code>git flow feature start 123_add-logging-enhancements\n</code></pre> <p>GUI from github.com/rdkcentral: It's possible to create the branch from the GUI also.</p> <p>Compliance Notice: All contributors must strictly follow our Git branching guidelines. Every branch must be accurately named using the corresponding issue ID from our issue tracker, ensuring traceability and upholding automated workflow integrity. Incorrectly named or untraceable branches will fall under a retention policy, allowing for correction within 30 days before removal. This policy is crucial for maintaining the clarity and reliability of our project management processes.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/#4-implement-changes","title":"4. Implement Changes","text":"<p>Make changes according to the project\u2019s coding guidelines.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/#5-commit-your-changes","title":"5. Commit Your Changes","text":"<p>Ensure your commits are clear and adhere to the 50/72 rule: - Summary: Start with an imperative verb (Fix, Update, Add, Improve, Merge, Refactor etc) include the GitHub issue ID, and succinctly describe the change. - Body: Optionally, provide a detailed explanation, keeping lines to 72 characters.</p> <p>Example of a Commit Message:</p> <pre><code>Fix #123: Update error handling in authentication module\n\nThis commit enhances error detection and adds comprehensive logging to address frequent issues reported by users.\n</code></pre> <p>For more detailed information on the 50/72 Rule: follow this link </p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/#6-push-changes","title":"6. Push Changes","text":"<p>Push your changes to the repository:</p> <pre><code>git push origin feature/123_add-logging-enhancements\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/#7-open-a-pull-request","title":"7. Open a Pull Request","text":"<p>Create a pull request from your branch to the <code>develop</code> branch. It will be automatically assigned for review based on the <code>CODEOWNERS</code> file.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/#8-testing-and-validation","title":"8. Testing and Validation","text":"<p>As part of the input and review requirements for the pull request, the engineer is responsible for:</p> <p>a. Execute Testing Suites: Run all applicable test suites provided by the interface. If necessary, upgrade test suites and documentation to support new use cases (following the standard process for upgrades).</p> <p>Note: Interface upgrades are outside the scope of this task and require a separate architecture change request. Any module changes are dependent on the successful release of updated test suites.</p> <p>b. Document &amp; Attach Results: Include comprehensive test results in the pull request, detailing any errors, warnings, or unexpected behaviour encountered during testing.</p> <p>c. Submit for Review (Upon Success): Once all tests pass, submit the code for review via a pull request.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/#9-codeowner-review-and-approval","title":"9. CODEOWNER Review and Approval","text":"<p>The pull request must be reviewed and explicitly approved by the designated <code>CODEOWNERS</code>. This review should include:</p> <ul> <li>Verification of test results.</li> <li>Assessment of code quality and adherence to standards.</li> <li>Discussion and resolution of any concerns or questions.</li> </ul> <p>Only after <code>CODEOWNERS</code> approval can the pull request proceed to the merge stage.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/#10-merge-the-pull-request","title":"10. Merge the Pull Request","text":"<p>Once the code has been tested and approved by reviewers, the engineer is free to merge the branch using Git Flow:</p> <pre><code>git flow feature finish gh123_add-logging-enhancements\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/#11-code-ownership-and-releases","title":"11. Code Ownership and Releases","text":"<p><code>CODEOWNERS</code> are responsible for reviewing and approving changes. They also manage the release and tagging of components according to the project\u2019s schedule.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Git%E2%80%90Flow%3A-Developers-Branching-Model/#requirements-for-contributions","title":"Requirements for Contributions","text":"<p>Please ensure your contributions meet the following:</p> <ul> <li>Adherence to Git Flow</li> <li>Clear and Concise Commit Messages</li> <li>Peer Review Approval</li> <li>Open Discussions and Contributions</li> <li>Thorough Testing and Validation (including test results)</li> </ul> <p>By following these guidelines, you help maintain the quality and integrity of the project while fostering an inclusive and collaborative community environment. We look forward to your contributions, and thank you for being part of our community-driven project.</p> <p>Refer also to FAQ: Release Engineers: Performing a release with git-flow</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Migrating-Binaries-to-%60Git-LFS%60/","title":"FAQ: Migrating Binaries to `Git LFS`","text":"<p>Here's an overview of migrating binaries to Git LFS (Large File Storage) from the current tip of your branch, along with considerations and best practices:</p> <p>Understanding Git LFS</p> <p>Git LFS is a Git extension designed to handle large files more efficiently. Instead of storing the entire file contents directly in your Git repository (which can bloat it over time), LFS replaces large files with small text pointers. The actual file content is stored in a separate LFS store, typically on a remote server.</p> <p>Why Migrate to LFS?</p> <ul> <li>Smaller Repository Size:  LFS drastically reduces the size of your repository, making cloning, fetching, and pushing much faster.</li> <li>Improved Performance: Since Git only needs to manage lightweight pointers, common operations are more efficient.</li> <li>Storage Optimization: LFS servers often have storage optimizations specifically for large files.</li> </ul> <p>Migration Steps</p> <ol> <li> <p>Install Git LFS:  Ensure Git LFS is installed and set up on your system.</p> </li> <li> <p>Track File Types: Tell Git LFS which file types to track. Create or update your <code>.gitattributes</code> file in the root of your repository:</p> </li> </ol> <p><pre><code>*.jpg filter=lfs diff=lfs merge=lfs -text\n*.png filter=lfs diff=lfs merge=lfs -text\n*.zip filter=lfs diff=lfs merge=lfs -text\n</code></pre>    (Replace the examples with your specific binary file types)</p> <ol> <li>Migrate Existing Files: </li> </ol> <pre><code>git lfs migrate import --include=\"*.jpg\" --include=\"*.png\" --include=\"*.zip\"\n</code></pre> <p>(Replace the examples with the file types you want to migrate)</p> <ol> <li>Commit Changes: </li> </ol> <pre><code>git add .gitattributes\ngit commit -m \"Migrate binaries to LFS\"\n</code></pre> <ol> <li>Push to Remote: Push your changes, including the updated <code>.gitattributes</code> file, to your remote repository.</li> </ol> <p>Important Considerations</p> <ul> <li> <p>Existing Clones: Collaborators who have already cloned the repository will need to fetch the LFS pointers and the actual files from the LFS store after you've migrated. They might need to run <code>git lfs fetch</code> and <code>git lfs checkout</code>.</p> </li> <li> <p>Large Repositories: If you have a very large repository, the migration might take some time.  You can use the <code>--verbose</code> flag to see progress:</p> </li> </ul> <pre><code> git lfs migrate import --verbose --include=\"*.jpg\"\n</code></pre> <ul> <li> <p>File Locking: Consider using Git LFS file locking (<code>git lfs locks</code>) if you have large binary files that are often edited concurrently by multiple people. This can prevent merge conflicts.</p> </li> <li> <p>Bandwidth Considerations: Be mindful of the potential network traffic involved in transferring large files to the LFS store.</p> </li> </ul> <p>Example: Migrating a Single File</p> <p>If you only want to migrate a single file from the current tip of your branch, you can use:</p> <pre><code>git lfs track \"your_file.bin\" \ngit add your_file.bin\ngit commit -m \"Add your_file.bin to LFS\"\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-RDK-Docker-Toolchain/","title":"FAQ: RDK Docker Toolchain","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A-RDK-Docker-Toolchain/#launching-the-toolchain-docker-container","title":"Launching the Toolchain Docker Container","text":"<p>This manual guides you through the process of using the RDK Docker Toolchain to build projects targeted for ARM architecture, using Docker.</p> <p>Note: At the time of writing this has yet to be published opensource, but will be soon</p> <p>To start the Docker container and open a bash shell within it, use the following command:</p> <pre><code>sc docker run &lt;docker&gt; /bin/bash\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-RDK-Docker-Toolchain/#expected-dockers","title":"Expected Dockers","text":"<ul> <li>rdk-dunfell</li> <li>rdk-kirkstone</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-RDK-Docker-Toolchain/#setting-up-the-environment","title":"Setting Up the Environment","text":"<p>Once inside the Docker container, follow these steps to set up the environment:</p> <ol> <li>Navigate to the toolchain directory:</li> </ol> <pre><code>cd /opt/toolchains/rdk-glibc-x86_64-arm-toolchain/\n</code></pre> <ol> <li>Source &amp; Activate the environment setup for ARMv7:</li> </ol> <pre><code>. environment-setup-armv7at2hf-neon-oe-linux-gnueabi\n</code></pre> <ol> <li>To verify that the compiler (CC) is set correctly in the environment, execute:</li> </ol> <pre><code>echo $CC\n</code></pre> <p>The output should start with <code>arm-oe-linux-gnueabi-gcc</code> followed by various compiler switches.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-RDK-Docker-Toolchain/#building-the-project","title":"Building the Project","text":"<p>To build your project using the ARM toolchain, follow these steps:</p> <ul> <li>Change to your project directory (replace  with your actual project directory name): <pre><code>cd &lt;project&gt;\n</code></pre> <ul> <li>Start the build process by specifying the target:</li> </ul> <pre><code>make TARGET=arm\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-RDK-Docker-Toolchain/#optional-single-command-execution","title":"Optional Single Command Execution","text":"<p>Alternatively, you can combine all the steps into a single command to set up the environment and build your project directly. Here\u2019s how:</p> <p>e.g.</p> <pre><code>sc docker run rdk-dunfell \"/bin/bash -c '. /opt/toolchains/rdk-glibc-x86_64-arm-toolchain/environment-setup-armv7at2hf-neon-oe-linux-gnueabi; cd &lt;project&gt;; make TARGET=arm'\"\n</code></pre> <p>Make sure to replace  with your actual project directory. This command facilitates running everything in one go inside the Docker container."},{"location":"external_content/ut-core-wiki/FAQ%3A-Release-Engineers%3A-Performing-a-release-with-git-flow/","title":"FAQ: Release Engineers: Performing a release with git flow","text":"<p>Git Flow provides a structured branching model for managing software releases. Here's how you can use it to create a fixed tag release:</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Release-Engineers%3A-Performing-a-release-with-git-flow/#start-a-release-branch","title":"Start a Release Branch","text":"<ul> <li>Use <code>git flow release start &lt;release-name&gt;</code> (e.g., <code>git flow release start 1.2.0</code>)</li> <li>This creates a new branch (e.g., <code>release/1.2.0</code>) from the <code>develop</code> branch.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Release-Engineers%3A-Performing-a-release-with-git-flow/#work-on-the-release","title":"Work on the Release","text":"<ul> <li>This branch is dedicated to finalizing the release, fixing bugs, and preparing release notes.</li> <li>Do not add new features here; those should be targeted to <code>develop</code> for the next release.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Release-Engineers%3A-Performing-a-release-with-git-flow/#finish-the-release","title":"Finish the Release","text":"<ul> <li>When the release is ready, use <code>git flow release finish &lt;release-name&gt;</code>, (note:<code>&lt;release-name</code> is optional)</li> <li>This performs several actions:<ul> <li>Merges <code>release/1.2.0</code> into <code>main</code></li> <li>Tags the <code>main</code> commit with the release name (e.g., <code>1.2.0</code>)</li> <li>Merges <code>release/1.2.0</code> back into <code>develop</code> to keep it up-to-date</li> <li>Deletes the <code>release/1.2.0</code> branch</li> </ul> </li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Release-Engineers%3A-Performing-a-release-with-git-flow/#push-changes","title":"Push Changes","text":"<ul> <li>Assuming your default remote is <code>origin</code>, and you're on <code>main</code> branch</li> <li>Use <code>git push --tags</code> to push the tag and <code>main</code> branch to your remote repository.</li> <li>Use <code>git checkout develop</code> to check out the develop branch</li> <li>Use <code>git push</code> to push the develop branch</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Release-Engineers%3A-Performing-a-release-with-git-flow/#example","title":"Example","text":"<pre><code># Start the release\ngit flow release start 1.2.0 \n\n# Work on the release (fix bugs, update docs, etc.)\n# ...\n\n## Generate a change log see (https://github.com/cookpete/auto-changelog)\nautochange-log -v 1.2.0\ngit add CHANGELOG.md\ngit commit -m \"Bumped CHANGELOG.md for release\"\n\n# Finish the release\ngit flow release finish 1.2.0\n\n# Code should be merged to both develop &amp; main\n# If successful &amp; not merge errors the branch will be `develop`\n# If merge errors, follow instructions and re-run etc.\n\n# Merge has occurred to develop\ngit push  # pushes develop\ngit push --tags # pushes the tags\ngit checkout main # swaps branch to main\ngit push # pushes main\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Release-Engineers%3A-Performing-a-release-with-git-flow/#benefits-of-using-git-flow-release","title":"Benefits of Using Git Flow Release","text":"<ul> <li>Clear Structure: Provides a well-defined workflow for managing releases.</li> <li>Dedicated Branch:  The <code>release</code> branch isolates release-related work from ongoing development.</li> <li>Version Tracking:  Tags make it easy to identify and roll back to specific releases.</li> <li>Automation: Git Flow commands automate the merging and tagging process.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Release-Engineers%3A-Performing-a-release-with-git-flow/#additional-tips","title":"Additional Tips","text":"<ul> <li>Hotfixes: Use <code>git flow hotfix</code> to quickly address critical issues in production releases.</li> <li>Support Branches: Use <code>git flow support</code> to maintain older releases.</li> </ul> <p>By following this approach, you can streamline your release process, ensure consistent versioning, and maintain a clean Git history.</p> <p>Refer also to FAQ: Git-Flow: Developers Branching Model</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Sign-up-for-RDK-Central-%E2%80%90-Tier-1-Registration/","title":"FAQ: Sign up for RDK Central \u2010 Tier 1 Registration","text":"<p>In order to be able to access private repositories, you need to be added to teams in GitHub. For this, we will need to know your GitHub Public-ids and store them in LDAP on RDKCentral.</p> <p>So, please follow the following steps to maintain your access to migrated repos:</p> <ol> <li>If you already have a rdkcentral account, skip to step 4.</li> <li>Create a rdkcentral account. sign up here: https://wiki.rdkcentral.com/signup.action</li> <li>Wait at least 15 minutes for LDAP to be updated</li> <li>If you already have a Public GitHub account, skip to step 6</li> <li>Create a Public GitHub account, Navigate to https://github.com/ and click Sign up (Ensure you have logged out of your GitHub enterprise cloud account when performing these steps). Follow the prompts to create your personal account)</li> <li>Update your rdkcentral user profile to add your GitHub credentials (follow the instructions here: https://wiki.rdkcentral.com/display/CMF/RDK+Central+Github+Profile+Setup+for+Private+Repository+Access )</li> <li>Accept the rdkcentral GitHub team invite, sent to the email associated with your GitHub personal account.</li> </ol>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Software-Post-Release-Development-Cycle/","title":"FAQ: Software Post Release Development Cycle","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A-Software-Post-Release-Development-Cycle/#post-release-development-an-active-phase-of-software-evolution","title":"Post-Release Development: An Active Phase of Software Evolution","text":"<p>Post-Release Development refers to the continuous, active process of improving, adapting, and enhancing software after it has been deployed. It ensures that the software remains functional, secure, and aligned with evolving user needs and technological advancements. Far from being a passive stage, this phase involves ongoing development to maintain the software's value and relevance over time.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Software-Post-Release-Development-Cycle/#types-of-post-release-development","title":"Types of Post-Release Development","text":"<ol> <li>Corrective Enhancements:</li> <li>Focus: Addressing bugs, defects, or errors discovered after deployment.</li> <li> <p>Example: Fixing an issue that causes unexpected behavior or crashes during specific user actions.</p> </li> <li> <p>Adaptive Changes:</p> </li> <li>Focus: Updating software to ensure compatibility with changing environments or technologies.</li> <li> <p>Example: Adjusting the software to work seamlessly with a new operating system or hardware platform.</p> </li> <li> <p>Perfective Improvements:</p> </li> <li>Focus: Enhancing existing features, performance, or usability based on user feedback and analytics.</li> <li> <p>Example: Adding new functionality or streamlining the user interface to improve the experience.</p> </li> <li> <p>Preventive Adjustments:</p> </li> <li>Focus: Proactively addressing potential future issues or improving code structure to enhance maintainability.</li> <li>Example: Refactoring legacy code to align with modern development practices.</li> </ol>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Software-Post-Release-Development-Cycle/#activities-involved-in-post-release-development","title":"Activities Involved in Post-Release Development","text":"<ul> <li>Bug Fixes: Resolving known issues to ensure stability and reliability.</li> <li>Performance Tuning: Optimizing speed, resource usage, and scalability.</li> <li>Feature Enhancements: Adding or upgrading functionality to meet changing user needs.</li> <li>Security Updates: Addressing vulnerabilities to safeguard data and operations.</li> <li>Compatibility Updates: Ensuring the software works with new devices, platforms, or standards.</li> <li>Code Refinement: Regularly reviewing and improving the codebase for clarity and efficiency.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Software-Post-Release-Development-Cycle/#importance-of-post-release-development","title":"Importance of Post-Release Development","text":"<ol> <li>Ongoing Value Delivery: Ensures that the software continues to meet user expectations and business requirements.</li> <li>Adaptability to Change: Keeps the software relevant in the face of evolving technology and user demands.</li> <li>Enhanced User Satisfaction: Addresses user-reported issues and requests to improve the experience.</li> <li>Risk Mitigation: Proactively reduces the likelihood of security breaches or system failures.</li> <li>Longevity: Extends the lifecycle of the software by keeping it functional and up to date.</li> </ol>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Software-Post-Release-Development-Cycle/#challenges-of-post-release-development","title":"Challenges of Post-Release Development","text":"<ul> <li>Managing Technical Debt: Legacy code and shortcuts taken during initial development can complicate updates.</li> <li>Resource Allocation: Balancing efforts between new feature development and maintaining existing software.</li> <li>Compatibility Issues: Adapting software for new environments without disrupting functionality.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Software-Post-Release-Development-Cycle/#best-practices-for-effective-post-release-development","title":"Best Practices for Effective Post-Release Development","text":"<ul> <li>Continuous Feedback Loop: Gather and act on user feedback to prioritize improvements.</li> <li>Automated Testing: Ensure new changes do not introduce regressions or bugs.</li> <li>Comprehensive Documentation: Maintain clear and up-to-date documentation to streamline future updates.</li> <li>Version Control: Track all changes to ensure transparency and accountability.</li> <li>Proactive Planning: Identify and address potential issues before they impact users.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Software-Post-Release-Development-Cycle/#conclusion","title":"Conclusion","text":"<p>Post-Release Development is a dynamic and ongoing phase of the software lifecycle, integral to ensuring that the software remains valuable and effective in the long term. By treating this stage as an active development process, teams can continually deliver improvements, address issues, and adapt to an ever-changing technological landscape. This commitment to evolution not only satisfies users but also protects the investment in the software over time. </p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/","title":"Level Actors","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/#excerpt-from-32-standards-requirements-for-building-testing-suites","title":"Excerpt from 3.2. Standards: Requirements for Building Testing Suites","text":"<ul> <li>L1/L2 testing suites will use the <code>ut-core</code> testing framework.</li> <li>L3/L4 testing suites will incorporate the <code>python-raft</code> infrastructure and the <code>ut-raft</code> framework while continuing to utilize <code>ut-core</code> as required.</li> <li>The testing system must adhere to the guidelines outlined in the Setup/Layout Guide.</li> <li>Developers are expected to familiarize themselves with the <code>ut-raft</code> classes, documented in the ut-raft wiki.</li> <li>Examples of <code>python-raft</code> configuration and setup can be found in the aforementioned resources.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/#levels-of-test","title":"Levels of Test","text":"<p>The levels of testing to be implemented are described in detail here: Standards: Levels of Test for Vendor Layer</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/#testing-frameworks","title":"Testing Frameworks","text":"<ul> <li>L1/L2: <code>ut-core</code> (ut-core repository)</li> <li>L3: Combination of C++ and C, utilizing both <code>ut-core</code> and <code>python-raft</code> (python-raft repository)</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/#actors-involved","title":"Actors Involved","text":"<ul> <li>Automation</li> <li>QA Team</li> <li>Engineering Team</li> <li>DUT (Device Under Test)</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/#engineering-testing","title":"Engineering Testing","text":"<ul> <li>Engineers and third-party developers will use Levels 1 to 3 to validate and test changes to individual components or groups of components.</li> <li>Level 4 testing expands to multi-component testing, ensuring end-to-end validation.</li> <li>Pre-commit testing is covered under Levels 1 - 3, requiring manual review of results but not necessarily automation.</li> </ul> Test Suite Actors Level 1 - 3 Component Tests Engineers L4 System Performance Engineers L4 Ad-hoc Analysis Engineers L4 Smoke Testing Layer Release Engineers, QA Team L4 System Interface Testing Engineers L4 Deep Dive Testing Engineers"},{"location":"external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/#qa-testing","title":"QA Testing","text":"<ul> <li>QA primarily focuses on L4 Smoke Testing to ensure compatibility throughout the layer release cycle.</li> <li>The full stack image includes Vendor, MW, and Application Layers, enabling test binaries to be run using previous versions to identify regressions.</li> </ul>"},{"location":"external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/#system-architecture-overview","title":"System Architecture Overview","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/#testing-system-flow","title":"Testing System Flow","text":"<pre><code>graph LR\n    subgraph Actors\n        subgraph \"Python Raft / UT-Raft\"\n            Python_Raft --&gt; device(DUT)\n        end\n        subgraph \"XTS Tools\"\n            xTS --&gt; Python_Raft\n            xTS &lt;--&gt; allocator[xTS Allocator]\n            allocator --&gt; rackConfig\n            rackConfig --&gt; Python_Raft\n        end\n        subgraph \"Automation\"\n            auto1[Github Actions / Review Approval] --&gt; xTS\n        end\n        subgraph \"QA Team\"\n            QASmoke[L4 Smoke Testing] --&gt; xTS\n        end\n        subgraph \"Engineer - Component / Layer / Vendor\"\n            L4Smoke[L4 Testing] --&gt; Python_Raft\n            EngineerComponentTesting[L3 Component Testing] --&gt; Python_Raft\n            EngineerComponentTesting --&gt; device\n            L4Smoke --&gt; localRackConfig\n            EngineerComponentTesting --&gt; localRackConfig\n            localRackConfig --&gt; Python_Raft\n        end\n    end</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/#host-machine-high-level-tests","title":"Host Machine (High-Level Tests)","text":"<p>L3 Component Stimulus Testing and L4 System Testing are executed from the Host Machine, utilizing the <code>ut-raft</code> framework to extend <code>python-raft</code> capabilities.</p> <pre><code>graph LR\n    subgraph \"Host Machine (High Level Tests)\"\n        deviceConfig --&gt; Python_Test\n        rackConfig --&gt; Python_Test\n        Python_Test[Python Test] --&gt; ut_raft\n        ut_raft --&gt; python_raft\n        python_raft --&gt; console\n        console --&gt; DUT\n        python_raft --&gt; webPageControl --&gt; DUT\n        python_raft --&gt; OutboundClient --&gt; DUT\n    end\n    subgraph \"Rack Slot\"\n        python_raft --&gt; PowerSwitch --&gt; DUT\n        python_raft --&gt; IR --&gt; DUT\n        python_raft --&gt; CECAdaptor --&gt; DUT\n        python_raft --&gt; VideoCapture --&gt; DUT\n        VideoCapture --&gt; HostHDD\n    end</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/#dut-target-architecture","title":"DUT Target Architecture","text":"<p><code>Python Raft</code> connects to the DUT via a console session, ensuring platform-independent testing with automated configurations.</p> <pre><code>graph LR\n    subgraph \"DUT (Target)\"\n        console &lt;--&gt; test_binary(Test Code)\n        platform_profile --&gt; test_binary\n        test_binary --&gt; state_machine\n        state_machine --&gt; code(Code Under Test)\n        test_binary --&gt; ut_core\n        ut_core --&gt; ut_control\n        webSocket --&gt; ut_control\n        ut_control --&gt; state_machine\n    end</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/#summary","title":"Summary","text":"<ul> <li>The testing system is divided into multiple levels, utilizing <code>ut-core</code>, <code>python-raft</code>, and <code>ut-raft</code> for different types of testing.</li> <li>Engineering Teams perform pre-commit testing at Levels 1 - 3, while QA Teams focus on L4 Smoke Testing.</li> <li>Automation integrates with testing through <code>GitHub Actions</code> and other tools.</li> <li>DUT Target Testing ensures platform-independent configuration and verification of vendor-layer compatibility.</li> </ul> <p>This document provides a graphical overview of the testing system, ensuring that all stakeholders have a clear understanding of the testing flow and responsibilities.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/","title":"FAQ: Vagrant: Setting Up and Managing Your Vagrant VM","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#setting-up-and-managing-your-vagrant-vm","title":"Setting Up and Managing Your Vagrant VM","text":"<p>Link to Vagrant </p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#overview","title":"Overview","text":"<p>This guide provides a comprehensive solution for managing a remote Vagrant image with a configuration file held in a Git repository. It includes steps for downloading and provisioning the VM, resetting it to its original state, and automatically detecting changes in provisioning.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#solution","title":"Solution","text":"<ol> <li> <p>Remote Vagrant Image and Configuration:</p> <ul> <li>The Vagrant configuration file (<code>Vagrantfile</code>) and necessary provisioning scripts are stored in a Git repository.</li> <li>When developers clone the repository, they get the <code>Vagrantfile</code> and provisioning scripts.</li> <li>The <code>Vagrantfile</code> includes instructions to download and provision the VM using <code>apt-get</code> and other necessary configurations.</li> </ul> </li> <li> <p>Resetting the VM:</p> <ul> <li>Developers can reset the VM back to its original state by destroying and recreating it using a provided script.</li> </ul> </li> <li> <p>Automatic Provisioning Detection:</p> <ul> <li>When developers pull the latest changes from the Git repository, the setup detects any changes in the provisioning scripts and prompts for a VM rebuild if needed.</li> </ul> </li> </ol>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#git-repository-structure","title":"Git Repository Structure","text":"<pre><code>&lt;repository-root&gt;\n\u251c\u2500\u2500 Vagrantfile\n\u251c\u2500\u2500 provision.sh\n\u251c\u2500\u2500 check_provisioning.sh\n\u251c\u2500\u2500 vm_reset.sh\n\u2514\u2500\u2500 vm_start.sh\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#scripts-and-configuration","title":"Scripts and Configuration","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#vagrantfile","title":"Vagrantfile","text":"<pre><code>Vagrant.configure(\"2\") do |config|\n  config.vm.box = \"ubuntu/bionic64\"\n\n  # Run the provisioning check script before starting the VM\n  config.trigger.before :up do\n    run \"bash check_provisioning.sh\"\n  end\n\n  config.vm.provision \"shell\", path: \"provision.sh\"\n\n  config.vm.synced_folder \".\", \"/vagrant\"\nend\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#provisionsh","title":"provision.sh","text":"<pre><code>#!/bin/bash\n\n# Update package lists\nsudo apt-get update\n\n# Install necessary packages\nsudo apt-get install -y git curl vim\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#check_provisioningsh","title":"check_provisioning.sh","text":"<pre><code>#!/bin/bash\n\n# Path to the stored hash file\nHASH_FILE=\".provision_hash\"\n\n# Generate a new hash for the provisioning script\nNEW_HASH=$(sha256sum provision.sh | awk '{ print $1 }')\n\n# Check if the hash file exists\nif [ -f \"$HASH_FILE\" ]; then\n  OLD_HASH=$(cat \"$HASH_FILE\")\n  if [ \"$NEW_HASH\" != \"$OLD_HASH\" ]; then\n    echo \"Provisioning script has changed. Please run './vm_reset.sh' to rebuild the VM.\"\n  fi\nfi\n\n# Store the new hash\necho \"$NEW_HASH\" &gt; \"$HASH_FILE\"\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#vm_resetsh","title":"vm_reset.sh","text":"<pre><code>#!/bin/bash\n\n# Destroy the current VM\nvagrant destroy -f\n\n# Recreate and provision the VM\nvagrant up\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#vm_startsh","title":"vm_start.sh","text":"<pre><code>#!/bin/bash\n\n# Start the VM\nvagrant up\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#instructions-for-manual","title":"Instructions for Manual","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#setting-up-and-managing-your-vagrant-vm_1","title":"Setting Up and Managing Your Vagrant VM","text":""},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#1-clone-the-repository","title":"1. Clone the Repository","text":"<p>First, clone the repository containing the Vagrant configuration and scripts:</p> <pre><code>git clone &lt;repository-url&gt;\ncd &lt;repository-directory&gt;\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#2-start-the-vm","title":"2. Start the VM","text":"<p>To start the VM, simply run the provided <code>vm_start.sh</code> script:</p> <pre><code>./vm_start.sh\n</code></pre> <p>This script will: - Check for changes in the provisioning script using <code>check_provisioning.sh</code>. - Start the VM and apply the provisioning defined in <code>provision.sh</code>.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#3-reset-the-vm","title":"3. Reset the VM","text":"<p>If you need to reset the VM to its original state, run the <code>vm_reset.sh</code> script:</p> <pre><code>./vm_reset.sh\n</code></pre> <p>This script will: - Destroy the current VM. - Recreate and re-provision the VM from scratch.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#4-pull-the-latest-changes","title":"4. Pull the Latest Changes","text":"<p>To update your local repository with the latest changes from the remote repository, run:</p> <pre><code>git pull\n</code></pre>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#5-check-for-provisioning-changes","title":"5. Check for Provisioning Changes","text":"<p>Before the VM starts, the <code>check_provisioning.sh</code> script will automatically run to detect any changes in the provisioning script. If changes are detected, you will see a message prompting you to reset the VM using <code>./reset.sh</code>.</p>"},{"location":"external_content/ut-core-wiki/FAQ%3A-Vagrant%3A-Setting-Up-and-Managing-Your-Vagrant-VM/#scripts-overview","title":"Scripts Overview","text":"<ul> <li>Vagrantfile: Defines the VM configuration and provisioning.</li> <li>provision.sh: Contains commands to install required packages and configurations.</li> <li>check_provisioning.sh: Checks if the provisioning script has changed and prompts for a VM reset if needed.</li> <li>vm_reset.sh: Destroys and recreates the VM.</li> <li>vm_start.sh: Starts the VM.</li> </ul>"},{"location":"external_content/ut-core-wiki/Home/","title":"UT-Core Framework","text":"<p>ut-core is a modular unit testing framework designed to streamline and simplify the process of developing and executing tests within the RDK Central ecosystem. It provides a collection of tools, utilities, and conventions to help you build robust and reliable tests for your software components.</p>"},{"location":"external_content/ut-core-wiki/Home/#objectives-for-the-framework","title":"Objectives for the framework","text":"<p>Testing suites serve as engineering tools that scrutinise individual components, groups or layers of components during the development and debugging process. Such tests ascertain quality by running multiple rounds on locally revised code before its final commit. </p>"},{"location":"external_content/ut-core-wiki/Home/#primary-objectives","title":"Primary Objectives:","text":"<ul> <li>Pre-commit: Validation of local changes, build and execute the relevant testing suite for the desired component group or layer </li> <li>Debugging: Tests must enable debugging for better variable examination and solitary step execution.</li> <li>Sharing: Enable sharing and execution of tests by third-party vendors, ensuring completion before their delivery.</li> <li>Independence: Permit deployment and execution on vendor boards and prototype hardware.</li> </ul>"},{"location":"external_content/ut-core-wiki/Home/#secondary-objectives","title":"Secondary Objectives","text":"<p>To test the exposed low-level interfaces of components or groups of components - Initial Development: Develop &amp; perform testing of the component during its initial development. - Change Management: Allow engineers to validate code changes on the components. - Validation: To test and validate interface upgrades which will cause upgrades to the testing suites, and documentation.  - Isolated: Isolated components must run in clean environments and with minimised influences on the system. - Leverage: Leverage the low-level tests to build more complex requirements. - Repeatable: Provide a repeatable engineering environment for low-level control via a high-level language</p> <p>High-level Host Framework Compatible: ut-raft can be used to provide prerequisites, interpret logs, perform analysis of data, draw graphs, formulate, conclusions, trends and results these will adapt based on findings and engineering analysis and requirements. </p>"},{"location":"external_content/ut-core-wiki/Home/#key-features","title":"Key Features","text":"<ul> <li>Modular Design: ut-core is built with a modular architecture, allowing you to select and use the components that best suit your specific testing needs.</li> <li>Flexible Test Definition: Define test cases and configurations using human-readable formats like YAML or JSON, making it easy to create and manage your tests.</li> <li>Data-Driven Testing: Drive your tests with <code>yaml/json</code> input data to cover a wide range of scenarios and edge cases.</li> <li>Rich Assertion Library:  Validate your test results using a comprehensive set of built-in assertions, or create your own custom assertions.</li> <li>Test Reporting: Generate detailed test reports to easily identify and diagnose issues.</li> <li>Integration with CI/CD: Seamlessly integrate <code>ut-core</code> into your continuous integration and continuous delivery pipelines for automated testing.</li> <li>Extensibility: Extend <code>ut-core's</code> functionality by developing custom modules or plugins.</li> <li>Variants: Supports both C and C++ (as a direct swap for GTEST)</li> <li>Black Box Testing: Primary designed as a black box testing framework Black-Box vs White-Box</li> <li>Automatic Framework Generation: Engineers can Leverage the autogenerate.sh script to streamline framework generation, enabling rapid test setup and reducing manual configuration efforts.</li> </ul>"},{"location":"external_content/ut-core-wiki/Home/#documentation","title":"Documentation","text":"<p>Here are some of the key modules within ut-core that you can explore in more detail:</p> <ul> <li>Build System Integration: Useful to understand the overall concepts</li> <li>Core: Concept Overview: Core and Engineering Suites Integration</li> <li>Core: How to Build and Run a HAL Testing Suite </li> <li>Standards: Useful reading on coding standards used</li> <li>Standards &amp; Development Process Flow</li> <li>ut_kvp_profile: A flexible profile extension to check kvp values</li> <li>[ut_kvp_profile: Key\u2010Value Pair Profile for Unit Testing]</li> <li>FAQ: Frequently Asked Questions</li> <li>Question and Answers</li> </ul> <p>The ut-core unit testing framework incorporates features from the <code>ut-control</code> module. You can find detailed information about <code>ut-control</code> on its wiki page: ut-control</p>"},{"location":"external_content/ut-core-wiki/Home/#ut-control","title":"ut-control","text":"<p>Control features have moved to a separate repo ut-control</p> <ul> <li>ut_kvp  - [ut_kvp: A Flexible Key-Value Pair Framework]</li> <li>ut_control_plane - ut_control_plane: Overview (ut_control_plane.h)</li> <li>ut_log.h - ut-log: Overview: UT-Log</li> </ul>"},{"location":"external_content/ut-core-wiki/Home/#getting-started","title":"Getting Started","text":"<ol> <li>Installation: Follow the installation instructions in the ut-core repository to set up the framework in your development environment.</li> <li>Explore the Modules: Familiarize yourself with the different modules available in ut-core, each catering to specific testing needs.</li> <li>Define Your Tests:  Use YAML or JSON to create test case definitions, input data, and expected results.</li> <li>Execute Your Tests: Run your tests using the ut-core test runner.</li> <li>Analyse Results:  Review test reports to identify any failures or issues.</li> </ol>"},{"location":"external_content/ut-core-wiki/Home/#running-tests","title":"Running Tests","text":"<p>To execute your tests using the <code>ut-core</code> framework, the main argument features will be linked into your test. This executable provides various command-line switches to customize how your tests are run:</p>"},{"location":"external_content/ut-core-wiki/Home/#example-of-the-unit-test","title":"Example of the unit test","text":"<p>The unit tests are also a combined binary with ut-core, therefore it also has the switches.</p> <pre><code>./tests/bin/ut-test -h\nHelp\n-a - Automated Mode\n-b - Basic Mode\n-f - &lt;filename&gt; - set the output filename for automated mode\n-t - List all tests run to a file\n-l - Set the log Path\n-p - &lt;profile_filename&gt; - specify the profile to load YAML or JSON, also used by kvp_profile\n-h - Help\n</code></pre>"},{"location":"external_content/ut-core-wiki/Home/#using-the-p-profile_filename-switch","title":"Using the <code>-p profile_filename</code> switch","text":"<ul> <li> <p>hdmiProfile.yml <pre><code>hdmicec:\n  config:\n    extendedEnumsSupported: false\n</code></pre></p> </li> <li> <p>Passing a profile into the testing suite <pre><code>./hdmi_cec -p hdmiProfile.yml\n</code></pre></p> </li> </ul> <p>then in the testing code you would perform</p> <pre><code>bool extendedEnumsSupported = UT_KVP_PROFILE_GET_BOOL( \"hdmicec/config/extendedEnumsSupported\" ); \nif ( extendedEnumsSupported == false )\n{\n   /* Complete suite is disabled due to supportExtendedEnums == false */\n    pSuite = UT_add_suite(\"test extended functions \", NULL, NULL );\n\n    UT_add_test(pSuite, \"test extended bool\", test_bool);\n    UT_add_test(pSuite, \"test extended string\", test_string);\n    UT_add_test(pSuite, \"test extended uint32\", test_uint32);\n}\n</code></pre> <p>Refer to the documentation for more information ut_kvp_profile: Key Value Pair Assertions for Unit Testing</p>"},{"location":"external_content/ut-core-wiki/Home/#contributing","title":"Contributing","text":"<p>We welcome contributions to ut-core! If you have ideas for new features, bug fixes, or improvements to the documentation, please open an issue or submit a pull request on our GitHub repository.</p> <p>Let us know if you have any questions or feedback!</p>"},{"location":"external_content/ut-core-wiki/T1%3A-Training%3A-CODEOWNERS%3A-Ensuring-Code-Quality-and-Governance/","title":"CODEOWNERS Training: Ensuring Code Quality and Governance","text":""},{"location":"external_content/ut-core-wiki/T1%3A-Training%3A-CODEOWNERS%3A-Ensuring-Code-Quality-and-Governance/#1-introduction","title":"1. Introduction","text":"<ul> <li>Objective of the Training</li> <li>Equip CODEOWNERS with a clear understanding of their responsibilities in maintaining code quality.</li> <li>Enable CODEOWNERS to effectively enforce coding standards during pull request (PR) reviews.</li> <li> <p>Provide a practical checklist to guide reviews and ensure compliance with standards.</p> </li> <li> <p>Why Standards Matter</p> </li> <li>Consistency across codebases improves maintainability and scalability.</li> <li>Standards promote readability and ease onboarding for new contributors.</li> <li>Clear processes streamline governance and ensure smooth project progress.</li> </ul>"},{"location":"external_content/ut-core-wiki/T1%3A-Training%3A-CODEOWNERS%3A-Ensuring-Code-Quality-and-Governance/#2-standards-overview","title":"2. Standards Overview","text":"<ol> <li>Coding Standards: Principles from Code Complete</li> <li>Prioritize simplicity, clarity, and maintainability in code.</li> <li>Enforce meaningful naming conventions, modular design, and reusable code.</li> <li>Promote thorough testing and debugging.</li> </ol> <p>\ud83d\udd17 Read More</p> <ol> <li>Issue Description Guidelines</li> <li>Ensure issues are clearly described with:<ul> <li>Summary of the problem.</li> <li>Steps to reproduce and expected outcomes.</li> <li>Labels, assignees, and related milestones.</li> </ul> </li> </ol> <p>\ud83d\udd17 Read More</p> <ol> <li>Milestone Description Guidelines</li> <li>Define SMART (Specific, Measurable, Achievable, Relevant, Time-bound) milestones.</li> <li>Outline scope and objectives clearly to align with project goals.</li> </ol> <p>\ud83d\udd17 Read More</p> <ol> <li>Commit Messages: The 50-72 Rule</li> <li>Use concise, clear subject lines (50 characters).</li> <li>Wrap the body at 72 characters per line.</li> <li>Separate subject and body with a blank line.</li> <li>Use the imperative mood (e.g., \"Fix bug\" instead of \"Fixed bug\").</li> </ol> <p>\ud83d\udd17 Read More</p> <ol> <li>Semantic Versioning and Testing Suite Alignment</li> <li>Follow the <code>MAJOR.MINOR.PATCH</code> format:<ul> <li>MAJOR: Incompatible API changes.</li> <li>MINOR: Backward-compatible feature additions.</li> <li>PATCH: Backward-compatible bug fixes.</li> </ul> </li> <li>Ensure alignment between version updates and test suites.</li> </ol> <p>\ud83d\udd17 [Read More</p>"},{"location":"external_content/ut-core-wiki/T1%3A-Training%3A-CODEOWNERS%3A-Ensuring-Code-Quality-and-Governance/#3-codeowners-responsibilities","title":"3. CODEOWNERS Responsibilities","text":"<ul> <li>Primary Role</li> <li>Review PRs for compliance with standards and governance processes.</li> <li> <p>Act as gatekeepers for ensuring code quality and project integrity.</p> </li> <li> <p>Key Actions During PR Reviews</p> </li> <li>Validate adherence to coding standards and principles.</li> <li>Confirm issues, milestones, and commit messages meet guidelines.</li> <li>Ensure versioning aligns with the changes made and associated tests are updated.</li> <li>Provide clear and actionable feedback to contributors.</li> </ul>"},{"location":"external_content/ut-core-wiki/T1%3A-Training%3A-CODEOWNERS%3A-Ensuring-Code-Quality-and-Governance/#4-pr-review-checklist","title":"4. PR Review Checklist","text":"<p>Use this checklist to enforce standards and ensure consistency during PR reviews:</p> <ol> <li>Code Quality</li> <li>Is the code simple, clear, and maintainable?</li> <li>Are naming conventions consistent and meaningful?</li> <li> <p>Is the code modular and reusable?</p> </li> <li> <p>Issue Descriptions</p> </li> <li>Are issues well-defined and labelled appropriately?</li> <li> <p>Do they include steps to reproduce and expected vs. actual outcomes?</p> </li> <li> <p>Milestones</p> </li> <li>Are milestones SMART and aligned with project goals?</li> <li> <p>Is the scope clearly outlined?</p> </li> <li> <p>Commit Messages</p> </li> <li>Do commit messages follow the 50-72 rule?</li> <li> <p>Are they written in the imperative mood and appropriately formatted?</p> </li> <li> <p>Semantic Versioning</p> </li> <li>Is the version number updated correctly (MAJOR, MINOR, PATCH)?</li> <li> <p>Are test suites updated to reflect new changes?</p> </li> <li> <p>Documentation</p> </li> <li>Is new functionality or significant change documented?</li> <li> <p>Are README files or wikis updated as necessary?</p> </li> <li> <p>Testing</p> </li> <li>Are new features covered with adequate tests?</li> <li> <p>Do all tests pass, including regression tests?</p> </li> <li> <p>Feedback</p> </li> <li>Is feedback constructive, actionable, and specific?</li> <li>Are necessary changes clearly communicated?</li> </ol>"},{"location":"external_content/ut-core-wiki/T1%3A-Training%3A-CODEOWNERS%3A-Ensuring-Code-Quality-and-Governance/#5-governance-in-pull-request-reviews","title":"5. Governance in Pull Request Reviews","text":"<ul> <li>Goals</li> <li>Maintain a collaborative and respectful review process.</li> <li>Encourage knowledge sharing and improvement across the team.</li> <li> <p>Build trust by ensuring high-quality and consistent contributions.</p> </li> <li> <p>Best Practices</p> </li> <li>Use comments to guide contributors on improving their code.</li> <li>Align reviews with project goals and technical roadmaps.</li> <li>Ensure that governance decisions are documented for future reference.</li> </ul>"},{"location":"external_content/ut-core-wiki/T1%3A-Training%3A-CODEOWNERS%3A-Ensuring-Code-Quality-and-Governance/#6-closing","title":"6. Closing","text":"<ul> <li>Key Takeaways</li> <li>CODEOWNERS play a critical role in maintaining code quality and enforcing standards.</li> <li>The checklist ensures a structured and thorough review process.</li> <li> <p>Consistent application of standards improves project quality and team collaboration.</p> </li> <li> <p>Resources for Continuous Learning</p> </li> <li>RDK Central Coding Standards</li> <li>Code Complete (Summary)</li> </ul>"},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/","title":"UT Core Building using Docker or Vagrant","text":""},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#problem","title":"Problem","text":"<p>It has been reported that the ut-core building process encounters a zstd dependency issue when configuring cURL. While this issue is commonly observed on Linux PCs, users can easily bypass it by using Docker or Vagrant to build ut-core in a controlled environment.</p> <p>This page provides detailed installation instructions for Docker and Vagrant, along with a basic script to install essential packages required for ut-core.</p>"},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#install-procedure-for-docker","title":"Install procedure for docker","text":""},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#install-docker","title":"Install Docker","text":"<p><code>sudo apt update &amp;&amp; sudo apt upgrade -y</code> <code>sudo apt install -y ca-certificates curl gnupg</code> <code>sudo install -m 0755 -d /etc/apt/keyrings</code> <code>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg</code> <code>sudo chmod a+r /etc/apt/keyrings/docker.gpg</code> <code>echo \\</code> <code>\"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\</code> <code>$(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</code></p> <p><code>sudo apt update</code> <code>sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</code></p> <p><code>docker --version</code></p>"},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#pull-the-ubuntu-2204-docker-image","title":"Pull the Ubuntu 22.04 Docker Image","text":"<p><code>sudo docker pull ubuntu:22.04</code> <code>sudo docker images</code></p>"},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#steps-to-access-files-from-docker-to-your-pc-and-vice-versa","title":"Steps to access Files from Docker to Your PC and vice versa","text":"<p><code>mkdir -p /host/data</code> <code>cp install.sh to /host/data/.</code> <code>chmod +x /host/data/install.sh</code></p>"},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#run-docker","title":"Run Docker","text":"<p><code>sudo docker run -it -v /host/data:/container/data ubuntu:22.04</code></p> <p>once inside docker: <code>cd  /container/data</code></p> <p>run install script: <code>./install.sh</code></p> <p>generate ssh keys and add the public key to rdkcentral</p> <p><code>git clone &lt;repo url&gt;</code></p>"},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#copy-the-binary-and-libraries-generated-to-containerdata-and-the-same-will-be-available","title":"copy the binary and libraries generated to /container/data and the same will be available","text":"<p>to you in /host/data of your PC.</p> <p>Note: Every time you will need to do this install and other procedure on docker unlike  vagrant, as vagrant is virtual box and docker isn't, its just a container to do your work and exit</p>"},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#install-procedure-for-vagrant","title":"Install procedure for vagrant","text":""},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#install-virtualbox-for-vagrant","title":"Install Virtualbox for vagrant","text":"<p><code>sudo apt update &amp;&amp; sudo apt upgrade -y</code> <code>sudo apt install virtualbox -y</code> <code>VBoxManage --version</code></p>"},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#install-vagrant","title":"Install vagrant","text":"<p><code>wget -O - https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg</code> <code>echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.list</code> <code>sudo apt update &amp;&amp; sudo apt install vagrant</code> <code>vagrant --help</code> <code>vagrant --version</code></p>"},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#create-vagrant-environment","title":"create vagrant environment","text":"<p><code>mkdir vagrant-ubuntu2204</code> <code>cd vagrant-ubuntu2204</code> <code>vagrant init generic/ubuntu2204</code> <code>mv Vagrantfile Vagrantfile_orig</code></p> <p><code>cat Vagrantfile</code> <code>Vagrant.configure(\"2\") do |config|</code> <code>config.vm.box = \"generic/ubuntu2204\"</code> <code>config.vm.network \"private_network\", type: \"dhcp\"</code> <code>config.vm.provider \"virtualbox\" do |vb|</code> <code>vb.memory = \"1024\" # Reduce memory</code> <code>vb.cpus = 1        # Use fewer CPUs</code> <code>end</code> <code>end</code></p>"},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#start-using-vagrant","title":"start using vagrant","text":"<p><code>vagrant up; vagrant ssh</code></p> <p>=&gt; You should see the prompt like this: Last login: Wed Jan 22 14:22:43 2025 from 10.0.2.2 vagrant@ubuntu2204:~$</p>"},{"location":"external_content/ut-core-wiki/UT-Core-Building-using-Docker-or-Vagrant/#script-for-installing-basic-packages-for-ut-core","title":"Script for installing basic packages for ut-core","text":"<p><code>cat install.sh</code></p> <p><code>#!/bin/bash</code></p> <p><code># Update package list</code> <code>echo \"Updating package list...\"</code> <code>apt-get update -y</code></p> <p><code># Install required packages</code> <code>echo \"Installing required packages...\"</code> <code>apt-get install -y \\</code> <code>file \\</code> <code>git \\</code> <code>gcc \\</code> <code>g++ \\</code> <code>zip \\</code> <code>bzip2 \\</code> <code>tar \\</code> <code>libssl-dev \\</code> <code>cmake \\</code> <code>make \\</code> <code>wget</code></p> <p><code># Verify installation of packages</code> <code>echo \"Verifying installed packages...\"</code> <code>file --version</code> <code>git --version</code> <code>gcc --version</code> <code>g++ --version</code> <code>zip --version</code> <code>bzip2 --version</code> <code>tar --version</code> <code>cmake --version</code> <code>make --version</code> <code>wget --version</code></p> <p><code>echo \"All packages installed successfully!\"</code></p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-Concept-Overview%3A-UT%E2%80%90Core-and-Engineering-Suites-Integration/","title":"UT\u2010Core: Concept Overview: UT\u2010Core and Engineering Suites Integration","text":""},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-Concept-Overview%3A-UT%E2%80%90Core-and-Engineering-Suites-Integration/#versioning-and-synchronization","title":"Versioning and Synchronization","text":"<p>UT-Core and UT-Control components are versioned using static releases and tags. This consistent versioning allows releases to be synchronized with UT-Core and UT-Control builds, ensuring compatibility across various environments. Version alignment can be managed either by directly integrating it into the component build system or through recipe files that maintain compatibility during builds</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-Concept-Overview%3A-UT%E2%80%90Core-and-Engineering-Suites-Integration/#purpose-of-ut-core-dynamic-cloning-and-building","title":"Purpose of UT-Core Dynamic Cloning and Building","text":"<p>UT-Core dynamically clones and builds its dependencies based on the latest specifications. This process supports ongoing improvements, such as feature additions, while providing flexibility to meet the specific needs of each release. This approach allows UT-Core to remain responsive to evolving requirements without manual updates or dependency conflicts.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-Concept-Overview%3A-UT%E2%80%90Core-and-Engineering-Suites-Integration/#engineering-suites-and-build-systems","title":"Engineering Suites and Build Systems","text":"<p>The engineering suites are designed to operate independently of framework build systems (e.g. Yocto, Buildroot). By keeping engineering suites separate, pre-commit testing can occur independently, enabling engineers to verify code locally in a controlled environment before it reaches a repository. This approach also allows vendors to test their components on development boards of their choosing, without dependence on specific hardware or build framework.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-Concept-Overview%3A-UT%E2%80%90Core-and-Engineering-Suites-Integration/#testing-workflow-and-pre-commit-verification","title":"Testing Workflow and Pre-commit Verification","text":"<p>The intended testing workflow is pre-commit, meaning that all code undergoes thorough local testing before it is committed. This workflow ensures:    - Engineers verify and debug their code locally with full control over testing environments.    - Vendors have the flexibility to test their HAL components on any compatible development board, independent of platform requirements.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-Concept-Overview%3A-UT%E2%80%90Core-and-Engineering-Suites-Integration/#multi-platform-compatibility-and-version-management","title":"Multi-platform Compatibility and Version Management","text":"<p>Managing different versions of vendor code across platforms can introduce complexity. To address this, each component, including testing suites, is designed with an independent release cadence, allowing updates without dependencies affecting other components. This independence allows for flexibility across environments and simplifies multi-platform compatibility.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-Concept-Overview%3A-UT%E2%80%90Core-and-Engineering-Suites-Integration/#future-distribution-as-installable-binaries","title":"Future Distribution as Installable Binaries","text":"<p>Looking forward, the engineering suites are expected to be delivered as binaries, enabling installation via package managers such as <code>opkg</code>. This approach will allow teams to easily install specific versions of testing suites to match the version of each component, reducing manual dependency management and ensuring compatibility. </p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-Concept-Overview%3A-UT%E2%80%90Core-and-Engineering-Suites-Integration/#component-version-control-and-build-automation","title":"Component Version Control and Build Automation","text":"<p>Component versions are managed through automated builds. Engineers can clone the required header files and trigger the build with a simple command:</p> <pre><code> ./build_ut.sh TARGET=arm\n</code></pre> <p>This process automatically pulls the correct versions of dependencies and components, creating a consistent and compatible build environment without requiring manual version tracking.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/","title":"How to Build and Run a HAL Testing Suite","text":"<p>This guide shows you how to build and run a testing suite, using the <code>ut-core</code> framework.</p> <p>Think of <code>ut-core</code> as a set of tools for generating a framework for building your tests. This guide focuses on how to use those tools, but the underlying principles how to structure your tests, is defined by your own requirements.</p> <p>Essentially, we're using <code>ut-core</code> to demonstrate a general approach to testing. You can adapt this approach to your own needs and preferences, even if you're using a different testing framework. In this case we've created template scripts that use <code>ut-core</code> in a HAL interface testing scenario.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#1-navigate-to-the-header-file","title":"1. Navigate to the Header File","text":"<p>First, navigate to the directory containing the header file you want to test.</p> <p>For example:</p> <p>If you want to run the testing suite against the <code>rdk-halif-hdmi_cec</code> repository, you would first clone the repository and then navigate into the newly created directory:</p> <pre><code>git clone git@github.com:rdkcentral/rdk-halif-hdmi_cec.git\ncd rdk-halif-hdmi_cec \n</code></pre>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#2-build-the-testing-suite","title":"2. Build the Testing Suite","text":"<p>From this directory, execute the following command in your terminal:</p> <pre><code>build_ut.sh TARGET=arm\n</code></pre> <p>This script will create a new directory named <code>ut</code> where your testing suite will be created. </p> <p>Note: Running <code>build_ut.sh</code> without specifying a target will build a Linux version of the testing suite, which can be useful for debugging the structure of your tests.</p> <p>All binaries to be transferred to the platform will be created under <code>ut/bin</code></p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#3-build-environment-requirements","title":"3.  Build Environment Requirements","text":"<p>Building the testing suite requires a tool-chain. This can be a vendor-independent tool-chain, an SDK, or any other tool-chain as required.</p> <p>Requirements for building </p> <p>The <code>unitTest(ut)</code> for a module is triggered from scripts, which inturn that clone the <code>ut-core</code> framework (at a fixed version) and builds the defined tests. This allows for independent upgrades to the <code>ut-core</code> framework if desired.</p> <p>Script templates are provided in the <code>template</code> directory to illustrate the necessary files for each layer, starting from the HAL. See template/README.md</p> <p>The testing relationship is as follows:</p> <pre><code>erDiagram\n\u00a0 \u00a0 \u00a0 \u00a0 HAL }|..|{ hal_ut: triggers\n\u00a0 \u00a0 \u00a0 \u00a0 hal_ut }|--o{ ut_core: uses</code></pre>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#4-core-ut-framework","title":"4. Core UT Framework","text":"<p>The unit testing core subsystem can be cloned from:</p> <pre><code>git clone git@github.com:rdkcentral/ut-core\n</code></pre> <p>Recommended Reading:</p> <ul> <li>https://github.com/rdkcentral/ut-core/blob/master/README.md</li> <li>https://github.com/rdkcentral/ut-core/blob/master/docs/pages/hal_unit_testing_requirements.md</li> </ul> <p>Note: C++ Support is available after Version 4.0.0</p> <p>The <code>ut-core</code> directory structure is as follows:</p> <pre><code>.\n\u251c\u2500\u2500 docs\n\u2502   \u2514\u2500\u2500 pages\n\u2502       \u2514\u2500\u2500 images\n\u251c\u2500\u2500 framework\n\u2502   \u2514\u2500\u2500 cunit\n\u2502       \u251c\u2500\u2500 arm-rdk-linux-gnueabi -&gt; Arm prebuild version of cunit.so\n\u2502       \u2514\u2500\u2500 i686-pc-linux-gnu -&gt; -&gt; Linux prebuild version of cunit.so\n\u2502   \u2514\u2500\u2500 xxx -&gt; Other framework as required\n\u251c\u2500\u2500 include -&gt; ut-core header files\n\u251c\u2500\u2500 src     -&gt; ut-core source files\n\u251c\u2500\u2500 template\n\u2502   \u251c\u2500\u2500 hal_template -&gt; example files for the top level hal directories\n\u2502   \u2514\u2500\u2500 ut_template -&gt; example files for the ut directories\n\u2514\u2500\u2500 tools\n    \u251c\u2500\u2500 libs -&gt; (Vendor .so)\n    \u2514\u2500\u2500 Makefile\n</code></pre>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#5-vendor-or-developer-requirements","title":"5.  Vendor or Developer Requirements","text":"<p>Vendors or developers must provide one of the following:</p> <ol> <li>Prebuilt libraries included in the SDK.</li> <li>Prebuilt libraries in the <code>libs</code> directory to link against.</li> <li>Link the <code>libs</code> directory to libraries being worked on in the RDK tree.</li> </ol> <p>The <code>libs</code> directory can be linked to prebuilt libraries generated by the vendor or the RDK build system. Symbolic links can be used to set up these directories.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#7-toolchain","title":"7. Toolchain","text":"<p>The toolchain is provided by the vendor or through an SDK built with the Yocto build system. It's recommended to install the toolchain in the <code>./tools/2.0</code> directory.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#71-how-to-use-the-sdk-toolchain","title":"7.1. How to Use the SDK Toolchain","text":"<pre><code>./rdk-glibc-x86_64-arm-toolchain-2.0.sh\n</code></pre> <p>This script installs the toolchain and <code>sysroots</code> (typically in <code>/opt/rdk/2.0</code>, but it's recommended to change this to <code>${PWD}../2.0</code>).</p> <p>To use the cross-development toolchain, source the environment setup script:</p> <pre><code>chmod +x /opt/rdk/2.0/environment-setup-cortexa9t2-vfp-rdk-linux-gnueabi\nsource /opt/rdk/2.0/environment-setup-cortexa9t2-vfp-rdk-linux-gnueabi\necho $CC\n</code></pre>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#72-docker-based-toolchain","title":"7.2. Docker Based Toolchain","text":"<p>The tool-chain and common environment can be launched by the following <code>sc</code> commands see :- FAQ:-RDK-Docker-Toolchain</p> <pre><code>sc docker rdk-dunfell /bin/bash\n. /opt/toolchains/rdk-glibc-x86_64-arm-toolchain/environment-setup-armv7at2hf-neon-oe-linux-gnueabi\n</code></pre> <pre><code>sc docker list\n</code></pre> <p>will list out the environments available (from outside the docker).</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#8-testing-environment-and-making-the-code","title":"8. Testing Environment and Making the Code","text":"<p>There are two platform targets:</p> <ul> <li><code>linux</code> (default): Builds all tests, the test application, and stubs.</li> <li><code>arm</code> (<code>TARGET=arm</code>): Builds all tests and the test application for the target.</li> </ul>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#9-build-the-linux-environment-with-c-language","title":"9. Build the <code>linux</code> environment with C language","text":"<pre><code>make\n</code></pre> <p>This builds the <code>src/*.c</code> files, core functions from <code>ut-core/src/c_source</code>, and links against libraries in <code>ut-core/framework</code>. The <code>skeletons/src</code> directory is included for stub compilation.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#10-build-the-target-arm-environment-with-c-language","title":"10. Build the target <code>arm</code> environment with C language","text":"<p>Ensure the toolchain is sourced.</p> <pre><code>make TARGET=arm\n</code></pre> <p>This builds the <code>src/*.c</code> files, core functions from <code>ut-core/src/c_source</code>, links against libraries in <code>ut-core/framework</code>, and links against libraries in the <code>libs</code> directory or the SDK <code>sysroot</code>. The final binary (<code>hal_test</code>) is located in the <code>bin</code> directory.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#11-build-the-linux-environment-with-cpp-language","title":"11. Build the <code>linux</code> environment with CPP language","text":"<p><pre><code>make VARIANT=CPP\n</code></pre> This builds the <code>src/*.c</code> files, core functions from <code>ut-core/src/cpp_source</code>, and links against libraries in <code>ut-core/framework</code>. The <code>skeletons/src</code> directory is included for stub compilation.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#12-build-the-target-arm-environment-with-cpp-language","title":"12. Build the target <code>arm</code> environment with CPP language","text":"<p>Ensure the toolchain is sourced.</p> <p><pre><code>make VARIANT=CPP TARGET=arm\n</code></pre> This builds the <code>src/*.c</code> files, core functions from <code>ut-core/src/cpp_source</code>, links against libraries in <code>ut-core/framework</code>, and links against libraries in the <code>libs</code> directory or the SDK <code>sysroot</code>. The final binary (<code>hal_test</code>) is located in the <code>bin</code> directory.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#13-running-on-the-target","title":"13. Running on the Target","text":"<p>Copy the files from the <code>bin</code> directory to the target.</p> <p>On the target, set the <code>LD_LIBRARY_PATH</code> environment variable:</p> <pre><code>export LD_LIBRARY_PATH=/usr/lib:/lib:/home/root:./\n</code></pre> <p>Alternatively, use the <code>run.sh</code> script in the <code>bin</code> directory.</p> <p>Execute the <code>hal_test</code> application:</p> <pre><code>./hal_test -h \n</code></pre>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#14-modes-of-operation","title":"14. Modes of Operation","text":"<p>The following flags will only work in C Mode</p> <ul> <li>Console Mode (<code>-c</code>): Opens an interactive console.</li> <li>Automated Mode (<code>-a</code>): Outputs results in xUnit format as an XML file.</li> <li>Basic Mode (<code>-b</code>): Runs all tests and redirects output to the shell.</li> </ul>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#15-source-tree-ut-unit-test-directory","title":"15. Source Tree <code>UT</code> Unit Test Directory","text":"<p>The tests follow the structure defined in <code>template/ut_template/</code>:</p> <pre><code>\u251c\u2500\u2500 bin\n\u2502   \u2514\u2500\u2500 run.sh\n\u251c\u2500\u2500 build.sh\n\u251c\u2500\u2500 docs\n\u2502   \u251c\u2500\u2500 generate_docs.sh\n\u2502   \u2514\u2500\u2500 pages\n\u2502       \u251c\u2500\u2500 L1_TestSpecification.md\n\u2502       \u251c\u2500\u2500 L2_TestSpecification.md\n\u2502       \u2514\u2500\u2500 README.md -&gt; ../../README.md\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 skeletons\n\u2502   \u2514\u2500\u2500 src\n\u251c\u2500\u2500 src\n\u2502   \u251c\u2500\u2500 main.c\n\u2502   \u251c\u2500\u2500 test_l1_test_example.c\n\u2502   \u2514\u2500\u2500 test_l2_tests_example.c\n\u2514\u2500\u2500 tools\n</code></pre> <p>The <code>main.c</code> file in the <code>src</code> directory is the main launch point for the test application.</p>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#16-choosing-a-major-version-of-the-ut-core","title":"16. Choosing a Major Version of the UT-Core","text":"<p>Since the ut-core interfaces will change over time, and in order to be consistant when creating tests engineers should select the major release they wish to fixed too. (Although it's recommended to periodically upgrade to a later revision )</p> <p>The interface will not change between minor versions, but the most recent bugfix version should be selected.</p> <p>The versioning format for the testing suites is therefore <code>&lt;major.minor.bugfix/patch/documentation&gt;</code></p> <p>In the file <code>ut_template/build.sh</code> you can see the template version of the script.</p> <p>This is selected via <code>UT_CORE_PROJECT_VERSION</code> variable as an input in the default build script for the tests suite e.g. <code>ut/build.sh UT_CORE_PROJECT_VERSION=2.0.0</code> or by changing the fixed version set in your unit testing <code>build.sh</code> trigger script.</p> <p>For best practice and receive bug fixes define <code>UT_PROJECT_MAJOR_VERSION</code> in <code>ut/build.sh</code> to choose the major revision that the testing suite should compile against. <code>ut-core</code> will assure backwards compatibility in major versions. This means that the bugfixes and minor changes you will automatically acquire on the next test run.</p> <pre><code># Change this to upgrade your UT-Core Major versions. Non ABI Changes 1.x.x are supported, between major revisions\nUT_PROJECT_MAJOR_VERSION=\"1.\"\n</code></pre>"},{"location":"external_content/ut-core-wiki/UT%E2%80%90Core%3A-How-to-Build-and-Run-a-HAL-Testing-Suite/#17-example-of-registering-test-functions","title":"17. Example of Registering Test Functions","text":"<p>The main test app will register all the tests and kick off the framework.</p> <pre><code>#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;ut.h&gt;\n\nvoid test_l1_function1(void)\n{\n  UT_FAIL(\"Need to implement\");\n  /* Positive */\n  /* Negative */\n} \n\nvoid test_l1_function2(void)\n{\n  UT_FAIL(\"Need to implement\");\n  /* Positive */\n  /* Negative */\n} \n\nstatic UT_test_suite_t *pSuite = NULL;\n\n/**\n * @brief Register the main tests for this module\n * \n * @return int - 0 on success, otherwise failure\n */\nint test_l1_register( void )\n{\n    /* add a suite to the registry */\n    pSuite = UT_add_suite(\"[L1 test_Example]\", NULL, NULL);\n    if (NULL == pSuite) \n    {\n        return -1;\n    }\n\n    UT_add_test( pSuite, \"blah_level1_test_function\", test_l1_function1);\n    UT_add_test( pSuite, \"blah_level1_test_function\", test_l1_function2);\n\n    return 0;\n}\n</code></pre> <p>Each module has a optional <code>init</code> and <code>clean</code> function, which can be setup via UT_add_suite(), in the above example these are defaulted to <code>NULL</code>, since in this example case they are not used.</p>"},{"location":"external_content/ut-core-wiki/autogenerate.sh%3A-Running-the-Framework-Generation-Script/","title":"autogenerate.sh: Running the Framework Generation Script","text":""},{"location":"external_content/ut-core-wiki/autogenerate.sh%3A-Running-the-Framework-Generation-Script/#instructions-running-the-framework-generation-script","title":"Instructions: Running the Framework Generation Script","text":""},{"location":"external_content/ut-core-wiki/autogenerate.sh%3A-Running-the-Framework-Generation-Script/#overview","title":"Overview","text":"<p>These instructions guide engineering teams on using the <code>autogenerate.sh</code> script to automatically generate Level 1 (L1) and Level 2 (L2) testing suite frameworks.</p>"},{"location":"external_content/ut-core-wiki/autogenerate.sh%3A-Running-the-Framework-Generation-Script/#purpose-of-the-autogen-script","title":"Purpose of the Autogen Script","text":"<p>The primary purpose of the <code>autogenerate.sh</code> script is to streamline the initial setup and integration of unit tests for API definitions, allowing engineers to quickly build a complete and fully integrated testing framework with the <code>ut-core</code> testing structure. The script takes input header files and generates all necessary components to create a Linux-compatible, buildable test suite, including:</p> <ul> <li>Directory Structure: Automatically creates subdirectories and organizes files as required by the <code>ut-core</code> framework for a seamless integration.</li> <li>Stub Generation: Generates all necessary stubs for functions referenced in the headers, allowing immediate compilation and functionality within the test suite.</li> <li>Usable Testing Suite: Provides engineers with a ready-to-use test framework that can be customized and expanded to meet specific testing requirements.</li> </ul> <p>This tool accelerates the creation of a complete testing framework from scratch, enabling engineers to go from 0% to a fully functional, buildable test suite. Engineers can then fill out this framework to test individual functions or groups of functions according to their testing needs.</p>"},{"location":"external_content/ut-core-wiki/autogenerate.sh%3A-Running-the-Framework-Generation-Script/#autogen-command","title":"Autogen Command","text":"<p>To run the autogen script, use:</p> <pre><code>./autogenerate.sh &lt;api-def-repo-url/-c/-clean/-b/-branch/-h/-help&gt;\n</code></pre>"},{"location":"external_content/ut-core-wiki/autogenerate.sh%3A-Running-the-Framework-Generation-Script/#autogen-options-explained","title":"Autogen Options Explained","text":"Argument Optional? Description Examples <code>api-def-repo-url</code> No URL of the API definitions repo to be cloned or the directory path to be copied <code>git@github.com:rdkcentral/hal-deepsleepmanager.git</code> or <code>/home/user/workspace/RdkWanManager</code> <code>-clean</code> or <code>-c</code> Yes Deletes the workspace directory (including cloned repos) <code>-clean</code>, <code>-c</code> <code>-branch</code> or <code>-b</code> Yes Checks out a specific branch in the API definitions repo, applicable only with urls <code>-branch hal-review</code>, <code>-b main</code> <code>-help</code> or <code>-h</code> Yes Shows usage information for the script <code>-help</code>, <code>-h</code> <p>Note: To include debug statements, set the environment variable <code>AGT_DEBUG</code> before running the script:</p> <pre><code>export AGT_DEBUG=1\n</code></pre>"},{"location":"external_content/ut-core-wiki/autogenerate.sh%3A-Running-the-Framework-Generation-Script/#use-cases-supported-by-autogeneratesh","title":"Use Cases Supported by autogenerate.sh","text":"<p>The <code>autogenerate.sh</code> script supports various use cases for generating test frameworks, providing flexibility for repository URLs, user-specified directories, and custom header file locations.</p> <ol> <li> <p>API Definition Repository URL    The API definition URL can be any accessible Git repository URL or directory path. Example commands:    <pre><code>./autogenerate.sh git@github.com:rdkcentral/rdk-halif-device_settings.git\n./autogenerate.sh https://github.com/rdkcentral/RdkWanManager.git\n./autogenerate.sh /home/user/workspace/RdkWanManager\n</code></pre></p> </li> <li> <p>Unit Test Directory    The unit test directory can be either:</p> </li> <li>Cloned from a user-provided URL.</li> <li>Specified as an absolute directory path by the user.  </li> </ol> <p>When prompted, enter the URL or absolute path, or leave blank to skip:    <pre><code># URL input example\nPlease input the URL (or leave blank to skip): https://github.com/comcast-sky/skysr213-platform-hal.git\n\n# Absolute path input example\nPlease input the directory (absolute) path (or leave blank to skip):    /home/user/workspace/RdkWanManager\n</code></pre></p> <ol> <li>Header File Location    The script can generate tests for header files located within the <code>include</code> folder or any other location within the API Definition directory cloned or copied by the script.</li> </ol>"},{"location":"external_content/ut-core-wiki/autogenerate.sh%3A-Running-the-Framework-Generation-Script/#example-commands","title":"Example Commands","text":"<ol> <li>Generate Test Framework    Generates L1 and L2 test frameworks for the <code>deepsleepmanager</code> repo, including template directories and files in the API definition and <code>ut</code> directories, and skeletons if needed:</li> </ol> <pre><code>./autogenerate.sh git@github.com:rdkcentral/hal-deepsleepmanager.git\n</code></pre> <ol> <li>Generate Test Framework on Specific Branch    Generates the L1 and L2 test frameworks for <code>deepsleepmanager</code> on the <code>hal-review</code> branch of the API definition repo:</li> </ol> <pre><code>./autogenerate.sh git@github.com:rdkcentral/hal-deepsleepmanager.git -b hal-review\n</code></pre> <ol> <li>Delete Workspace Directory    Deletes the workspace directory if it exists:</li> </ol> <pre><code>./autogenerate.sh git@github.com:rdkcentral/hal-powermanager.git -c\n</code></pre> <ol> <li>Display Script Usage    Shows the usage information for the autogen script:</li> </ol> <pre><code>./autogenerate.sh -h\n</code></pre>"},{"location":"external_content/ut-core-wiki/autogenerate.sh%3A-Running-the-Framework-Generation-Script/#terminology-index","title":"Terminology Index","text":"Term Definition Relative Location Created Workspace Directory created to clone repos and build the test framework <code>[ut-core-dir]/workspace</code> API Definitions Main repo where header files (e.g., HAL repo) reside <code>[ut-core-dir]/workspace/[API-definitions-dir]</code> UT Directory under API definition in <code>workspace</code> for Unit Tests (e.g., HALTest repo) <code>[ut-core-dir]/workspace/[API-definitions-dir]/ut</code> Skeletons Generated skeleton code for header files in the API Definition <code>[ut-core-dir]/workspace/[API-definitions-dir]/ut/skeletons/src</code> Tests L1 and L2 tests generated for header files in the API Definition <code>[ut-core-dir]/workspace/[API-definitions-dir]/ut/src</code> L1 Tests Functional tests for each function in header files <code>[ut-core-dir]/workspace/[API-definitions-dir]/ut/src/test_L1_*</code> L2 Tests Operational tests for module functionality <code>[ut-core-dir]/workspace/[API-definitions-dir]/ut/src/test_L2_*</code>"},{"location":"external_content/ut-core-wiki/ut_kvp%3A-A-Flexible-Key%E2%80%90Value-Pair-Framework/","title":"ut kvp: A Flexible Key\u2010Value Pair Framework","text":"<p>This page has moved to ut_control ut_kvp:-A-Flexible-KeyValue-Pair-Framework</p>"},{"location":"external_content/ut-core-wiki/ut_kvp_profile%3A-Key%E2%80%90Value-Pair-Assertions-for-Unit-Testing/","title":"ut kvp profile: Key\u2010Value Pair Assertions for Unit Testing","text":"<p>The <code>ut_kvp_profile.h</code> header is an extension of the <code>ut_kvp</code> framework, specifically designed for streamlined assertions within unit tests. It leverages the key-value pair (KVP) structure to simplify the validation of test results against expected outcomes.</p>"},{"location":"external_content/ut-core-wiki/ut_kvp_profile%3A-Key%E2%80%90Value-Pair-Assertions-for-Unit-Testing/#key-features","title":"Key Features","text":"<ul> <li>Simplified Assertions: Provides a concise syntax for common assertions (equality checks, string comparisons, etc.) using KVPs.</li> <li>Test Case Configuration: Enables loading of expected test results from YAML/JSON files for easy management and maintenance.</li> <li>Error Reporting: Integrates with the <code>ut_log</code> module to provide clear and informative error messages upon assertion failures.</li> <li>Integration with ut-core: ut_kvp_profile support is provided by default when using ut-core via the <code>-p</code> switch.</li> </ul>"},{"location":"external_content/ut-core-wiki/ut_kvp_profile%3A-Key%E2%80%90Value-Pair-Assertions-for-Unit-Testing/#example-usage","title":"Example Usage","text":"<ol> <li>Create a Configuration File:</li> </ol> <pre><code>test_case_1:\n  expected_result: true\ntest_case_2:\n  expected_result: 12345\n</code></pre> <ol> <li> <p>Start the test and specify the profile file</p> </li> <li> <p>Passing a profile into the testing suite, will automatically open the profile</p> </li> </ol> <pre><code>./hdmi_cec -p hdmi_one_port_no_extendedEnums.yml\n</code></pre> <ol> <li>Use Assertions:</li> </ol> <p>Macro's are now active and available for use in the test suite.</p> <pre><code>bool result = my_function();\nUT_ASSERT_EQUAL_KVP_PROFILE_BOOL(result, \"test_case_1/expected_result\");\n</code></pre>"},{"location":"external_content/ut-core-wiki/ut_kvp_profile%3A-Key%E2%80%90Value-Pair-Assertions-for-Unit-Testing/#detail-on-how-it-works","title":"Detail on how it works.","text":""},{"location":"external_content/ut-core-wiki/ut_kvp_profile%3A-Key%E2%80%90Value-Pair-Assertions-for-Unit-Testing/#integration-with-ut_log","title":"Integration with ut_log","text":"<p>The <code>ut_kvp_profile</code> module seamlessly integrates with the <code>ut_log</code> module to provide informative logging upon assertion failures. For example, the following code:</p> <pre><code>UT_ASSERT_EQUAL_KVP_PROFILE_BOOL(false, \"test_case_1/expected_result\");\n</code></pre> <p>would result in a log message similar to:</p> <pre><code>Assertion failed: test_case_1/expected_result (expected: true, actual: false)\n</code></pre>"},{"location":"external_content/ut-core-wiki/ut_kvp_profile%3A-Key%E2%80%90Value-Pair-Assertions-for-Unit-Testing/#assertion-macros","title":"Assertion Macros","text":"<p>The header defines several macros for common assertion types:</p> <ul> <li><code>UT_ASSERT_EQUAL_KVP_PROFILE_BOOL(checkValue, key)</code></li> <li><code>UT_ASSERT_EQUAL_KVP_PROFILE_UINT8(checkValue, key)</code></li> <li><code>UT_ASSERT_EQUAL_KVP_PROFILE_UINT16(checkValue, key)</code></li> <li><code>UT_ASSERT_EQUAL_KVP_PROFILE_UINT32(checkValue, key)</code></li> <li><code>UT_ASSERT_EQUAL_KVP_PROFILE_UINT64(checkValue, key)</code></li> <li><code>UT_ASSERT_EQUAL_KVP_PROFILE_STRING(checkValue, key)</code></li> </ul> <p>These macros compare a given <code>checkValue</code> against the value associated with the specified <code>key</code> in the KVP data structure. If the values don't match, an assertion failure is triggered.</p>"},{"location":"external_content/ut-core-wiki/ut_kvp_profile%3A-Key%E2%80%90Value-Pair-Assertions-for-Unit-Testing/#get-field-marcos","title":"Get Field Marcos","text":"<p>The header defines several macros for common get types:</p> <ul> <li><code>UT_KVP_PROFILE_GET_BOOL(key)</code></li> <li><code>UT_KVP_PROFILE_GET_UINT8(key)</code></li> <li><code>UT_KVP_PROFILE_GET_UINT16(key)</code></li> <li><code>UT_KVP_PROFILE_GET_UINT32(key)</code></li> <li><code>UT_KVP_PROFILE_GET_UINT64(key)</code></li> <li><code>UT_KVP_PROFILE_GET_LIST_COUNT(key)</code></li> <li><code>UT_KVP_PROFILE_GET_STRING(key, pszReturnedString )</code></li> </ul> <p>For more detailed information of operation see the header file ut_kvp_profile.h</p> <ul> <li><code>!include</code> is supported in the yaml files see ut_kvp: Support for Includes in YAML files, it is extremely important that shared features are segmented into independent files.</li> <li>Upgrades to the system are coming to allow multiple profile support e.g. <code>-p a.yaml -p b.yaml</code> See: #78 </li> <li>For detailed information on the <code>ut_kvp</code> module see ut_kvp: A Flexible Key-Value-Pair Framework</li> </ul>"},{"location":"external_content/ut-core-wiki/vDevice%3A-Overview/","title":"vDevice: Overview","text":"<p>Moved to https://github.com/rdkcentral/ut-core/wiki/5.0:-Standards:-vDevice-Overview</p>"},{"location":"halif/audio_decoder/current/audio_decoder/","title":"Audio Decoder","text":"<p>This document provides an overview of the Audio Decoder Hardware Abstraction Layer (HAL) service, which facilitates the decoding of compressed audio streams within the device. The HAL defines the interfaces through which the RDK (Reference Design Kit) middleware interacts with the vendor-specific audio decoding implementation.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#references","title":"References","text":"<p>Info</p> Interface Definition audio_decoder/current API Documentation TBD HAL Interface Type AIDL and Binder Initialization - TBC systemd - hal-audio_decoder_manager.service VTS Tests TBC Reference Implementation - vComponent https://github.com/rdkcentral/rdk-halif-aidl/tree/main/audiodecoder/current"},{"location":"halif/audio_decoder/current/audio_decoder/#related-pages","title":"Related Pages","text":"<p>Tip</p> <ul> <li>Audio Sink</li> <li>AV Buffer</li> <li>Session State Management</li> </ul>"},{"location":"halif/audio_decoder/current/audio_decoder/#functionality","title":"Functionality","text":"<p>The Audio Decoder HAL service accepts compressed audio data as input. This data can be provided in secure buffers if the underlying vendor implementation supports secure audio processing. This is crucial for premium content protection.</p> <p>The decoded audio output can be delivered via two distinct paths:</p> <ul> <li> <p>Non-Tunnelled Mode: In this mode, the decoded audio, typically in Pulse Code Modulation (PCM) format, is returned to the RDK media pipeline as a frame buffer along with associated metadata (e.g., sample rate, bit depth, number of channels). This allows for further processing within the RDK middleware, such as volume control, audio effects, or synchronization with other media streams.</p> </li> <li> <p>Tunnelled Mode: In this mode, the decoded audio is passed directly to the audio mixer through the vendor layer. This bypasses the RDK media pipeline for audio processing. Tunnelled mode is often preferred for performance reasons, especially in resource-constrained devices, as it reduces latency and CPU overhead. It's often used when the audio stream is simple, and the RDK post-processing isn't required.</p> </li> </ul>"},{"location":"halif/audio_decoder/current/audio_decoder/#operational-modes","title":"Operational Modes","text":"<p>The choice between tunnelled and non-tunnelled mode is made on a per-codec basis during the initialization of the audio decoder. This flexibility allows the system to optimize performance for different audio formats. It's important to note that the audio decoder can switch between these modes for different codec instances, but a single codec instance must operate in one mode or the other for the duration of its use. The operational mode of the audio decoder is independent of the video decoder's mode. This means that it is perfectly valid to have tunnelled video and non-tunnelled audio, or vice-versa.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#pcm-handling","title":"PCM Handling","text":"<p>Uncompressed PCM audio streams do not require decoding. Therefore, they bypass the Audio Decoder HAL entirely. Instead, they are routed directly to the Audio Sink service for mixing and playback. This is an important distinction to make for clarity.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#implementation-requirements","title":"Implementation Requirements","text":"# Requirement Comments HAL.AUDIODECODER.1 Starting and stopping audio streams shall never produce an audible click or pop artefact due to the audio waveform the audio streaming was started or stopped at. This requirement works in conjunction with the audio mixer. HAL.AUDIODECODER.2 An audio decoder shall indicate its support for secure audio processing through its resource capabilities. HAL.AUDIODECODER.3 An audio decoder advertising the secure audio processing capability that receives a secure buffer of compressed audio shall output decoded audio to secure buffers either returned to the client or tunnelled to the mixer. Secure audio path must be maintained. HAL.AUDIODECODER.4 An audio decoder can tunnel decoded audio to a mixer or the vendor audio sub-system for passthrough and/or return the decoded audio as PCM to the client. HAL.AUDIODECODER.5 When the client enables the audio decoder low latency property and the audio decoder and platform support low latency audio then the audio frame metadata shall indicate low latency. HAL.AUDIODECODER.6 Each audio decoder resource shall be presented by a unique ID. HAL.AUDIODECODER.7 Each audio decoder resource shall provide an API to expose its capabilities for secure audio processing and supported codecs. HAL.AUDIODECODER.8 Only 1 client connection shall be allowed to open and control an audio decoder resource. HAL.AUDIODECODER.9 Multiple client connections shall be allowed to register for events from an audio decoder resource. HAL.AUDIODECODER.10 Audio frame metadata shall be returned to a controlling client on the first audio frame decoded after an open or flush and then against not until the frame metadata changes. Not sent on every decoded audio frame buffer unless changed since previous. HAL.AUDIODECODER.11 The audio frame output buffer from an audio decoder shall match the platform PCM audio format required for mixing. See com.rdk.hal.audiosink.PlatformCapabilities HAL.AUDIODECODER.12 If a client process exits, the Audio Decoder server shall automatically stop and close any Audio Decoder instance controlled by that client."},{"location":"halif/audio_decoder/current/audio_decoder/#interface-definition","title":"Interface Definition","text":"<p>The interface can be found by following this link audiodecoder</p> Interface Description <code>IAudioDecoderManager.aidl</code> Audio Decoder Manager HAL which provides access to <code>IAudioDecoder</code> resource instances. <code>IAudioDecoder.aidl</code> Audio Decoder interface for a single audio decoder resource instance. <code>IAudioDecoderController.aidl</code> Controller interface for an <code>IAudioDecoder</code> resource instance. <code>IAudioDecoderControllerListener.aidl</code> Listener callbacks interface to clients from an <code>IAudioDecoderController</code>. <code>IAudioDecoderEventListener.aidl</code> Listener callbacks interface to clients from an <code>IAudioDecoder</code>. <code>Capabilities.aidl</code> Parcelable describing the capabilities of an <code>IAudioDecoder</code> resource instance. <code>ChannelType.aidl</code> Enum list of audio channel types. <code>Codec.aidl</code> Enum list of audio codecs. <code>CSDAudioFormat.aidl</code> Enum list of audio codec specific data formats. <code>ErrorCode.aidl</code> Enum list of audio decoder error codes. <code>FrameMetadata.aidl</code> Parcelable of audio frame metadata passed from the audio decoder. <code>PCMFormat.aidl</code> Enum list of PCM coding formats. <code>Property.aidl</code> Enum list of audio decoder properties."},{"location":"halif/audio_decoder/current/audio_decoder/#initialization","title":"Initialization","text":"<p>The systemd <code>hal-audio_decoder_manager.service</code> unit file is provided by the vendor layer to start the service and should include Wants or Requires directives to start any platform driver services it depends upon.</p> <p>The Audio Decoder Manager service depends on the Service Manager to register itself as a service.</p> <p>Upon starting, the service shall register the <code>IAudioDecoderManager</code> interface with the Service Manager using the String <code>IAudioDecoderManager.serviceName</code> and immediately become operational.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#product-customization","title":"Product Customization","text":"<p>The <code>IAudioDecoderManager.getAudioDecoderIds()</code> should return an array of <code>IAudioDecoder.Id</code> parcelables to uniquely represent all of the audio decoder resources supported by the vendor layer. Typically, the ID value starts at 0 for the first audio decoder and increments by 1 for each additional audio decoder.</p> <p>The <code>Capabilities</code> parcelable returned by the <code>IAudioDecoder.getCapabilities()</code> function lists all of the <code>Codec</code> types supported by this audio decoder instance and indicates if the secure audio path can be used.</p> <p>An audio decoder instance may support any number of audio codecs, but can only operate on one compressed audio stream in an open session. Concurrent audio decode requires multiple audio decoder instances to be opened.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#system-context","title":"System Context","text":"<p>The Audio Decoder HAL can provide functionality to multiple clients.</p> <p>Typically an RDK middleware GStreamer audio decoder element will work with a single <code>IAudioDecoder</code> instance and pass it AV Buffer handles for decode.</p> <p>The RDK middleware resource management system will examine the number of audio decoder resources and their capabilities, so they can be allocated to streaming sessions.</p> <pre><code>flowchart TD\n    RDKClientComponent(\"RDKClientComponent\")\n    subgraph Listeners[\"Listeners\"]\n        IAudioDecoderEventListener(\"IAudioDecoderEventListener\")\n        IAudioDecoderControllerListener(\"IAudioDecoderControllerListener\")\n    end\n    subgraph IAudioDecoderHAL[\"Audio Decoder HAL\"]\n        IAudioDecoderManager(\"IAudioDecoderManager &lt;br&gt;(Service)\")\n        IAudioDecoder(\"IAudioDecoder &lt;br&gt;(Instance)\")\n        IAudioDecoderController(\"IAudioDecoderController &lt;br&gt;(Instance)\")\n    end\n    subgraph OutputComponents[\"Output\"]\n        AudioFramePool(\"Audio Frame Pool\")\n        PlatformDecoder(\"Platform Integrated Decoder/Mixer\")\n        AudioOutput(\"Audio Output Ports in passthrough\")\n    end\n    RDKClientComponent -- createAudioPool() &lt;br&gt; alloc() &lt;br&gt; free() &lt;br&gt; destroyPool() --&gt; IAVBuffer(IAVBuffer)\n    RDKClientComponent -- getIAudioDecoderIds() &lt;br&gt; getIAudioDecoder() --&gt; IAudioDecoderManager\n    RDKClientComponent -- getCapabilities() &lt;br&gt; getState() &lt;br&gt; open() &lt;br&gt; close() --&gt; IAudioDecoder\n    RDKClientComponent -- registerEventListener() &lt;br&gt; unregisterEventListener() --&gt; IAudioDecoder\n    RDKClientComponent -- start() &lt;br&gt; stop() &lt;br&gt; setProperty() &lt;br&gt; decodeBuffer() &lt;br&gt; flush() &lt;br&gt; signalDiscontinuity() / signalEOS() &lt;br&gt; parseCodecSpecificData() --&gt; IAudioDecoderController\n    IAudioDecoderManager --&gt; IAudioDecoder --&gt; IAudioDecoderController\n    IAudioDecoder -- onStateChanged() &lt;br&gt; onDecodeError() --&gt; IAudioDecoderEventListener\n    IAudioDecoderEventListener --&gt; RDKClientComponent\n    IAudioDecoderControllerListener --&gt; RDKClientComponent\n    IAudioDecoderController -- onFrameOutput() --&gt; IAudioDecoderControllerListener\n    IAudioDecoderController -- alloc() --&gt; AudioFramePool\n    IAudioDecoderManager -- free() --&gt; IAVBuffer\n    IAudioDecoderController -. tunneled audio -.-&gt; PlatformDecoder\n    IAudioDecoderController -. tunneled audio &lt;br&gt;(passthrough) -.-&gt; AudioOutput\n\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef blue fill:#1565C0,stroke:#E0E0E0,stroke-width:2px,color:#E0E0E0;\n    classDef lightGrey fill:#616161,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef wheat fill:#FFB74D,stroke:#424242,stroke-width:2px,color:#000000;\n    classDef green fill:#4CAF50,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef default fill:#1E1E1E,stroke:#E0E0E0,stroke-width:1px,color:#E0E0E0;\n\n    RDKClientComponent:::blue\n    IAudioDecoderManager:::wheat\n    IAudioDecoderController:::wheat\n    IAudioDecoder:::wheat\n    IAVBuffer:::green\n    IAudioDecoderControllerListener:::wheat\n    IAudioDecoderEventListener:::wheat\n    AudioFramePool:::green\n    PlatformDecoder:::green\n    AudioOutput:::green</code></pre>"},{"location":"halif/audio_decoder/current/audio_decoder/#resource-management","title":"Resource Management","text":"<p>The <code>IAudioDecoderManager</code> provides access to one or more <code>IAudioDecoder</code> sub-interfaces which each represent an audio decoder resource instance offered by the platform.</p> <p>Each <code>IAudioDecoder</code> resource instance is assigned a unique integer ID, which is used in <code>IAudioDecoder.Id.value</code> and can be read from <code>RESOURCE_ID</code> using the <code>IAudioDecoder.getProperty()</code> function.</p> <p>To use an <code>IAudioDecoder</code> resource instance it must be opened by a client, which returns an <code>IAudioDecoderController</code> sub-interface to access buffer decoding and additional state controls.</p> <p>Important</p> <p>Any number of clients can access the <code>IAudioDecoderManager</code> service and get access to the <code>IAudioDecoder</code> sub-interfaces, but only 1 client can <code>open()</code> an <code>IAudioDecoder</code> and access its <code>IAudioDecoderController</code> sub-interface.</p> <p>The diagram below shows the relationship between the Audio Decodeer HAL interfaces and resource instances.</p> <pre><code>graph LR\n\n    %% --- Encapsulating Everything Inside \"Audio Decoder HAL\" ---\n    IAudioDecoderManager(\"IAudioDecoderManager\")\n\n    %% --- Audio Decoder Manager Service Spawns Instances ---\n    IAudioDecoderManager --&gt; ADI1(\"IAudioDecoder &lt;br&gt; ID = 0\")\n    IAudioDecoderManager --&gt; ADI2(\"IAudioDecoder &lt;br&gt; ID = 1\")\n    IAudioDecoderManager --&gt; ADI3(\"IAudioDecoder &lt;br&gt; ID = 2\")\n\n    %% --- Each Instance Has a Controller ---\n    ADI1 --&gt; ADIC1(\"IAudioDecoderController\")\n    ADI2 --&gt; ADIC2(\"IAudioDecoderController\")\n    ADI3 --&gt; ADIC3(\"IAudioDecoderController\")\n\n    %% --- High Contrast Styling (Rounded Box Simulation) ---\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef manager fill:#388E3C,stroke:#1B5E20,stroke-width:2px,color:#FFFFFF;\n    classDef instance1 fill:#FFC107,stroke:#FF8F00,stroke-width:2px,color:#000000;\n    classDef instance2 fill:#FF9800,stroke:#E65100,stroke-width:2px,color:#000000;\n    classDef instance3 fill:#F44336,stroke:#B71C1C,stroke-width:2px,color:#FFFFFF;\n    classDef controller fill:#00ACC1,stroke:#006064,stroke-width:2px,color:#000000;\n\n    %% --- Apply Colors ---\n    class IAudioDecoderManager manager;\n    class ADI1 instance1;\n    class ADI2 instance2;\n    class ADI3 instance3;\n    class ADIC1 instance1;\n    class ADIC2 instance2;\n    class ADIC3 instance3;\n\n    %% --- Consistent Link Colors Per Instance ---\n    %% Yellow for Instance 0\n    linkStyle 0,3 stroke:#AA8800,stroke-width:2px;\n    %% Orange for Instance 1\n    linkStyle 1,4 stroke:#CC5500,stroke-width:2px;\n    %% Red for Instance 2\n    linkStyle 2,5 stroke:#CC2200,stroke-width:2px;</code></pre>"},{"location":"halif/audio_decoder/current/audio_decoder/#codec-support","title":"Codec Support","text":"<p>Each RDK product defines the audio codecs it requires for IP streaming, apps, broadcast, input ports and output ports.</p> <p>Some codecs are subject to third party licensing agreements and may therefore only be included in some products.</p> <p>The list below indicates the list of audio codecs which are mandatory for the platform to support as either software decode (non-secure) or hardware/vendor decode (potentially secure).</p> <p>Where a codec is optional for hardware/vendor support and is not implemented by the vendor supplied audio decoder then it shall be implemented as an RDK software decoder if required by the product specification.</p> Codec Typical Use Case Hardware/Vendor Support MPEG-1/2 audio layer II Broadcast streams, IP streams, files Mandatory MPEG-1/2 audio layer III MP3 files Optional AAC-LC Broadcast streams, IP streams, files Mandatory HE-AAC Broadcast streams, IP streams, files Mandatory HE-AAC v2 Broadcast streams, IP streams, files Mandatory exHE-AAC Broadcast streams, IP streams, files Optional AAC-ELD Apple AirPlay Optional Apple Lossless Audio Codec (ALAC) Apple AirPlay Optional Dolby AC-3 Broadcast streams, IP streams, files Mandatory (if platform is licensed) Dolby E-AC-3 Broadcast streams, IP streams, files Mandatory (if platform is licensed) Dolby E-AC-3+JOC (Atmos) Broadcast streams, IP streams, files Mandatory (if platform is licensed) Dolby AC-4 Broadcast streams, IP streams Mandatory (if platform is licensed) USAC IP streams Optional SBC Bluetooth Optional FLAC Amazon Music app, files Optional Vorbis WebM, files Optional Opus WebM, files Optional AVS Broadcast streams, files Optional WMA Files Optional RealAudio Files Optional"},{"location":"halif/audio_decoder/current/audio_decoder/#encrypted-audio-playback","title":"Encrypted Audio Playback","text":"<p>Encrypted audio is copied into a non-secure buffer by the application and then decrypted into a secure buffer. The secure buffer is then decoded by an audio decoder accessed through the <code>IAudioDecoderController</code> interface.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#secure-audio-processing","title":"Secure Audio Processing","text":"<p>Secure audio processing (SAP) is a requirement for RDK-E but not all platforms may have support initially. Audio decoder instances shall declare themselves as secure or non-secure by setting <code>Capabilities.supportsSecure</code> appropriately.</p> <p>A secure audio decoder shall be able to handle secure AV buffers and decoded PCM output from the decoder shall be either contained in secure AV buffers or securely tunnelled in the vendor layer.</p> <p>If any audio decoder supports SAP in non-tunnelled mode then the Audio Sink HAL must also support SAP to be able to process secure AV buffers of decoded PCM data, otherwise SAP support is optional.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#clear-pcm-audio-playback","title":"Clear PCM Audio Playback","text":"<p>PCM stream data can originate in the RDK media pipeline from multiple sources; from an application, from the RDK middleware or from a software audio decoder.  In these cases the PCM data does not enter an Audio Decoder and is passed directly to the Audio Sink HAL.</p> <p>Clear PCM audio is copied into a non-secure AV Buffer and then queued at the Audio Sink where it is then mixed for audio output.</p> <p>No buffer decryption or audio decode is required for clear PCM audio buffers.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#audio-passthrough-mode","title":"Audio Passthrough Mode","text":"<p>Audio passthrough can be selected on some output ports which can be applied individually to HDMI output (STB profile), S/PDIF and ARC/eARC (TV profile) ports of the device.</p> <p>Passthrough mode is intended to output the original audio stream to the sink device without decode or mixing of other audio inputs.</p> <p>If the sink device on a port cannot support the audio codec being streamed, then the user selected passthrough mode cannot be honored on that port and normal audio decode and mixing shall apply.</p> <p>When audio passthrough is enabled and possible, then audio stream buffers passed to the Audio Decoder HAL are tunnelled to the vendor audio subsystem for output.</p> <p>In some cases the passthrough mode enabled on some output ports may have to work concurrently with other audio ports not in passthrough mode. This use case requires the audio decoder to tunnel the compressed audio for passthrough and decode it for mixing.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#tunnelled-and-non-tunnelled-audio","title":"Tunnelled and Non-Tunnelled Audio","text":"<p>The Audio Decoder makes its own run-time choice about whether audio is tunnelled or non-tunnelled.</p> <p>Tunnelled audio is required when any audio output ports are in passthrough mode. Tunnelled audio may also be required for some audio codecs that need a vendor integrated decoder/mixer such as Dolby MS12.</p> <p>When only tunnelled audio is in operation, no audio frame pool buffer handles containing decoded PCM audio are handed back to the controller client and the invalid <code>frameBufferHandle</code> value -1 is passed in <code>onFrameOutput()</code> callbacks.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#frame-metadata","title":"Frame Metadata","text":"<p>As audio frames are decoded, the metadata which related to the frames must be passed to the client over <code>IAudioDecoderControllerListener.onFrameOutput()</code>.</p> <p>In non-tunnelled operating mode, the frame buffer handle and metadata related to the frame must be passed in the same <code>onFrameOutput()</code> call.</p> <p>To conserve CPU load, the frame metadata is only passed with the first decoded frame after a <code>start()</code>, the first decoded frame after a <code>flush()</code> or if the frame metadata changes.</p> <p>If the frame metadata does not need to be passed, then the <code>@nullable FrameMetadata metadata</code> parameter should be passed as null in <code>onFrameOutput()</code>.</p> <p>When operating in tunnelled mode, if there is no frame metadata to be passed, then no call to <code>onFrameOutput()</code> should be made because there is no frame buffer handle or frame metadata to return to the client.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#low-latency-mode","title":"Low Latency Mode","text":"<p>A media pipeline is operating in low latency mode when the audio decoder and video decoder (if present) are set with a <code>LOW_LATENCY_MODE</code> property to 1 (enabled).</p> <p>The platform support for low latency audio is indicated in the Audio Sink HAL <code>PlatformCapabilities</code>.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#receiver-mixed-supplementary-audio-decoding","title":"Receiver Mixed Supplementary Audio Decoding","text":"<p>Supplementary audio that is receiver mixed is common in TV broadcasting where the main audio and supplementary audio share a common codec but require 2 audio decoders and mixing.</p> <p>An audio decoder used for supplementary audio is identical to a primary audio decoder, but the indication of its use for supplementary audio is set in the Audio Sink HAL.</p> <p>Any metadata associated with the supplementary/primary audio mix levels is left to the vendor to extract and manage in the vendor layer implementation.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#audio-stream-discontinuities","title":"Audio Stream Discontinuities","text":"<p>Where the client has knowledge of PTS discontinuities in the audio stream, it shall call <code>IAudioDecoderController.signalDiscontinuity()</code> between the AV buffers passed to <code>decodeBuffer()</code>.</p> <p>For the first input AV Buffer audio frame passed in for decode after the discontinuity, it shall indicate the discontinuity in its next output <code>FrameMetadata</code>.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#end-of-stream-signalling","title":"End of Stream Signalling","text":"<p>When the client knows it has delivered the final audio frame buffer to a decoder it shall then call <code>IAudioDecoderController.signalEOS()</code>.</p> <p>The Audio Decoder shall continue to decode all buffers previously passed for decode, but no further audio buffers should be expected unless the audio decoder is first stopped and restarted or is flushed.</p> <p>The Audio Decoder shall emit a <code>FrameMetadata</code> with <code>endOfStream=true</code> after all audio frames have been output from the decoder.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#decoded-audio-frame-buffers","title":"Decoded Audio Frame Buffers","text":"<p>Decoded audio frame buffers are only passed from the audio decoder to the client when operating in non-tunnelled mode.</p> <p>If the input AV Buffer that contained the coded audio frame was passed in a secure buffer, then the corresponding decoded audio frame must be output in a secure audio frame buffer.</p> <p>Audio frame buffers are passed back as handles in the <code>IAudioDecoderControllerListener.onFrameOutput()</code> function <code>frameBufferHandle</code> parameter. If no frame buffer handle is available to pass but the call needs to be made to provide updated <code>FrameMetadata</code> then -1 shall be passed as the handle value.</p> <p>The format of the data in the decoded audio frame buffer is always PCM and described by the <code>FrameMetadata</code>.</p> <p>The frame buffer handle is later passed to the Audio Sink for queuing before presentation and is then freed.</p> <p>The vendor layer is expected to manage the pool of decoded audio buffers privately.</p> <p>If the frame buffer pool is empty then the audio decoder cannot output the next decoded frame until a new frame buffer becomes available. While frame output is blocked, it is reasonable for the audio decoder service to either buffer additional coded input buffers or to reject new calls to <code>decodeBuffer()</code> with a <code>false</code> return value.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#presentation-time-for-audio-frames","title":"Presentation Time for Audio Frames","text":"<p>The presentation time base units for audio frames is nanoseconds and passed in an int64 (long in AIDL definition) variable type. Video buffers shared the same time base units of nanoseconds.</p> <p>When coded audio frames are passed in through AV Buffer handles to <code>IAudioDecoderController.decodeBuffer()</code> the <code>nsPresentationTime</code> parameter represents the audio frame presentation time.</p> <p>Calls to <code>IVideoDecoderControllerListener.onFrameOutput()</code> with frame buffer handles (non-tunnelled mode) and/or frame metadata shall use the same <code>nsPresentationTime</code>.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#dolby-ms12-and-ac-4-audio-decoding","title":"Dolby MS12 and AC-4 Audio Decoding","text":"<p>MS12 is a platform integrated decoder/mixer which requires the compressed audio bitstreams to be tunnelled from the Audio Decoder. Decoded audio frame buffers are not expected to be returned to the RDK middleware.</p> <p>The Dolby AC-4 codec is a bitstream that can contain multiple compressed audio channels which are grouped together in presentations. A presentation is a mix of one or more channels from the bitstream and is achieved in the vendor layer.</p> <p>A licensed Dolby MS12 implementation is required in the vendor layer to support AC-4.</p> <p>By default, an AC-4 audio decoder must use the user preferences for the presentation selection, but players shall also be able to override some or all of these settings without affecting the user preferences. Players must also be able to manually select an AC-4 presentation.</p> <p>The Audio Mixer provides the platform user preferences for AC-4 default presentation selection.</p> <p>The Audio Decoder also provides properties which allow for an override of the platform user preferences for the current player session.</p>"},{"location":"halif/audio_decoder/current/audio_decoder/#audio-decoder-states","title":"Audio Decoder States","text":"<p>The Audio Decoder HAL follows the standard Session State Management paradigm.</p> <p>When an Audio Decoder session enters a <code>FLUSHING</code> or <code>STOPPING</code> transitory state it shall free any AV buffers it is holding.</p> <p>The sequence diagram below shows the behavior of the callbacks.</p> <pre><code>sequenceDiagram\n    %% --- RDK Audio Decoder ---\n    box rgb(30,136,229) RDK Audio Decoder \n        participant Client as RDK Client\n        participant IAudioDecoderEventListener as IAudioDecoderEventListener\n        participant IAudioDecoderControllerListener as IAudioDecoderControllerListener\n    end\n\n    %% --- Audio Decoder Server ---\n    box rgb(249,168,37) Audio Decoder Server\n        participant ADC as IAudioDecoder\n        participant Controller as IAudioDecoderController\n    end\n\n    %% --- Audio AV Buffer ---\n    box rgb(67,160,71) Audio AV Buffer\n        participant IAVBuffer as IAVBuffer\n    end\n\n    Client-&gt;&gt;ADC: registerEventListener(IAudioDecoderEventListener)\n\n    Note over ADC: open() transitions from CLOSED \u2192 OPENING \u2192 READY\n    Client-&gt;&gt;ADC: open(IAudioDecoderControllerListener)\n    ADC--&gt;&gt;IAudioDecoderEventListener: onStateChanged(CLOSED \u2192 OPENING)\n    ADC-&gt;&gt;Controller: new\n    ADC--&gt;&gt;IAudioDecoderEventListener: onStateChanged(OPENING \u2192 READY)\n    ADC--&gt;&gt;Client: IAudioDecoderController\n\n    Note over ADC: start() transitions from READY \u2192 STARTING \u2192 STARTED\n    Client-&gt;&gt;Controller: start()\n    ADC--&gt;&gt;IAudioDecoderEventListener: onStateChanged(READY \u2192 STARTING)\n    ADC--&gt;&gt;IAudioDecoderEventListener: onStateChanged(STARTING \u2192 STARTED)\n\n    Note over Client: Client can now send AV buffers\n    Client-&gt;&gt;Controller: decodeBuffer(pts, bufferHandle=1, trimStartNs=0, trimEndNs=0)\n    Client-&gt;&gt;Controller: decodeBuffer(pts, bufferHandle=2, trimStartNs=0, trimEndNs=0)\n    Controller--&gt;&gt;IAudioDecoderControllerListener: onFrameOutput(pts, frameBufferHandle=1000, metadata)\n    Controller-&gt;&gt;IAVBuffer: free(bufferHandle=1)\n\n    Note over ADC: flush() transitions from STARTED \u2192 FLUSHING \u2192 STARTED\n    Client-&gt;&gt;Controller: flush()\n    ADC--&gt;&gt;IAudioDecoderEventListener: onStateChanged(STARTED \u2192 FLUSHING)\n    Controller-&gt;&gt;IAVBuffer: free(bufferHandle=2)\n    ADC--&gt;&gt;IAudioDecoderEventListener: onStateChanged(FLUSHING \u2192 STARTED)\n    Client-&gt;&gt;Controller: decodeBuffer(pts, bufferHandle=3, trimStartNs=0, trimEndNs=0)\n\n    Note over ADC: stop() transitions from STARTED \u2192 STOPPING \u2192 READY\n    Client-&gt;&gt;Controller: stop()\n    ADC--&gt;&gt;IAudioDecoderEventListener: onStateChanged(STARTED \u2192 STOPPING)\n    Controller-&gt;&gt;IAVBuffer: free(bufferHandle=3)\n    ADC--&gt;&gt;IAudioDecoderEventListener: onStateChanged(STOPPING \u2192 READY)\n\n    Note over ADC: close() transitions from READY \u2192 CLOSING \u2192 CLOSED\n    Client-&gt;&gt;ADC: close()\n    ADC--&gt;&gt;IAudioDecoderEventListener: onStateChanged(READY \u2192 CLOSING)\n    ADC-&gt;&gt;Controller: delete\n    ADC--&gt;&gt;IAudioDecoderEventListener: onStateChanged(CLOSING \u2192 CLOSED)\n    Client-&gt;&gt;ADC: unregisterEventListener(IAudioDecoderEventListener)</code></pre>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/","title":"Audio Decoder (v0.5)","text":""},{"location":"halif/audio_decoder/v0.5/audio_decoder/#overview","title":"Overview","text":"<p>The Audio Decoder Manager service provides the interfaces for compressed audio to be passed to the vendor layer for decoding.  It may be passed secure buffers if it indicates support for secure audio processing.</p> <p>The output of an audio decoder can take 2 routes; non-tunnelled it comes back to the RDK media pipeline as a PCM stream and metadata or tunnelled through the vendor layer directly to the mixer.</p> <p>The choice of whether audio is tunnelled or non-tunnelled has no impact on the operational mode of the video decoder.  It is possible to have tunnelled video and non-tunnelled audio.</p> <p>The audio decoder can choose whether to operate in tunnelled or non-tunnelled mode when it is opened for a specific codec and does not need to always use the same mode.</p> <p>PCM audio does not need decoding and therefore never passes into an audio decoder, but is routed to the Audio Sink for mixing.</p> <p>The RDK middleware GStreamer pipeline contains an RDK Audio Decoder element designed specifically to work with the Audio Decoder HAL interface.</p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#implementation-requirements","title":"Implementation Requirements","text":"Requirement Comments HAL.AUDIODECODER.1 Starting and stopping audio streams shall never produce an audible click or pop artefact due to the audio waveform the audio streaming was started or stopped at. This requirement works in conjunction with the audio mixer. HAL.AUDIODECODER.2 An audio decoder shall indicate its support for secure audio processing through its resource capabilities. HAL.AUDIODECODER.3 An audio decoder advertising the secure audio processing capability that receives a secure buffer of compressed audio shall output decoded audio to secure buffers either returned to the client or tunnelled to the mixer. Secure audio path must be maintained. HAL.AUDIODECODER.4 An audio decoder can tunnel decoded audio to a mixer or the vendor audio sub-system for passthrough and/or return the decoded audio as PCM to the client. HAL.AUDIODECODER.5 When the client enables the audio decoder low latency property and the audio decoder and platform support low latency audio then the audio frame metadata shall indicate low latency. HAL.AUDIODECODER.6 Each audio decoder resource shall be presented by a unique ID. HAL.AUDIODECODER.7 Each audio decoder resource shall provide an API to expose its capabilities for secure audio processing and supported codecs. HAL.AUDIODECODER.8 Only 1 client connection shall be allowed to open and control an audio decoder resource. HAL.AUDIODECODER.9 Multiple client connections shall be allowed to register for events from an audio decoder resource. HAL.AUDIODECODER.10 Audio frame metadata shall be returned to a controlling client on the first audio frame decoded after an open or flush and then against not until the frame metadata changes. Not sent on every decoded audio frame buffer unless changed since previous. HAL.AUDIODECODER.11 The audio frame output buffer from an audio decoder shall match the platform PCM audio format required for mixing. See <code>com.rdk.hal.audiosink.PlatformCapabilities</code>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#interface-definition","title":"Interface Definition","text":"Interface Definition File Description IAudioDecoderManager.aidl Audio Decoder Manager HAL which provides access to <code>IAudioDecoder</code> resource instances. IAudioDecoder.aidl Audio Decoder interface for a single audio decoder resource instance. IAudioDecoderController.aidl Controller interface for an IAudioDecoder resource instance. IAudioDecoderControllerListener.aidl Listener callbacks interface to clients from an IAudioDecoderController. IAudioDecoderEventListener.aidl Listener callbacks interface to clients from an <code>IAudioDecoder</code>. Capabilities.aidl Parcelable describing the capabilities of an IAudioDecoder resource instance. ChannelType.aidl Enum list of audio channel types. Codec.aidl Enum list of audio codecs. CSDAudioFormat.aidl Enum list of audio codec specific data formats. ErrorCode.aidl Enum list of audio decoder error codes. FrameMetadata.aidl Parcelable of audio frame metadata passed from the audio decoder. PCMFormat.aidl Enum list of PCM coding formats. Property.aidl Enum list of audio decoder properties."},{"location":"halif/audio_decoder/v0.5/audio_decoder/#initialization","title":"Initialization","text":"<p>The systemd <code>hal-audio_decoder_manager.service</code> unit file is provided by the vendor layer to start the service and should include Wants or Requires directives to start any platform driver services it depends upon.</p> <p>The Audio Decoder Manager service depends on the Service Manager to register itself as a service.</p> <p>Upon starting, the service shall register the IAudioDecoderManager interface with the Service Manager using the String <code>IAudioDecoderManager.serviceName</code> and immediately become operational.</p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#product-customization","title":"Product Customization","text":"<p>The IAudioDecoderManager.getAudioDecoderIds() should return an array of <code>IAudioDecoder.Id parcelables</code> to uniquely represent all of the audio decoder resources supported by the vendor layer.  Typically, the ID value starts at 0 for the first audio decoder and increments by 1 for each additional audio decoder.</p> <p>The Capabilities parcelable returned by the <code>IAudioDecoder.getCapabilities()</code> function lists all of the Codec types supported by this audio decoder instance and indicates if the secure audio path can be used.</p> <p>An audio decoder instance may support any number of audio codecs, but can only operate on one compressed audio stream in an open session.  Concurrent audio decode requires multiple audio decoder instances to be opened.</p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#system-context","title":"System Context","text":"<p>The Audio Decoder HAL can provide functionality to multiple clients which exist both inside the RDK middleware.</p> <p>Typically an RDK middleware GStreamer audio decoder element will work with a single IAudioDecoder instance and pass it AV Buffer handles for decode.</p> <p>The RDK middleware resource management system will examine the number of audio decoder resources and their capabilities, so they can be allocated to streaming sessions.</p> <pre><code>flowchart TD\n    RDKClientComponent(\"RDKClientComponent\")\n    subgraph Listeners[\"Listeners\"]\n        IAudioDecoderEventListener(\"IAudioDecoderEventListener\")\n        IAudioDecoderControllerListener(\"IAudioDecoderControllerListener\")\n    end\n    subgraph IAudioDecoderHAL[\"Audio Decoder HAL\"]\n        IAudioDecoderManager(\"IAudioDecoderManager &lt;br&gt;(Service)\")\n        IAudioDecoder(\"IAudioDecoder &lt;br&gt;(Instance)\")\n        IAudioDecoderController(\"IAudioDecoderController &lt;br&gt;(Instance)\")\n    end\n    subgraph OutputComponents[\"Output\"]\n        AudioFramePool(\"Audio Frame Pool\")\n        PlatformDecoder(\"Platform Integrated Decoder/Mixer\")\n        AudioOutput(\"Audio Output Ports in passthrough\")\n    end\n    RDKClientComponent -- createAudioPool() &lt;br&gt; alloc() &lt;br&gt; free() &lt;br&gt; destroyPool() --&gt; IAVBuffer(IAVBuffer)\n    RDKClientComponent -- getIAudioDecoderIds() &lt;br&gt; getIAudioDecoder() --&gt; IAudioDecoderManager\n    RDKClientComponent -- getCapabilities() &lt;br&gt; getState() &lt;br&gt; open() &lt;br&gt; close() --&gt; IAudioDecoder\n    RDKClientComponent -- registerEventListener() / unregisterEventListener() --&gt; IAudioDecoder\n    RDKClientComponent -- start() &lt;br&gt; stop() &lt;br&gt; setProperty() &lt;br&gt; decodeBuffer() &lt;br&gt; flush() &lt;br&gt; signalDiscontinuity() / signalEOS() / parseCodecSpecificData() --&gt; IAudioDecoderController\n    IAudioDecoderManager --&gt; IAudioDecoder --&gt; IAudioDecoderController\n    IAudioDecoder -- onStateChanged() &lt;br&gt; onDecodeError() --&gt; IAudioDecoderEventListener\n    IAudioDecoderEventListener --&gt; RDKClientComponent\n    IAudioDecoderControllerListener --&gt; RDKClientComponent\n    IAudioDecoderController -- onFrameOutput() --&gt; IAudioDecoderControllerListener\n    IAudioDecoderController -- alloc() --&gt; AudioFramePool\n    IAudioDecoderManager -- free() --&gt; IAVBuffer\n    IAudioDecoderController -- tunneled audio --&gt; PlatformDecoder\n    IAudioDecoderController -- tunneled audio &lt;br&gt;(passthrough) --&gt; AudioOutput\n\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef blue fill:#1565C0,stroke:#E0E0E0,stroke-width:2px,color:#E0E0E0;\n    classDef lightGrey fill:#616161,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef wheat fill:#FFB74D,stroke:#424242,stroke-width:2px,color:#000000;\n    classDef green fill:#4CAF50,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef default fill:#1E1E1E,stroke:#E0E0E0,stroke-width:1px,color:#E0E0E0;\n\n    RDKClientComponent:::blue\n    IAudioDecoderManager:::wheat\n    IAudioDecoderController:::wheat\n    IAudioDecoder:::wheat\n    IAVBuffer:::green\n    IAudioDecoderControllerListener:::wheat\n    IAudioDecoderEventListener:::wheat\n    AudioFramePool:::green\n    PlatformDecoder:::green\n    AudioOutput:::green</code></pre>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#resource-management","title":"Resource Management","text":"<p>The IAudioDecoderManager provides access to one or more <code>IAudioDecoder</code> sub-interfaces which each represent an audio decoder resource instance offered by the platform.</p> <p>Each IAudioDecoder resource instance is assigned a unique integer ID, which is used in IAudioDecoder.Id.value and can be read from RESOURCE_ID using the <code>IAudioDecoder.getProperty()</code> function.</p> <p>To use an IAudioDecoder resource instance it must be opened by a client, which returns an <code>IAudioDecoderController</code> sub-interface to access buffer decoding and additional state controls.</p> <p>Any number of clients can access the IAudioDecoderManager service and get access to the IAudioDecoder sub-interfaces, but only 1 client can open() an <code>IAudioDecoder</code> and access its <code>IAudioDecoderController</code> sub-interface.</p> <p>The diagram below shows the relationship between the interfaces and resource instances.</p> <pre><code>graph LR\n\n    %% --- Encapsulating Everything Inside \"Audio Decoder HAL\" ---\n    subgraph ADHAL[\"Audio Decoder HAL\"]\n        direction LR\n        ADMS(\"IAudioDecoderManager\")\n\n        %% --- Audio Decoder Manager Service Spawns Instances ---\n        ADMS --&gt; ADI1(\"IAudioDecoder &lt;br&gt; ID = 0\")\n        ADMS --&gt; ADI2(\"IAudioDecoder &lt;br&gt; ID = 1\")\n        ADMS --&gt; ADI3(\"IAudioDecoder &lt;br&gt; ID = 2\")\n\n        %% --- Each Instance Has a Controller ---\n        ADI1 --&gt; ADIC1(\"IAudioDecoderController\")\n        ADI2 --&gt; ADIC2(\"IAudioDecoderController\")\n        ADI3 --&gt; ADIC3(\"IAudioDecoderController\")\n    end\n\n    %% --- High Contrast Styling (Rounded Box Simulation) ---\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef manager fill:#388E3C,stroke:#1B5E20,stroke-width:2px,color:#FFFFFF;\n    classDef instance1 fill:#FFC107,stroke:#FF8F00,stroke-width:2px,color:#000000;\n    classDef instance2 fill:#FF9800,stroke:#E65100,stroke-width:2px,color:#000000;\n    classDef instance3 fill:#F44336,stroke:#B71C1C,stroke-width:2px,color:#FFFFFF;\n    classDef controller fill:#00ACC1,stroke:#006064,stroke-width:2px,color:#000000;\n\n    %% --- Apply Colors ---\n    class ADHAL hal;\n    class ADMS manager;\n    class ADI1 instance1;\n    class ADI2 instance2;\n    class ADI3 instance3;\n    class ADIC1 instance1;\n    class ADIC2 instance2;\n    class ADIC3 instance3;\n\n    %% --- Consistent Link Colors Per Instance ---\n    %% Yellow for Instance 0\n    linkStyle 0,3 stroke:#AA8800,stroke-width:2px;\n    %% Orange for Instance 1\n    linkStyle 1,4 stroke:#CC5500,stroke-width:2px;\n    %% Red for Instance 2\n    linkStyle 2,5 stroke:#CC2200,stroke-width:2px;\n</code></pre>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#encrypted-audio-playback","title":"Encrypted Audio Playback","text":"<p>Encrypted audio is copied into a non-secure buffer by the application and then decrypted into a secure buffer.  The secure buffer is then decoded by an audio decoder accessed through the IAudioDecoderController  interface.</p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#secure-audio-processing","title":"Secure Audio Processing","text":"<p>Secure audio processing (SAP) is a requirement for RDK-E but not all platforms may have support initially. Audio decoder instances shall declare themselves as secure or non-secure by setting Capabilities.supportsSecure appropriately.</p> <p>A secure audio decoder shall be able to handle secure AV buffers and decoded PCM output from the decoder shall be either contained in secure AV buffers or securely tunnelled in the vendor layer.</p> <p>If any audio decoder supports SAP in non-tunnelled mode then the Audio Sink HAL must also support SAP to be able to process secure AV buffers of decoded PCM data, otherwise SAP support is optional.</p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#clear-pcm-audio-playback","title":"Clear PCM Audio Playback","text":"<p>PCM stream data can originate in the RDK media pipeline from multiple sources; from an application, from the RDK middleware or from a software audio decoder.  In these cases the PCM data does not enter an Audio Decoder and is passed directly to the Audio Sink HAL.</p> <p>Clear PCM audio is copied into a non-secure buffer and is routed to the IAudioSink where it is mixed for audio output.</p> <p>No buffer decryption or audio decode is required for clear PCM audio buffers.</p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#audio-passthrough-mode","title":"Audio Passthrough Mode","text":"<p>Audio passthrough can be selected on some output ports which can be applied individually to HDMI output (STB profile), S/PDIF and ARC/eARC (TV profile) ports of the device.</p> <p>Passthrough mode is intended to output the original audio stream to the sink device without decode or mixing of other audio inputs.</p> <p>If the sink device on a port cannot support the audio codec being streamed, then the user selected passthrough mode cannot be honored on that port and normal audio decode and mixing shall apply.</p> <p>When audio passthrough is enabled and possible, then audio stream buffers passed to the Audio Decoder HAL are tunnelled to the vendor audio subsystem for output.</p> <p>In some cases the passthrough mode enabled on some output ports may have to work concurrently with other audio ports not in passthrough mode.  This use case requires the audio decoder to tunnel the compressed audio for passthrough and decode it for mixing.</p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#tunnelled-and-non-tunnelled-audio","title":"Tunnelled and Non-Tunnelled Audio","text":"<p>The Audio Decoder makes its own run-time choice about whether audio is tunnelled or non-tunnelled.</p> <p>Tunnelled audio is required when any audio output ports are in passthrough mode.  Tunnelled audio may also be required for some audio codecs that need a vendor integrated decoder/mixer such as Dolby MS12.</p> <p>When only tunnelled audio is in operation, no audio frame pool buffer handles containing decoded PCM audio are handed back to the controller client and the invalid frameBufferHandle value -1 is passed in onFrameOutput() callbacks.</p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#low-latency-mode","title":"Low Latency Mode","text":"<p>A media pipeline is operating in low latency mode the audio decoder HAL and video decoder HAL (if present) are set with a LOW_LATENCY_MODE property to 1 (enabled).</p> <p>The platform support for low latency audio is indicated is the Audio Sink Capabilities parcelable.</p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#receiver-mixed-supplementary-audio-decoding","title":"Receiver Mixed Supplementary Audio Decoding","text":"<p>Supplementary audio that is receiver mixed is common in TV broadcasting where the main audio and supplementary audio share a common codec but require 2 audio decoders and mixing.</p> <p>An audio decoder used for supplementary audio is identical to a primary audio decoder, but the indication of its use for supplementary audio is set in the Audio Sink HAL.</p> <p>Any metadata associated with the supplementary/primary audio mix levels is left to the vendor to extract and manage in the vendor layer implementation.</p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#audio-stream-discontinuities","title":"Audio Stream Discontinuities","text":"<p>Where the client has knowledge of PTS discontinuities in the audio stream, it shall call IAudioDecoderController.signalDiscontinuity() between the linear frame buffers passed to decodeBuffer().</p> <p>For the first input linear buffer audio frame passed in for decode after the discontinuity, it shall indicate the discontinuity in its next output FrameMetadata, </p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#end-of-stream-signalling","title":"End of Stream Signalling","text":"<p>When the client knows it has delivered the final audio frame buffer to a decoder it shall then call IAudioDecoderController.signalEOS().</p> <p>The Audio Decoder shall continue to decode all buffers previously passed for decode, but no further audio buffers should be expected unless the audio decoder is first stopped and restarted or is flushed.</p> <p>The Audio Decoder shall emit a FrameMetadata with endOfStream=true after all audio frames have been output from the decoder.</p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#dolby-ms12-and-ac-4-audio-decoding","title":"Dolby MS12 and AC-4 Audio Decoding","text":"<p>MS12 is a platform integrated decoder/mixer which requires the compressed audio bitstreams to be tunnelled from the Audio Decoder.  Decoded audio frame buffers are not expected to be returned to the RDK middleware.</p> <p>The Dolby AC-4 codec is a bitstream that can contain multiple compressed audio channels which are grouped together in presentations. A presentation is a mix of one or more channels from the bitstream is achieved in the vendor layer.</p> <p>A licensed Dolby MS12 implementation is required in the vendor layer to support AC-4.</p> <p>By default, an AC-4 audio decoder must use the user preferences for the presentation selection, but players shall also be able to override some or all of these settings without affecting the user preferences. Players must also be able to manually select an AC-4 presentation.</p> <p>The Audio Mixer provides the platform user preferences for AC-4 default presentation selection.</p> <p>The Audio Decoder also provides properties which allow for an override of the platform user preferences for the current player session.</p>"},{"location":"halif/audio_decoder/v0.5/audio_decoder/#audio-decoder-states","title":"Audio Decoder States","text":"<p>The Audio Decoder HAL follows the standard Session State Management  paradigm.</p> <p>When an Audio Decoder session enters a FLUSHING or STOPPING transitory state it shall free any AV buffers it is holding.</p> <p>The sequence diagram below shows the behavior of the callbacks.</p> <pre><code>@startuml\n\nbox RDK Audio Decoder #LightBlue\n  participant Client as \"RDK Client\"\n  participant IAudioDecoderEventListener\n  participant IAudioDecoderControllerListener\nendbox\nbox Audio Decoder Server #Yellow\n  participant ADC as \"IAudioDecoder\"\n  participant Controller as \"IAudioDecoderController\"\nendbox\nbox Audio AV Buffer #LightGreen\n  participant IAVBuffer as \"IAVBuffer\"\nendbox\n\n  Client-&gt;ADC: registerEventListener(IAudioDecoderEventListener)\n\n... open() transitions from CLOSED -&gt; OPENING -&gt; READY...\n\n  Client-&gt;ADC: open(IAudioDecoderControllerListener)\n  ADC--&gt;IAudioDecoderEventListener: onStateChanged(CLOSED -&gt; OPENING)\n  ADC-&gt;Controller **: new\n  ADC--&gt;IAudioDecoderEventListener: onStateChanged(OPENING -&gt; READY)\n  ADC--&gt;Client: IAudioDecoderController\n\n... start() transitions from READY -&gt; STARTING -&gt; STARTED...\n\n  Client-&gt;Controller: start()\n  ADC--&gt;IAudioDecoderEventListener: onStateChanged(READY -&gt; STARTING)\n  ADC--&gt;IAudioDecoderEventListener: onStateChanged(STARTING -&gt; STARTED)\n\n  Note over Client: Client can now\\nsend AV buffers\n\n  Client-&gt;Controller: decodeBuffer(pts, bufferHandle=1, trimStartNs=0, trimEndNs=0)\n  Client-&gt;Controller: decodeBuffer(pts, bufferHandle=2, trimStartNs=0, trimEndNs=0)\n  Controller--&gt;IAudioDecoderControllerListener: onFrameOutput(pts, frameBufferHandle=1000, metadata)\n  Controller-&gt;IAVBuffer: free(bufferHandle=1)\n\n... flush() transitions from STARTED -&gt; FLUSHING -&gt; STARTED...\n\n  Client-&gt;Controller: flush()\n  ADC--&gt;IAudioDecoderEventListener: onStateChanged(STARTED -&gt; FLUSHING)\n  Controller-&gt;IAVBuffer: free(bufferHandle=2)\n  ADC--&gt;IAudioDecoderEventListener: onStateChanged(FLUSHING -&gt; STARTED)\n\n  Client-&gt;Controller: decodeBuffer(pts, bufferHandle=3, trimStartNs=0, trimEndNs=0)\n\n... stop() transitions from STARTED -&gt; STOPPING -&gt; READY...\n\n  Client-&gt;Controller: stop()\n  ADC--&gt;IAudioDecoderEventListener: onStateChanged(STARTED -&gt; STOPPING)\n  Controller-&gt;IAVBuffer: free(bufferHandle=3)\n  ADC--&gt;IAudioDecoderEventListener: onStateChanged(STOPPING -&gt; READY)\n\n... close() transitions from READY -&gt; CLOSING -&gt; CLOSED...\n\n  Client-&gt;ADC: close()\n  ADC--&gt;IAudioDecoderEventListener: onStateChanged(READY -&gt; CLOSING)\n  ADC-&gt;Controller !!: delete\n  ADC--&gt;IAudioDecoderEventListener: onStateChanged(CLOSING -&gt; CLOSED)\n\n  Client-&gt;ADC: unregisterEventListener(IAudioDecoderEventListener)\n\n@enduml\n</code></pre>"},{"location":"halif/audio_sink/current/audio_sink/","title":"Audio Sink","text":"<p>The Audio Sink HAL provides a standardized interface for managing and controlling the playback of non-tunnelled Pulse Code Modulation (PCM) audio streams. It acts as an abstraction layer between the audio processing hardware and higher-level software components, such as the RDK middleware.  The primary function of the Audio Sink HAL is to receive PCM audio frame buffers, deliver them to the audio mixer, and expose controls for managing audio mixing levels, including volume, mute state, and fade effects.</p> <p>This HAL is designed to handle PCM audio data that has been decoded or generated by software components within the system. It specifically excludes support for tunnelled audio (where the encoded audio stream is passed directly to the hardware for decoding) and audio passthrough modes (where the audio stream bypasses software processing altogether).  These scenarios are handled differently within the audio pipeline.</p> <p>The RDK middleware, specifically the GStreamer pipeline, includes a dedicated RDK Audio Sink element that is designed to interact seamlessly with the Audio Sink HAL. This element handles the task of receiving audio data from the pipeline, formatting it into appropriate frame buffers, and delivering it to the HAL for playback.  It also manages the communication with the HAL to control mixing parameters and handle audio events.</p> <p>The Audio Sink HAL plays a critical role in the overall audio playback architecture by:</p> <ul> <li>Abstracting Hardware: It provides a consistent interface to the audio hardware, shielding higher-level software from hardware-specific details. This allows for easier porting of the middleware to different platforms with varying audio hardware.</li> <li>Managing Resources: The HAL can manage multiple audio sink instances, each representing a distinct audio output or stream. This allows for concurrent playback of multiple audio sources.</li> <li>Controlling Mixing: It provides controls for volume, mute, and fading, enabling applications to adjust the audio output to their requirements.</li> <li>Handling Buffers: The HAL is responsible for receiving audio frame buffers, ensuring they are in the correct format, and delivering them to the audio mixer for processing.</li> <li>Event Handling: The HAL can generate events related to audio playback, such as changes in state, errors, or end-of-stream notifications, allowing the middleware to react accordingly.</li> </ul> <p>The interaction between the RDK GStreamer Audio Sink element and the Audio Sink HAL is crucial for efficient and robust audio playback.  The element handles the higher-level stream management, while the HAL takes care of the low-level hardware interaction and mixing control.  This separation of concerns simplifies the design and maintenance of the audio subsystem.</p>"},{"location":"halif/audio_sink/current/audio_sink/#references","title":"References","text":"<p>Info</p> Interface Definition audio_sink/current API Documentation TBD - Doxygen HAL Interface Type AIDL and Binder Initialization - TBC systemd - hal-audio_sink.service VTS Tests TBC Reference Implementation - vComponent https://github.com/rdkcentral/rdk-halif-aidl/tree/main/audiosink/current"},{"location":"halif/audio_sink/current/audio_sink/#related-pages","title":"Related Pages","text":"<p>Tip</p> <ul> <li>Audio Decoder</li> <li>AV Buffer</li> <li>AV Clock</li> <li>Session State Management</li> </ul>"},{"location":"halif/audio_sink/current/audio_sink/#implementation-requirements","title":"Implementation Requirements","text":"# Requirement Comments HAL.AUDIOSINK.1 Starting and stopping audio streams shall never produce an audible click or pop artefact due to the audio waveform where the audio streaming was started or stopped. HAL.AUDIOSINK.2 If any audio decoders support secure audio path processing (SAP) then the audio sink shall be capable of processing secure input buffers to maintain SAP. HAL.AUDIOSINK.3 The default volume level for an audio sink session shall be 1.0 (full volume) and unmuted. HAL.AUDIOSINK.4 The default reference level for an audio sink session shall be -31dB. HAL.AUDIOSINK.5 If a client process exits, the Audio Sink server shall automatically stop and close any Audio Sink instance controlled by that client."},{"location":"halif/audio_sink/current/audio_sink/#interface-definition","title":"Interface Definition","text":"Interface Definition File Description <code>IAudioSinkManager.aidl</code> Audio Sink Manager HAL interface which provides access to the <code>IAudioSink</code> resource instances. <code>IAudioSink.aidl</code> Audio Sink interface for a single audio sink resource instance. <code>IAudioSinkController.aidl</code> Controller interface for an <code>IAudioSink</code> resource instance. <code>IAudioSinkControllerListener.aidl</code> Listener callbacks interface to clients from an <code>IAudioSinkController</code>. <code>IAudioSinkEventListener.aidl</code> Listener callbacks interface to clients from an <code>IAudioSink</code>. <code>Capabilities.aidl</code> Parcelable describing the capabilities of an <code>IAudioSink</code> resource instance. <code>ErrorCode.aidl</code> Enum list of audio sink error codes. <code>PlatformCapabilities.aidl</code> Parcelable describing the capabilities of the platform audio. <code>Property.aidl</code> Enum list of audio sink properties. <code>Volume.aidl</code> Parcelable for defining a volume and mute state. <code>VolumeRamp.aidl</code> Enum list of volume ramp types."},{"location":"halif/audio_sink/current/audio_sink/#initialization","title":"Initialization","text":"<p>The systemd <code>hal-audios_sink_manager.service</code> unit file is provided by the vendor layer to start the service and should include Wants or Requires directives to start any platform driver services it depends upon.</p> <p>The Audio Sink Manager service depends on the Service Manager to register itself as a service.</p> <p>Upon starting, the service shall register the <code>IAudioSinkManager</code> interface with the Service Manager using the string <code>IAudioSinkManager.serviceName</code> and immediately become operational.</p>"},{"location":"halif/audio_sink/current/audio_sink/#product-customization","title":"Product Customization","text":"<p>The <code>IAudioSinkManager.getAudioSinkIds()</code> should return an array of <code>IAudioSink.Id</code> parcelables to uniquely represent all of the audio sink resources supported by the vendor layer. Typically, the ID value starts at 0 for the first audio sink and increments by 1 for each additional audio sink.</p> <p>The <code>Capabilities</code> parcelable returned by the <code>IAudioSink.getCapabilities()</code> function lists all capabilities supported by this audio sink instance.</p> <p>An audio sink instance can only operate on one audio stream in an open session. Concurrent audio streams require multiple audio sink instances to be opened.</p>"},{"location":"halif/audio_sink/current/audio_sink/#system-context","title":"System Context","text":"<p>The Audio Sink HAL can provide functionality to multiple clients.</p> <p>Typically an RDK middleware GStreamer audio sink element will work with a single <code>IAudioSink</code> instance and pass it PCM audio in AV Buffer handles for mixing.</p> <p>The RDK middleware resource management system will examine the number of audio sink resources and their capabilities, so they can be allocated to streaming sessions.</p> <pre><code>flowchart TD\n    RDKClientComponent(\"RDKClientComponent\")\n    subgraph Listeners[\"Listeners\"]\n        IAudioSinkEventListener(\"IAudioSinkEventListener\")\n        IAudioSinkControllerListener(\"IAudioSinkControllerListener\")\n    end\n    subgraph IAudioSinkHAL[\"Audio Decoder HAL\"]\n        IAudioSinkManager(\"IAudioSinkManager &lt;br&gt;(Service)\")\n        IAudioSink(\"IAudioSink &lt;br&gt;(Instance)\")\n        IAudioSinkController(\"IAudioSinkController &lt;br&gt;(Instance)\")\n    end\n    subgraph OutputComponents[\"Output\"]\n        platformMixer(\"Platform Integrated Mixer\")\n    end\n    RDKClientComponent -- createAudioPool() &lt;br&gt; alloc() &lt;br&gt; free() &lt;br&gt; destroyPool() --&gt; IAVBuffer(IAVBuffer)\n    AudioFramePool(\"Audio Frame Pool\")\n    IAVBuffer -- free() --&gt; AudioFramePool\n    RDKClientComponent -- getIAudioSinkIds() &lt;br&gt; getIAudioSink() --&gt; IAudioSinkManager\n    RDKClientComponent -- getCapabilities() &lt;br&gt; getProperty() &lt;br&gt; getState() &lt;br&gt; open() &lt;br&gt; close() &lt;br&gt; registerEventListener() &lt;br&gt; unregisterEventListener() --&gt; IAudioSink\n    RDKClientComponent -- setAudioDecoder() &lt;br&gt; getAudioDecoder() &lt;br&gt; start() &lt;br&gt; stop() &lt;br&gt; queueAudioFrame() &lt;br&gt; flush() &lt;br&gt; getVolume() &lt;br&gt; setVolume() &lt;br&gt; setVolumeRamp() --&gt; IAudioSinkController\n    IAudioSinkManager --&gt; IAudioSink --&gt; IAudioSinkController\n    IAudioSink -- onStateChanged() &lt;br&gt; onFristFrameRendered() &lt;br&gt; onEndOfStream() &lt;br&gt; onAudioUnderflow() &lt;br&gt; onAudioResumed() &lt;br&gt; onFlushComplete()--&gt; IAudioSinkEventListener\n    IAudioSinkController -- onStateChanged() &lt;br&gt; onFristFrameRendered() &lt;br&gt; onEndOfStream() &lt;br&gt; onAudioUnderflow() &lt;br&gt; onAudioResumed() &lt;br&gt; onFlushComplete()--&gt; IAudioSinkControllerListener\n    IAudioSinkEventListener --&gt; RDKClientComponent\n    IAudioSinkControllerListener --&gt; RDKClientComponent\n    IAudioSinkManager -- free() --&gt; IAVBuffer\n    IAudioSinkController -. audio -.-&gt; platformMixer\n\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef blue fill:#1565C0,stroke:#E0E0E0,stroke-width:2px,color:#E0E0E0;\n    classDef lightGrey fill:#616161,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef wheat fill:#FFB74D,stroke:#424242,stroke-width:2px,color:#000000;\n    classDef green fill:#4CAF50,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef default fill:#1E1E1E,stroke:#E0E0E0,stroke-width:1px,color:#E0E0E0;\n\n    RDKClientComponent:::blue\n    IAudioSinkManager:::wheat\n    IAudioSinkController:::wheat\n    IAudioSink:::wheat\n    IAVBuffer:::green\n    IAudioSinkControllerListener:::wheat\n    IAudioSinkEventListener:::wheat\n    AudioFramePool:::green\n    platformMixer:::green</code></pre>"},{"location":"halif/audio_sink/current/audio_sink/#resource-management","title":"Resource Management","text":"<p>The <code>IAudioSinkManager</code> provides access to one or more <code>IAudioSink</code> sub-interfaces which each represent an audio sink resource instance offered by the platform.</p> <p>Each <code>IAudioSink</code> resource instance is assigned a unique integer ID, which is used in the <code>IAudioSink.Id.value</code> and can be read from <code>RESOURCE_ID</code> using the <code>IAudioSink.getProperty()</code> function.</p> <p>To use an <code>IAudioSink</code> resource instance it must be opened by a client, which returns an <code>IAudioSinkController</code> sub-interface to access buffer queuing and additional state controls.</p> <p>Important</p> <p>Any number of clients can access the <code>IAudioSinkManager</code> service and get access to the <code>IAudioSink</code> sub-interfaces, but only 1 client can <code>open()</code> an <code>IAudioSink</code> and access its <code>IAudioSinkController</code> sub-interface.</p> <p>The diagram below shows the relationship between the interfaces and resource instances.</p> <pre><code>graph LR\n\n    %% --- Encapsulating Everything Inside \"Audio Decoder HAL\" ---\n    IAudioSinkManager(\"IAudioSinkManager\")\n\n    %% --- Audio Decoder Manager Service Spawns Instances ---\n    IAudioSinkManager --&gt; ADI1(\"IAudioSink &lt;br&gt; ID = 0\")\n    IAudioSinkManager --&gt; ADI2(\"IAudioSink &lt;br&gt; ID = 1\")\n    IAudioSinkManager --&gt; ADI3(\"IAudioSink &lt;br&gt; ID = 2\")\n\n    %% --- Each Instance Has a Controller ---\n    ADI1 --&gt; ADIC1(\"IAudioSinkController\")\n    ADI2 --&gt; ADIC2(\"IAudioSinkController\")\n    ADI3 --&gt; ADIC3(\"IAudioSinkController\")\n\n    %% --- High Contrast Styling (Rounded Box Simulation) ---\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef manager fill:#388E3C,stroke:#1B5E20,stroke-width:2px,color:#FFFFFF;\n    classDef instance1 fill:#FFC107,stroke:#FF8F00,stroke-width:2px,color:#000000;\n    classDef instance2 fill:#FF9800,stroke:#E65100,stroke-width:2px,color:#000000;\n    classDef instance3 fill:#F44336,stroke:#B71C1C,stroke-width:2px,color:#FFFFFF;\n    classDef controller fill:#00ACC1,stroke:#006064,stroke-width:2px,color:#000000;\n\n    %% --- Apply Colors ---\n    class IAudioSinkManager manager;\n    class ADI1 instance1;\n    class ADI2 instance2;\n    class ADI3 instance3;\n    class ADIC1 instance1;\n    class ADIC2 instance2;\n    class ADIC3 instance3;\n\n    %% --- Consistent Link Colors Per Instance ---\n    %% Yellow for Instance 0\n    linkStyle 0,3 stroke:#AA8800,stroke-width:2px;\n    %% Orange for Instance 1\n    linkStyle 1,4 stroke:#CC5500,stroke-width:2px;\n    %% Red for Instance 2\n    linkStyle 2,5 stroke:#CC2200,stroke-width:2px;</code></pre>"},{"location":"halif/audio_sink/current/audio_sink/#audio-buffers","title":"Audio Buffers","text":"<p>Audio buffers entering the Audio Sink shall be delivered as AV Buffer handles (allocated from either an AV Buffer audio pool or the audio frame pool) with a presentation timestamp and metadata describing the audio frame through the <code>IAudioSinkController.queueAudioFrame()</code> function.</p> <p>An AV Buffer audio pool would be used for PCM data which has come from system memory (e.g. PCM sound clip) or from a soft audio decoder. In this case the audio pool is created against <code>IAudioDecoder.Id.UNDEFINED</code>.</p> <p>The audio data must be in the PCM audio format and sample rate, as reported in <code>PlatformCapabilities</code> returned from the <code>IAudioSinkManager.getPlatformCapabilities()</code> function.</p> <p>Once the data in an audio frame buffer has been fully passed to or processed by the mixer, the Audio Sink shall free the handle by calling <code>IAVBuffer.free()</code>.</p>"},{"location":"halif/audio_sink/current/audio_sink/#secure-audio-processing","title":"Secure Audio Processing","text":"<p>If any audio decoder supports SAP in non-tunnelled mode then the Audio Sink HAL must also support SAP to be able to process secure AV buffers of decoded PCM data, otherwise SAP support is optional.</p>"},{"location":"halif/audio_sink/current/audio_sink/#clear-pcm-audio-playback","title":"Clear PCM Audio Playback","text":"<p>PCM stream data can originate in the RDK media pipeline from multiple sources; from an application, from the RDK middleware or from a software audio decoder. In these cases the PCM data is passed directly to the Audio Sink HAL.</p> <p>Clear PCM audio is copied into a non-secure AV Buffer and is routed to the <code>IAudioSinkController</code> where it is queued for mixing.</p>"},{"location":"halif/audio_sink/current/audio_sink/#tunnelled-audio-passthrough-mode","title":"Tunnelled Audio &amp; Passthrough Mode","text":"<p>The Audio Sink HAL cannot handle audio frame buffers when tunnelled audio is exclusively in use or when audio passthrough mode is enabled.</p> <p>In these cases an Audio Decoder does not return audio frame buffer handles that can be passed to the Audio Sink.</p> <p>The Audio Sink HAL is still used to control the audio stream volume, mute and volume ramping.</p>"},{"location":"halif/audio_sink/current/audio_sink/#end-of-stream-signalling","title":"End of Stream Signalling","text":"<p>The Audio Decoder shall emit a <code>FrameMetadata</code> with <code>endOfStream=true</code> after all audio frames have been output from the decoder.</p> <p>For PCM audio, a <code>FrameMetadata</code> with <code>endOfStream=true</code> shall be generated by the RDK middleware client after the last audio frame buffer has been passed to the Audio Sink.</p> <p>For non-tunnelled audio, the Audio Sink shall be passed this metadata with the final audio frame buffer or after the last audio frame buffer has been queued by the RDK middleware client.</p> <p>All audio frame buffers queued up in the Audio Sink are expected to continue to be fed into the audio mixer in the usual way, but the Audio Sink is not expecting any further audio buffers to be queued.</p>"},{"location":"halif/audio_sink/current/audio_sink/#audio-sink-states","title":"Audio Sink States","text":"<p>The Audio Sink HAL follows the standard Session State Management paradigm.</p> <p>When an Audio Sink session enters a <code>FLUSHING</code> or <code>STOPPING</code> transitory state it shall free any AV buffers it is holding.</p> <p>The sequence diagram below shows the behavior of the callbacks.</p> <pre><code>sequenceDiagram\n    box rgb(30,136,229) RDK Audio Sink\n        participant Client as RDK Client\n        participant IAudioSinkEventListener\n        participant IAudioSinkControllerListener\n    end\n    box rgb(249,168,37) Audio Sink Server\n        participant ADC as IAudioSink\n        participant Controller as IAudioSinkController\n    end\n    box rgb(67,160,71) Audio AV Buffer\n        participant IAVBuffer as IAVBuffer\n    end\n\n    Client-&gt;&gt;ADC: registerEventListener(IAudioSinkEventListener)\n\n    Note over ADC: open() transitions from CLOSED -&gt; OPENING -&gt; READY\n\n    Client-&gt;&gt;ADC: open(IAudioSinkControllerListener)\n    ADC--&gt;&gt;IAudioSinkEventListener: onStateChanged(CLOSED -&gt; OPENING)\n    ADC-&gt;&gt;Controller: new\n    ADC--&gt;&gt;IAudioSinkEventListener: onStateChanged(OPENING -&gt; READY)\n    ADC--&gt;&gt;Client: IAudioSinkController\n    Client-&gt;&gt;Controller: setAudioSink(0)\n\n    Note over ADC: start() transitions from READY -&gt; STARTING -&gt; STARTED\n\n    Client-&gt;&gt;Controller: start()\n    ADC--&gt;&gt;IAudioSinkEventListener: onStateChanged(READY -&gt; STARTING)\n    ADC--&gt;&gt;IAudioSinkEventListener: onStateChanged(STARTING -&gt; STARTED)\n\n    Note over Client: Client can now queue\\n audio frame buffers\n\n    Client-&gt;&gt;Controller: queueAudioFrame(pts, bufferHandle=1000, metadata)\n    Client-&gt;&gt;Controller: queueAudioFrame(pts, bufferHandle=1001, metadata)\n    Controller-&gt;&gt;IAVBuffer: free(bufferHandle=1000)\n\n    Note over ADC: flush() transitions from STARTED -&gt; FLUSHING -&gt; STARTED\n\n    Client-&gt;&gt;Controller: flush()\n    ADC--&gt;&gt;IAudioSinkEventListener: onStateChanged(STARTED -&gt; FLUSHING)\n    Controller-&gt;&gt;IAVBuffer: free(bufferHandle=1001)\n    ADC--&gt;&gt;IAudioSinkEventListener: onStateChanged(FLUSHING -&gt; STARTED)\n\n    Client-&gt;&gt;Controller: queueAudioFrame(pts, bufferHandle=1002, metadata)\n\n    Note over ADC: stop() transitions from STARTED -&gt; STOPPING -&gt; READY\n\n    Client-&gt;&gt;Controller: stop()\n    ADC--&gt;&gt;IAudioSinkEventListener: onStateChanged(STARTED -&gt; STOPPING)\n    Controller-&gt;&gt;IAVBuffer: free(bufferHandle=1002)\n    ADC--&gt;&gt;IAudioSinkEventListener: onStateChanged(STOPPING -&gt; READY)\n\n    Note over ADC: close() transitions from READY -&gt; CLOSING -&gt; CLOSED\n\n    Client-&gt;&gt;ADC: close()\n    ADC--&gt;&gt;IAudioSinkEventListener: onStateChanged(READY -&gt; CLOSING)\n    ADC-&gt;&gt;Controller: delete\n    ADC--&gt;&gt;IAudioSinkEventListener: onStateChanged(CLOSING -&gt; CLOSED)\n\n    Client-&gt;&gt;ADC: unregisterEventListener(IAudioSinkEventListener)</code></pre>"},{"location":"halif/av_buffer/current/av_buffer/","title":"AV Buffer","text":"<p>The AV Buffer HAL manages both secure and non-secure memory heaps and pools for the media pipeline and related A/V HAL components.</p> <ul> <li>An AV buffer typically stores audio or video data, which may be in either encrypted or clear form.</li> <li>Secure memory buffers handle decrypted data when DRM, conditional access, or other secure decryption mechanisms are used.</li> <li>Non-secure memory is allocated for encrypted data from a media player source until it is decrypted into a secure memory buffer.</li> <li>If a media player processes only clear (unencrypted) audio or video data, non-secure memory buffers can be used throughout from source to decoder.</li> <li>AV memory buffers are referenced by handles as they move through the media pipeline and across HAL interfaces.</li> </ul>"},{"location":"halif/av_buffer/current/av_buffer/#references","title":"References","text":"<p>Info</p> Interface Definition av_buffer/current API Documentation TBD - Doxygen HAL Interface Type AIDL and Binder Initialization - TBC systemd - hal-av_buffer.service VTS Tests TBC Reference Implementation - vComponent https://github.com/rdkcentral/rdk-halif-aidl/tree/main/av_buffer/current"},{"location":"halif/av_buffer/current/av_buffer/#related-pages","title":"Related Pages","text":"<p>Tip</p> <ul> <li>Audio Decoder</li> <li>Audio Sink</li> <li>AV Clock</li> <li>Session State Management</li> <li>Video Decoder</li> </ul>"},{"location":"halif/av_buffer/current/av_buffer/#implementation-requirements","title":"Implementation Requirements","text":"# Requirement Comments HAL.AVBUF.1 AV buffer handles shall be unique across all memory pools and heaps, including the vendor video frame pool and audio frame pool. HAL.AVBUF.2 Pool handles shall be unique across all memory pools and heaps. HAL.AVBUF.3 Buffer allocations from pools are made to fit a single video frame or audio frame. HAL.AVBUF.4 The last buffer allocated from a pool may be trimmed to reduce its allocated size down. HAL.AVBUF.5 Metrics on heap usage can be retrieved. HAL.AVBUF.6 Metrics on pool usage can be retrieved. HAL.AVBUF.7 Memory buffers allocated from a secure memory pool cannot be mapped into the address space of unprivileged processes and must meet secure video path or secure audio path requirements. Only vendor layer trusted entities can access secure memory (e.g. TA or secure hardware peripheral). HAL.AVBUF.8 The size of the heaps and pools shall be determined by the vendor to meet the platform and product requirements for audio and video. HAL.AVBUF.9 A helper library shall be provided to allow middleware processes to map and unmap non-secure buffers, and copy data to secure and non-secure buffers."},{"location":"halif/av_buffer/current/av_buffer/#interface-definition","title":"Interface Definition","text":"Interface Definition File Description <code>IAVBuffer.aidl</code> AV Buffer HAL interface which provides the central API for buffer management. <code>IAVBufferSpaceListener.aidl</code> Pool space listener callback interface. <code>Pool.aidl</code> Pool handle parcelable definition. <code>HeapMetrics.aidl</code> Heap metrics parcelable definition. <code>PoolMetrics.aidl</code> Pool metrics parcelable definition."},{"location":"halif/av_buffer/current/av_buffer/#initialization","title":"Initialization","text":"<p>The systemd <code>hal-av_buffer.service</code> unit file is provided by the vendor layer to start the service and should include\u00a0Wants or Requires directives to start any platform driver services it depends upon.</p> <p>The AV Buffer service depends on the Service Manager to register itself as a service.</p> <p>Upon starting, the service shall register the\u00a0IAVBuffer interface with the Service Manager\u00a0using the String <code>IAVBuffer.serviceName</code> and immediately become operational.</p>"},{"location":"halif/av_buffer/current/av_buffer/#product-customization","title":"Product Customization","text":"<p>AV Buffer provides pools of memory for audio and video decoders, for both compressed and uncompressed data in secure and non-secure forms.</p> <p>The size of the memory pools allocated for the decoders is chosen by the HAL implementation where it is calculated according to the capabilities of the platform decoders, the requirements of the platform and the product requirements.</p> <p>The method of providing secure memory for secure video path and secure audio path is left to the vendor layer to implement, where it can choose the technology best suited for the SoC and platform drivers.\u00a0 All memory buffers are referenced by a handle and a helper library is provided by the vendor layer for the RDK middleware to perform map, unmap and copy operations on the memory buffers.</p>"},{"location":"halif/av_buffer/current/av_buffer/#system-context","title":"System Context","text":"<p>The AV Buffer service provides functionality to multiple clients which exist both inside the RDK middleware and the vendor layer.</p> <p>Applications that stream A/V utilise a GStreamer pipeline in the RDK middleware which understands how to operate the A/V HALs to perform playback.</p> <p>When A/V data flows from the application it gets copied as early as possible into memory buffers allocated from AV Buffer service pools.</p> <p>The video and audio frame pools are managed entirely by the vendor layer, but it is important that any handles representing frame allocations share the same handle space as pool allocations made by applications, so that a handle of any type can be passed to IAVBuffer.free() to be returned to its original pool.</p> <p>Where A/V data frames are encrypted, they are decrypted by the a CDM, which will make a memory buffer allocation from a secure pool (if supported) for the output data.</p> <p></p>"},{"location":"halif/av_buffer/current/av_buffer/#memory-heaps","title":"Memory Heaps","text":"<p>Heaps are blocks of memory managed by the vendor layer that clients can create pools from and are global in the system.</p> <p>Heaps must support the creation of pools by the client which are targeted for use by a specific audio or video decoder instance.</p> <p>Typically a media pipeline client shall create one or more pools from the heaps to make buffer allocations from for audio and video data frames.</p> <p>The platform shall implement 2 heaps which offer secure and non-secure memory.</p> Heap Type Description secureHeap=false The non-secure heap shall be used for audio and video data that is encrypted or does not need to meet secure audio path or secure video path requirements. The heap shall be large enough to handle concurrent decode of all audio and video decoders or the requirements of a given product specification. secureHeap=true The secure heap must be secure SOC memory and cannot be mapped into a non-secure process (i.e. not in any RDK middleware or unprivileged process) and can only be passed by handle between middleware processes. <p>The heap shall be large enough to handle concurrent decode of all audio and video decoders or the requirements of a given product specification.</p> <p>It is mandatory for the AV buffer manager to support both heap types in the APIs but it may report a 0 byte size if a heap is not implemented.</p> <p>The <code>getHeapMetrics()</code> function allows the middleware to interrogate the heap usage data for a specified heap type and it returns a HeapMetrics parcelable with the bytes used out of the bytes total.</p>"},{"location":"halif/av_buffer/current/av_buffer/#memory-pools","title":"Memory Pools","text":"<p>A memory pool is created by a client to make buffer allocations from either the secure or non-secure heap by calling <code>createAudioPool()</code> or <code>createVideoPool()</code>\u00a0with the audio or video resource ID it plans to use if for.</p>"},{"location":"halif/av_buffer/current/av_buffer/#pool-lifecycle","title":"Pool Lifecycle","text":"<p>The size of the memory pool is determined by the vendor layer implementation when the client passes a video or audio resource ID in to <code>createVideoPool()</code> or <code>createAudioPool()</code>.</p> <p>Once a pool is created it is referenced by an Pool handle. When the client has finished with a pool it calls\u00a0destroyPool() with the Pool handle.</p>"},{"location":"halif/av_buffer/current/av_buffer/#pool-handles","title":"Pool Handles","text":"<p>Pool handles are assigned by the AV buffer manager as positive integers (int8_t) and must be globally unique in the system across all heaps and all client connections.</p> <p>The immediate re-use of pool handles after they have been destroyed is discouraged as this could lead to stale pool handles held in the client being used in error and cause unexpected behaviour.</p> <p>The recommended vendor implementation for pool handle assignment is to start at 0 and increment by 1 for each pool allocation made across all of the clients.\u00a0 When pool handle 127 has been allocated, the next handle value can wrap back around to 0 or the next unused pool handle integer value.</p>"},{"location":"halif/av_buffer/current/av_buffer/#pool-implementation-recommendation","title":"Pool Implementation Recommendation","text":"<p>Allocations made from a memory pool for video and audio data shall typically be freed in the same order, but no guarantees are made.</p> <p>It is recommended that the vendor implements a circular buffer for allocations to be made from but allow flexibility in the order of the buffer frees.</p>"},{"location":"halif/av_buffer/current/av_buffer/#av-buffers","title":"AV Buffers","text":"<p>AV buffers are allocated by the client to typically hold a frame of audio or video data.\u00a0 The data may be coded, decoded, encrypted or in the clear, but the AV Buffer Manager has no understanding of the data contents.</p> <p>Only AV buffers that are allocated from a pool created from the non-secure heap can be directly mapped inside an RDK middleware client process for read-write access.\u00a0\u00a0</p>"},{"location":"halif/av_buffer/current/av_buffer/#buffer-lifecycle","title":"Buffer Lifecycle","text":"<p>A client can allocate a new AV buffer from a pool by calling the <code>IAVBuffer.alloc()</code> function with the Pool handle to allocate from and the buffer size.</p> <p>On success, the buffer is returned to the client as an integer handle (int64_t) which must be globally unique in the system across all pools and all client connections.</p> <p>The client can pass ownership of the AV buffer handle to a HAL component (e.g. <code>IAudioDecoderController.decodeBuffer()</code> or <code>IAudioSinkController.queueAudioFrame()</code>) where it will eventually be freed otherwise it must call <code>IAVBuffer.free()</code> itself.</p> <p>If a HAL component (e.g. a decoder or sink) has finished with a buffer that it has taken ownership of then it must be freed and the buffer is returned to its original pool.\u00a0 This can be achieved by calling the public HAL API <code>IAVBuffer.free()</code> or by a private internal call inside the vendor layer which has the same effect.</p> <p>It is important that buffer allocations can be allocated and freed through any client session connection with the AV Buffer Manager service and not restricted to a single client session.</p>"},{"location":"halif/av_buffer/current/av_buffer/#buffer-handles","title":"Buffer Handles","text":"<p>Similar to pool handles, the immediate re-use of AV buffer handles after they have been freed is discouraged as this could lead to stale AV buffer handles held in the client being used in error and cause unexpected behaviour.</p>"},{"location":"halif/av_buffer/current/av_buffer/#handling-out-of-memory-conditions","title":"Handling Out of Memory Conditions","text":"<p>Pools have finite memory resources to allocate from and when its limits are reached it will return an out of memory status on <code>IAVBuffer.alloc()</code> requests.</p> <p>The client can request to be notified when enough space or resources become available for an allocation of a specific size from a pool by calling <code>notifyWhenSpaceAvailable()</code>.</p> <p>The AV Buffer Manager shall make a callback to <code>onSpaceAvailable()</code> on the <code>IAVBufferSpaceListener</code> interface passed in the <code>createAudioPool()</code> or <code>createVideoPool()</code> call when the pool was created.</p> <p>The client must guarantee that its <code>IAVBufferSpaceListener</code> interface instance remains available for the lifetime of the memory pool it was intended for and can only be destroyed after the related <code>destroyPool()</code> call has returned.</p>"},{"location":"halif/av_buffer/current/av_buffer/#audio-video-frame-pools","title":"Audio &amp; Video Frame Pools","text":"<p>The audio and video frame pools are allocated from privately inside the vendor layer by the audio and video decoders.</p> <p>In tunnelled mode the frame buffer allocations are automatically freed when they are no longer needed by the downstream AV pipeline vendor components.</p> <p>In non-tunnelled mode the client is passed these handles back from the decoder and may still be in possession of them when an AV pipeline is being stopped or flushed. In this case the client must free the frame buffer handles by calling IAVBuffer.free().</p>"},{"location":"halif/av_buffer/current/av_buffer/#media-pipeline-example","title":"Media Pipeline Example","text":"<p>The sequence diagram below provides an example of a secure media pipeline implementation.</p> <p>The AppSource is delivered encrypted audio and video frames and it creates 2 non-secure memory pools for these types of frames.</p> <p>The CDM is handed the non-secure encrypted audio and video frame buffers and decrypts them into secure buffers of the same size. \u00a0It uses 2 secure memory pools for audio and video decrypted frames.</p> <p>After the media pipeline has a secure buffer decoded by an audio or video decoder it can free the buffer.</p> <p>Note: The diagram below does not show how multiple audio and video buffers may be allocated at once, to allow for buffering points along the media pipeline.</p> <pre><code>sequenceDiagram\n    box rgb(30,136,229) RDK GStreamer Pipeline\n        participant c1 as AppSource\n        participant c2 as CDM\n        participant adc as AudioDecoder\n        participant vdc as VideoDecoder\n    end\n\n    box rgb(249,168,37) AV Buffer Service\n        participant avbm as IAVBuffer\n    end\n\n    box rgb(67,160,71) AV Buffer Helper Library\n        participant avblib as libavbufferhelper.so\n    end\n\n    box Service Manager\n        participant sm as Service Manager\n    end\n\n    c1 -&gt;&gt; sm: getService(IAVBuffer.serviceName)\n\n    Note over c1: AppSource in media pipeline&lt;br/&gt;creates non-secure pools for &lt;br/&gt;encrypted A/V data frames.\n\n    c1 -&gt;&gt; avbm: nonsec-pool-audio = createAudioPool(false, IVideoAudioDecoder.Id=0, spaceListener)\n    c1 -&gt;&gt; avbm: nonsec-pool-video = createVideoPool(false, IVideoVideoDecoder.Id=0, spaceListener)\n\n    Note over c1: Create secure pools&lt;br/&gt;for decrypted A/V data frames.\n\n    c1 -&gt;&gt; avbm: sec-pool-audio = createAudioPool(true, IVideoAudioDecoder.Id=0, spaceListener)\n    c1 -&gt;&gt; avbm: sec-pool-video = createVideoPool(true, IVideoVideoDecoder.Id=0, spaceListener)\n\n    loop while media pipeline is playing\n        Note over c1: Encrypted A/V frames are &lt;br/&gt;loaded into AV buffers.\n\n        Note over c1: Process new audio frame\n        c1 -&gt;&gt; avbm: nonsec-a-handle = alloc(nonsec-pool-audio, audiodata-size)\n        c1 -&gt;&gt; avblib: mapHandle(nonsec-a-handle, &amp;ptr)\n        c1 -&gt;&gt; c1: memcpy(ptr, audiodata, audiodata-size)\n        c1 -&gt;&gt; avblib: unmapHandle(nonsec-a-handle, ptr)\n\n        c1 -&gt;&gt; c2: nonsec-a-handle\n        c2 -&gt;&gt; avbm: sec-a-handle = alloc(sec-pool-audio, audiodata-size)\n        c2 -&gt;&gt; c2: decrypt(sec-a-handle, nonsec-a-handle, audiodata-size)\n        c2 -&gt;&gt; avbm: free(nonsec-a-handle)\n        c2 -&gt;&gt; adc: sec-a-handle\n        adc -&gt;&gt; adc: decodeBuffer(sec-a-handle)\n        adc -&gt;&gt; avbm: free(sec-a-handle)\n\n        Note over c1: Process new video frame\n        c1 -&gt;&gt; avbm: nonsec-v-handle = alloc(nonsec-pool-video, videodata-size)\n        c1 -&gt;&gt; avblib: mapHandle(nonsec-v-handle, &amp;ptr)\n        c1 -&gt;&gt; c1: memcpy(ptr, videodata, videodata-size)\n        c1 -&gt;&gt; avblib: unmapHandle(nonsec-v-handle, ptr)\n        c1 -&gt;&gt; c2: nonsec-v-handle\n\n        c2 -&gt;&gt; avbm: sec-v-handle = alloc(sec-pool-video, videodata-size)\n        c2 -&gt;&gt; c2: decrypt(sec-v-handle, nonsec-v-handle, videodata-size)\n        c2 -&gt;&gt; avbm: free(nonsec-v-handle)\n        c2 -&gt;&gt; vdc: sec-v-handle\n        vdc -&gt;&gt; vdc: decodeBuffer(sec-v-handle)\n        vdc -&gt;&gt; avbm: free(sec-v-handle)\n    end\n\n    Note over c1: When pipeline has finished, the client cleans up&lt;br/&gt;Any buffers held in the media pipeline or in HAL services are freed&lt;br/&gt;Then the pools are destroyed.\n\n    c1 -&gt;&gt; avbm: destroyPool(sec-pool-audio)\n    c1 -&gt;&gt; avbm: destroyPool(sec-pool-video)\n    c1 -&gt;&gt; avbm: destroyPool(nonsec-pool-audio)\n    c1 -&gt;&gt; avbm: destroyPool(nonsec-pool-video)</code></pre>"},{"location":"halif/av_buffer/current/av_buffer/#fragmentation-in-memory-pools","title":"Fragmentation in Memory Pools","text":"<p>There is no guarantee that the IAVBuffer.alloc() and IAVBuffer.free() calls for a pool are in the same order, so the vendor implementation must allow for out-of-order free() calls to be made.</p> <p>The table below shows an example sequence of calls made to allocate and free 3 buffers in an order that should be supported by the AV Buffer Manager service.</p> # Buffer 1 Buffer 2 Buffer 3 1 alloc() 2 alloc() 3 free() 4 alloc() 5 free() 6 free()"},{"location":"halif/av_buffer/current/av_buffer/#buffer-trimming-for-broadcast-sources","title":"Buffer Trimming for Broadcast Sources","text":"<p>MPEG-2 transport stream broadcast sources may load frames progressively as data emerges from TS packet filters and PES filters.</p> <p>For this reason an oversized buffer may be allocated for the incoming audio or video data and once the frame boundary has been determined the buffer is trimmed to its actual size.</p> <p>Only the last allocated memory buffer is capable of being trimmed, which helps manage the pool memory in a circular buffer.</p>"},{"location":"halif/av_buffer/current/av_buffer/#memory-mapping-in-processes","title":"Memory Mapping in Processes","text":"<p>The non-secure shared memory buffers must be mapped inside processes so they can be access for read/write operations.</p> <p>Mapping provides a local process pointer to the memory which cannot be meaningfully shared across processes.</p> <p>The <code>mapHandle()</code> and <code>unmapHandle()</code> functions are provided by a library to provide process-local mapping.</p>"},{"location":"halif/av_buffer/current/av_buffer/#buffer-mapping-helper-library-libavbufferhelperso","title":"Buffer Mapping Helper Library - libavbufferhelper.so","text":"<p>The libavbufferhelper.so user space library is provided by the vendor layer to perform memory mapping/unmapping and copy operations on non-secure AV buffers.</p> <p>RDK middleware processes use the API to copy data into AV buffers represented by a handle.</p> <p>The library <code>mapHandle()</code> function is used to map a non-secure AV buffer handle into a concrete process mapped pointer which allows for data read/write access.</p> <p>The library <code>unmapHandle()</code> function is used to unmap a non-secure AV buffer handle and pointer pair.</p> <p>The library <code>write()</code> function is used to write data from system memory to buffer and works for both secure or non-secure AV buffers.</p> <p>The library <code>copyWithMap()</code> function is used to copy one or more ranges of byte from a source buffer to a destination buffer and works for both secure or non-secure AV buffers.</p> <p>Hint</p> <p>When mapping non-secure handles there is an possible optimisation to map the entire pool space into the process space only once on the first call and subsequent calls to <code>mapHandle()</code> simply provide an offset into the mapped memory.</p>"},{"location":"halif/av_clock/current/av_clock/","title":"AV Clock","text":"<p>The AV Clock HAL service establishes synchronization between audio and video sinks, enabling lip-sync playback by driving them from a shared clock.</p> <p>In broadcast scenarios, the Program Clock Reference (PCR) is provided to the AV Clock HAL. This allows the local System Time Clock (STC) to be synchronized with the broadcast encoder's timing, crucial for preventing buffer underflow or overflow.</p> <p>For IP streaming, clients can manipulate the playback rate, facilitating pause functionality and fine-grained adjustments for clock synchronization with other devices or streams.</p> <p>Audio and video sinks associated with a given AV Clock instance comprise a synchronization group.  Members of a sync group share a common presentation clock.  The AV Clock HAL provides an interface for the application to define the composition of these sync groups, specifying the video sink and the associated audio sink(s).</p>"},{"location":"halif/av_clock/current/av_clock/#references","title":"References","text":"<p>Info</p> Interface Definition av_clock/current API Documentation TBD - Doxygen HAL Interface Type AIDL and Binder Initialization - TBC systemd - hal-av_clock.service VTS Tests TBC Reference Implementation - vComponent https://github.com/rdkcentral/rdk-halif-aidl/tree/main/av_clock/current"},{"location":"halif/av_clock/current/av_clock/#related-pages","title":"Related Pages","text":"<p>Tip</p> <ul> <li>Audio Sink</li> <li>Video Sink</li> <li>Plane Control</li> </ul>"},{"location":"halif/av_clock/current/av_clock/#implementation-requirements","title":"Implementation Requirements","text":"# Requirement Comments HAL.AVCLOCK.1 A single client-server session shall manage a single AV clock instance and sync group. HAL.AVCLOCK.2 Multiple AV clocks may operate concurrently. HAL.AVCLOCK.3 Broadcast PCR samples shall be provided by the client to drive the AV clock instance in PCR mode. HAL.AVCLOCK.4 PCR samples are based on a 27MHz clock from the MPEG standard but delivered in nanosecond units. HAL.AVCLOCK.5 PCR samples can start at any value, contain discontinuities and may wrap according to broadcast encoding rules. HAL.AVCLOCK.6 An AV clock shall support audio with video, video only or audio only. HAL.AVCLOCK.7 Supplementary audio (e.g. audio description) shall be supported in addition to a main audio. HAL.AVCLOCK.8 For non-PCR driven playback, the playback rate shall be adjustable between 0.0 and 2.0, where 0 is paused and 1.0 is normal speed. YouTube requirement is to play between 0.5 and 2.0 with pitch correction. HAL.AVCLOCK.9 A client shall be able to read the current AV clock time. For PCR mode. It should return the \"invalid\" value until the first PCR is received. HAL.AVCLOCK.10 If a client process exits, the AV Clock server shall automatically stop and close any AV Clock instance controlled by that client."},{"location":"halif/av_clock/current/av_clock/#interface-definition","title":"Interface Definition","text":"Interface Definition File Description <code>IAVClockManager.aidl</code> AV Clock Manager HAL interface which provides access to IAVClock resource instances. <code>IAVClock.aidl</code> AV Clock HAL interface for a single AV Clock resource instance. <code>IAVClockController.aidl</code> Controller interface for an IAVClock resource instance. <code>IAVClockControllerListener.aidl</code> Listener callbacks interface to clients from an IAVClockController. <code>IAVClockEventListener.aidl</code> Listener callbacks interface to clients from an IAVClock. <code>Capabilities.aidl</code> Parcelable describing the capabilities of an IAVClock resource instance. <code>ClockMode.aidl</code> Enum list of clock modes. <code>ClockTime.aidl</code> Parcelable holding a clock time. <code>Property.aidl</code> Enum list of AV Clock properties."},{"location":"halif/av_clock/current/av_clock/#initialization","title":"Initialization","text":"<p>The systemd <code>hal-av_clock_manager.service</code> unit file is provided by the vendor layer to start the service and should include Wants or Requires directives to start any platform driver services it depends upon.</p> <p>The AV Clock Manager service depends on the Service Manager to register itself as a service.</p> <p>Upon starting, the service shall register the <code>IAVClockManager</code> interface with the Service Manager using the String <code>IAVClockManager.serviceName</code> and immediately become operational.</p>"},{"location":"halif/av_clock/current/av_clock/#product-customization","title":"Product Customization","text":"<p>The <code>IAVClockManager.getAVClockIds()</code> should return an array of <code>IAVClock.Id</code> parcelables to uniquely represent all of the AV Clock resources supported by the vendor layer. Typically, the ID value starts at 0 for the first AV Clock and increments by 1 for each additional AV Clock.</p> <p>The <code>Capabilities</code> parcelable returned by the <code>IAVClock.getCapabilities()</code> function lists the capabilities of a specific AV Clock resource instance.</p>"},{"location":"halif/av_clock/current/av_clock/#system-context","title":"System Context","text":"<p>The AV Clock service provides functionality to multiple clients inside the RDK middleware.</p> <p>An AV Clock is used to time the delivery of video frames and audio samples from an AV pipeline as a sync group that share a common timebase and reference clock.</p> <p>It can also operate in a video-only or audio-only mode.</p> <p>Each AV pipeline utilises its own instance of an AV clock which operates independently of any other AV clock instance.</p> <p>Clients can access their AV clock time by calling <code>getCurrentClockTime()</code> to synchronise data streams such as closed captions and subtitles.</p> <p>The AV clock is always linked to the timebase source it has been configured to use (PCR, audio master or video master).</p> <p>A PCR driven AV clock may wrap or jump at PCR discontinuities.</p> <pre><code>flowchart TD\n    RDKClientComponent(\"RDKClientComponent\")\n    subgraph Listeners[\"Listeners\"]\n        IAVClockEventListener(\"IAVClockEventListener\")\n        IAVClockControllerListener(\"IAVClockControllerListener\")\n    end\n    subgraph IAVClockHAL[\"Audio Clock HAL\"]\n        IAVClockManager(\"IAVClockManager &lt;br&gt;(Service)\")\n        IAVClock(\"IAVClock &lt;br&gt;(Instance)\")\n        IAVClockController(\"IAVClockController &lt;br&gt;(Instance)\")\n    end\n    subgraph SyncGroup[\"Sync Group\"]\n        AudioFrameQueue(\"Audio Frame Queue\")\n        VideoFrameQueue(\"Video Frame Queue\")\n    end\n      platformAVSync(\"Platform AV Sync\")\n    RDKClientComponent -- getIAVClockIds() &lt;br&gt; getIAVClock() --&gt; IAVClockManager\n    RDKClientComponent -- getCapabilities() &lt;br&gt; getProperty() &lt;br&gt; getState() &lt;br&gt; open() &lt;br&gt; close() &lt;br&gt; registerEventListener() &lt;br&gt; unregisterEventListener() --&gt; IAVClock\n    RDKClientComponent -- setAudioSink() &lt;br&gt; getAudioSink() setSupplementaryAudioSink() setSupplementaryAudioSink() &lt;br&gt; setVideoSink() &lt;br&gt; getVideoSink() &lt;br&gt; start() &lt;br&gt; stop() &lt;br&gt; setClockMode() &lt;br&gt; getClockMode() &lt;br&gt; notifyPCRSample() &lt;br&gt; getCurrentClockTime() &lt;br&gt; setPlaybackRate() &lt;br&gt; getPlaybackRate() --&gt; IAVClockController\n    IAVClockManager --&gt; IAVClock --&gt; IAVClockController\n    IAVClock -- onStateChanged() --&gt; IAVClockEventListener\n    IAVClockController -- onStateChanged() --&gt; IAVClockControllerListener\n    IAVClockEventListener --&gt; RDKClientComponent\n    IAVClockControllerListener --&gt; RDKClientComponent\n    IAVClockController --&gt; platformAVSync\n    %% Sync Group\n    AudioFrameQueue --&gt; platformAVSync\n    VideoFrameQueue --&gt; platformAVSync\n\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef blue fill:#1565C0,stroke:#E0E0E0,stroke-width:2px,color:#E0E0E0;\n    classDef lightGrey fill:#616161,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef wheat fill:#FFB74D,stroke:#424242,stroke-width:2px,color:#000000;\n    classDef green fill:#4CAF50,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef default fill:#1E1E1E,stroke:#E0E0E0,stroke-width:1px,color:#E0E0E0;\n\n    RDKClientComponent:::blue\n    IAVClockManager:::wheat\n    IAVClockController:::wheat\n    IAVClock:::wheat\n    IAVClockControllerListener:::wheat\n    IAVClockEventListener:::wheat\n    platformAVSync:::green\n    AudioFrameQueue:::green\n    VideoFrameQueue:::green</code></pre>"},{"location":"halif/av_clock/current/av_clock/#resource-management","title":"Resource Management","text":"<p>The <code>IAVClockManager</code> provides access to one or more <code>IAVClock</code> sub-interfaces which each represent an AV Clock resource instance offered by the platform.</p> <p>Each <code>IAVClock</code> resource instance is assigned a unique integer ID, which is used in <code>IAVClock.Id.value</code> and can be read from <code>RESOURCE_ID</code> using the <code>IAVClock.getProperty()</code> function.</p> <p>To use an <code>IAVClock</code> resource instance it must be opened by a client, which returns an <code>IAVClockController</code> sub-interface to access clock modes, clock time, the PCR sample notification function and playback rate control.</p> <p>Important</p> <p>Any number of clients can access the <code>IAVClockManager</code> service and get access to the <code>IAVClock</code> sub-interfaces, but only 1 client can <code>open()</code> an <code>IAVClock</code> and access its <code>IAVClockController</code> sub-interface.</p> <p>The diagram below shows the relationship between the interfaces and resource instances.</p> <pre><code>graph LR\n\n    %% --- Encapsulating Everything Inside \"AV Clock Manager HAL\" ---\n    IAVClockManager(\"IAVClockManager\")\n\n    %% --- AV Clock Manager Service Spawns Instances ---\n    IAVClockManager --&gt; ADI1(\"IAVClock &lt;br&gt; ID = 0\")\n    IAVClockManager --&gt; ADI2(\"IAVClock &lt;br&gt; ID = 1\")\n    IAVClockManager --&gt; ADI3(\"IAVClock &lt;br&gt; ID = 2\")\n\n    %% --- Each Instance Has a Controller ---\n    ADI1 --&gt; ADIC1(\"IAVClockController\")\n    ADI2 --&gt; ADIC2(\"IAVClockController\")\n    ADI3 --&gt; ADIC3(\"IAVClockController\")\n\n    %% --- High Contrast Styling (Rounded Box Simulation) ---\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef manager fill:#388E3C,stroke:#1B5E20,stroke-width:2px,color:#FFFFFF;\n    classDef instance1 fill:#FFC107,stroke:#FF8F00,stroke-width:2px,color:#000000;\n    classDef instance2 fill:#FF9800,stroke:#E65100,stroke-width:2px,color:#000000;\n    classDef instance3 fill:#F44336,stroke:#B71C1C,stroke-width:2px,color:#FFFFFF;\n    classDef controller fill:#00ACC1,stroke:#006064,stroke-width:2px,color:#000000;\n\n    %% --- Apply Colors ---\n    class IAVClockManager manager;\n    class ADI1 instance1;\n    class ADI2 instance2;\n    class ADI3 instance3;\n    class ADIC1 instance1;\n    class ADIC2 instance2;\n    class ADIC3 instance3;\n\n    %% --- Consistent Link Colors Per Instance ---\n    %% Yellow for Instance 0\n    linkStyle 0,3 stroke:#AA8800,stroke-width:2px;\n    %% Orange for Instance 1\n    linkStyle 1,4 stroke:#CC5500,stroke-width:2px;\n    %% Red for Instance 2\n    linkStyle 2,5 stroke:#CC2200,stroke-width:2px;</code></pre>"},{"location":"halif/av_clock/current/av_clock/#av-sources-and-sync-groups","title":"AV Sources and Sync Groups","text":"<p>There can be at most 1 Video Sink source and at most 2 Audio Sink sources linked by an AV Clock session in a sync group.</p> <p>The second Audio Sink is intended for supplementary audio where receiver side mixing is required. </p> <p>See https://www.etsi.org/deliver/etsi_en/300400_300499/300468/01.16.01_20/en_300468v011601a.pdf Annex J.</p> <p>The client calls the <code>setAudioSink()</code>, <code>setSupplementaryAudioSink()</code> and <code>setVideoSink()</code> APIs to link audio and video sink instances as a sync group to the AV Clock session.</p> <p>The AV Clock is required for video decoders/sinks operating in tunnelled, non-tunnelled and/or video texture modes.</p> <p>Where a HDMI or composite video source is being tunnelled, no AV clock is utilised.</p>"},{"location":"halif/av_clock/current/av_clock/#clock-modes","title":"Clock Modes","text":"<p>The enum <code>ClockMode</code> provides constants used to specify the mode for the AV clock in calls to <code>setClockMode()</code>.</p> <p>Audio and video master modes are expected to be used in special low latency use cases (e.g. Apple AirPlay, Miracast).</p> enum ClockMode Description AUTO Auto will use AUDIO_MASTER if there is an audio sink linked otherwise VIDEO_MASTER. AUTO is the default clock mode. PCR Use PCR samples as the clock source as provided in successive calls to <code>notifyPCRSample()</code>. PCR mode can only be used on live broadcasts and calls to <code>setPlaybackRate()</code> are not allowed. The AV Clock time is phase locked to the incoming PCR sample values. AUDIO_MASTER Use an audio sink as the clock master. The AV Clock time is crash locked to the first audio sample PTS received for playback. The AV Clock timebase is linked to the audio subsystem clock of the platform. VIDEO_MASTER Use the video sink source as the clock master. The AV Clock time is crash locked to the first video frame PTS received for playback. The AV Clock timebase is driven by the vendor implementation."},{"location":"halif/av_clock/current/av_clock/#mpeg-2-transport-stream-broadcast-timing-with-pcr-clock-mode","title":"MPEG-2 Transport Stream Broadcast Timing with PCR Clock Mode","text":"<p>The MPEG standard defines 4 timing references in the standard.</p> Timing Reference Description System time clock (STC) The STC is a common system clock that is used to time the decode and presentation of elementary audio and video streams. Program clock reference (PCR) The PCR is a sample of the STC delivered in the MPEG-2 transport stream which the decoder should use to regenerate the STC locally. Decode timestamp (DTS) The DTS specifies the time at which an audio or video segment should be passed to the decoder, ahead of presentation. Presentation timestamp (PTS) The PTS specifies the time at which a decoded audio or video segment should be presented. <p>The conceptual diagram below shows how the timing information is used in a typical broadcast setup for video.</p> <p></p>"},{"location":"halif/av_clock/current/av_clock/#pcr-clock-recovery","title":"PCR Clock Recovery","text":"<p>The PCR clock recovery starts in the RDK middleware by filtering the PCR from the adaptation field in the MPEG-2 transport stream and immediately creating a local timestamp using the <code>CLOCK_MONOTONIC_RAW</code> clock to record the reception time.</p> <p>For details of the PCR encoding in adaptation fields see ISO/IEC13818-1 Generic coding of moving pictures and associated audio information Part 1: Systems</p> <p><code>CLOCK_MONOTONIC_RAW</code> is used because it is guaranteed to be driven by the local oscillator and not susceptible to NTP adjustments as <code>CLOCK_MONOTONIC</code> is.</p> <p>For details on <code>CLOCK_MONOTONIC_RAW</code> see https://man7.org/linux/man-pages/man2/clock_gettime.2.html</p> <p>The PCR filtered from the adaptation field is converted to nanoseconds before being passed with the local <code>CLOCK_MONOTONIC_RAW</code> timestamp to the <code>notifyPCRSample()</code> HAL API. This extra local timestamp is made to allow the recovery algorithm to compensate for jitter in the stream and filtering processes.</p> <p>The AV Clock is then responsible for using the PCR samples to drive the clock used for AV sync and presentation.</p> <p>If there are no PCR samples available in the stream, it is the RDK middleware media player responsibility to change the ClockMode.</p> <p>Note that the PCR is passed in nanoseconds to match the timebase units across all other RDK-E HAL components.</p> <p>Broadcast stream sources are subject to behaviors unique to broadcast environments which are covered in the table below, with implementation guidelines.</p> PCR Behavior Description Implementation Guidelines Signal loss Signal and data loss where multiple PCR samples may be lost and cannot be reported through <code>notifyPCRSample()</code>. On gaps in the PCR delivery, it is expected that the vendor implementation continues to advance the STC at its latest calculated rate. Data corruption Data corruption where the PCR sample reported through <code>notifyPCRSample()</code> may contain a bad PCR time. The vendor implementation is responsible for determining that a single value is corrupt and not a discontinuity. After a few samples it can be detected that is it a true discontinuity. PCR discontinuities Planned PCR discontinuities in the broadcast where the PCR sample value may jump unexpectedly. Same as above. Test streams Broadcast test stream playout wrapping where the PCR sample value may jump unexpectedly back to an earlier value as the test stream loops. Same as above. PCR wrap PCR value wrapping where the encoded bits for PCR can no longer increment the value and it needs to wrap around to 0. Wraps occur approximately every 26.5 hours if the PCR is incrementing continuously. A wrap can be treated in the same way as a normal discontinuity. The vendor implement shall perform perfect AV presentation across the PCR wrap, without audio or video jitter or artefacts. <p>Todo</p> <ul> <li>Define free-running mode when PCR and PTS are far apart.</li> <li>What is the AV sync behaviour we need to define?</li> </ul> <p>In all of these cases the AV Clock is responsible for handling these scenarios by relocking the STC clock on a new set of stable PCR clock values.</p> <p>The vendor implementation should fall back to a free-running mode if the difference between the PTS and STC becomes too large to facilitate proper decoding of audio and video. This will be required in many of the cases listed above. For instance, we need smooth decoding until the PCR matches the PTS again after a stream is wrapping.</p>"},{"location":"halif/av_clock/current/av_clock/#extracting-the-broadcast-stc-from-av-clock","title":"Extracting the Broadcast STC from AV Clock","text":"<p>The AV Clock time is a mirror of the MPEG STC clock but in different units.</p> <p>The pseudo code below shows how an application would can accurately access the STC clock time in 90kHz timebase:</p> <pre><code>ClockTime clockTime;\nlong long localTimeNs;\nlong long correctedClockTimeNs;\nstruct timespec monoRawTime;\n\n// Get the AV clock time.\npAVClock-&gt;getCurrentClockTime(&amp;clockTime);\n\n// Get the system monotonic raw clock time 'now' in nanoseconds.\nclock_gettime(CLOCK_MONOTONIC_RAW, &amp;monoRawTime);\nlocalTimeNs = monoRawTime.tv_sec * 1000000000LL;\nlocalTimeNs += monoRawTime.tv_nsec;\n\n// Correct the AV clock time to 'now' local time.\ncorrectedClockTimeNs = clockTime.clockTime + (localTimeNs - clockTime.sampleTimestamp);\n\n// Convert to 90kHz timebase.\nSTC90kHz = (correctedClockTimeNs * 90000LL) / 1000000000LL;\n</code></pre>"},{"location":"halif/av_clock/current/av_clock/#playback-rate","title":"Playback Rate","text":"<p>The playback rate can be set between 0.0 &lt;= rate &lt;= 2.0 by calling <code>setPlaybackRate()</code>, to support a range of common playback speeds used by applications.</p> <p>Some applications may dynamically adjust the playback rate during playback either in response to a customer setting (e.g. YouTube playback speed x1.75) or for playback synchronisation.</p> <p>A playback rate of 0.0 indicates a paused state and the last displayed video frame should be held on the video plane and audio playback should similarly be paused. While paused the AV clock holds its current time value.</p> <p>Playback rates between 0.5 and 2.0 shall perform audio pitch correction to match the audio playback pitch at speed 1.0. Audio should be muted when the playback speed is &lt; 0.5.</p> <p>Live broadcasts which are driven by a PCR clock source cannot support playback rate changes and any attempt to call <code>setPlaybackRate()</code> results in an error.</p>"},{"location":"halif/av_clock/current/av_clock/#av-clock-usage","title":"AV Clock Usage","text":"<p>The sequence diagram below show typical use cases for AV Clock.</p>"},{"location":"halif/av_clock/current/av_clock/#session-for-av-playback-over-ip","title":"Session for AV Playback over IP","text":"<pre><code>sequenceDiagram\n    box rgb(30,136,229) RDK GST Pipeline\n      participant Client as RDK Client\n      participant Listener as IAVClockControllerListener\n    end\n    box rgb(249,168,37) AVClock HAL\n      participant CLKMAN as IAVClockManager\n      participant CLK as IAVClock\n      participant CTRL as IAVClockController\n    end\n\n    Client-&gt;&gt;CLKMAN: getAVClock(0)\n    Client-&gt;&gt;CLK: open(IAVClockControllerListener)\n    CLK--&gt;&gt;Listener: onStateChanged(CLOSED, OPENING)\n    CLK-&gt;&gt;CTRL: create\n    activate CTRL\n    CLK--&gt;&gt;Listener: onStateChanged(OPENING, READY)\n    CLK--&gt;&gt;Client: IAVClockController\n    note over CLK: Default clock mode is AUTO\\nwhen session is opened.\n    Client-&gt;&gt;CTRL: setAudioSink(0)\n    Client-&gt;&gt;CTRL: setVideoSink(0)\n    Client-&gt;&gt;CTRL: start()\n    CLK--&gt;&gt;Listener: onStateChanged(READY, STARTING)\n    CLK--&gt;&gt;Listener: onStateChanged(STARTING, STARTED)\n    loop while playback continues\n      Client-&gt;&gt;CTRL: getCurrentClockTime()\n    end\n    Client-&gt;&gt;CTRL: stop()\n    CLK--&gt;&gt;Listener: onStateChanged(STARTED, STOPPING)\n    CLK--&gt;&gt;Listener: onStateChanged(STOPPING, READY)\n    Client-&gt;&gt;CLK: close(IAVClockController)\n    CLK--&gt;&gt;Listener: onStateChanged(READY, CLOSING)\n    CLK-&gt;&gt;CTRL: destroy\n    CLK--&gt;&gt;Listener: onStateChanged(CLOSING, CLOSED)</code></pre>"},{"location":"halif/av_clock/current/av_clock/#session-for-radio-playback-over-ip","title":"Session for Radio Playback over IP","text":"<pre><code>sequenceDiagram\n    box rgb(30,136,229) RDK GST Pipeline\n      participant Client as RDK Client\n      participant Listener as IAVClockControllerListener\n    end\n    box rgb(249,168,37) AVClock HAL\n      participant CLKMAN as IAVClockManager\n      participant CLK as IAVClock\n      participant CTRL as IAVClockController\n    end\n\n    Client-&gt;&gt;CLKMAN: getAVClock(0)\n    Client-&gt;&gt;CLK: open(IAVClockControllerListener)\n    CLK--&gt;&gt;Listener: onStateChanged(CLOSED, OPENING)\n    CLK-&gt;&gt;CTRL: create\n    activate CTRL\n    CLK--&gt;&gt;Listener: onStateChanged(OPENING, READY)\n    CLK--&gt;&gt;Client: IAVClockController\n    note over CLK: Default clock mode is AUTO\\nwhen session is opened.\n    Client-&gt;&gt;CTRL: setAudioSink(0)\n    Client-&gt;&gt;CTRL: start()\n    CLK--&gt;&gt;Listener: onStateChanged(READY, STARTING)\n    CLK--&gt;&gt;Listener: onStateChanged(STARTING, STARTED)\n    loop while playback continues\n      Client-&gt;&gt;CTRL: getCurrentClockTime()\n    end\n    Client-&gt;&gt;CTRL: stop()\n    CLK--&gt;&gt;Listener: onStateChanged(STARTED, STOPPING)\n    CLK--&gt;&gt;Listener: onStateChanged(STOPPING, READY)\n    Client-&gt;&gt;CLK: close(IAVClockController)\n    CLK--&gt;&gt;Listener: onStateChanged(READY, CLOSING)\n    CLK-&gt;&gt;CTRL: destroy\n    CLK--&gt;&gt;Listener: onStateChanged(CLOSING, CLOSED)</code></pre>"},{"location":"halif/av_clock/current/av_clock/#session-for-av-playback-over-broadcast","title":"Session for AV Playback over Broadcast","text":"<pre><code>sequenceDiagram\n    box rgb(30,136,229) RDK GST Pipeline\n      participant Client as RDK Client\n      participant Listener as IAVClockControllerListener\n    end\n    box rgb(249,168,37) AVClock HAL\n      participant CLKMAN as IAVClockManager\n      participant CLK as IAVClock\n      participant CTRL as IAVClockController\n    end\n\n    Client-&gt;&gt;CLKMAN: getAVClock(0)\n    Client-&gt;&gt;CLK: open(IAVClockControllerListener)\n    CLK--&gt;&gt;Listener: onStateChanged(CLOSED, OPENING)\n    CLK-&gt;&gt;CTRL: create\n    activate CTRL\n    CLK--&gt;&gt;Listener: onStateChanged(OPENING, READY)\n    CLK--&gt;&gt;Client: IAVClockController\n    note over CLK: Default clock mode is AUTO\\nwhen session is opened.\n    Client-&gt;&gt;CTRL: setClockMode(PCR)\n    Client-&gt;&gt;CTRL: setAudioSink(0)\n    Client-&gt;&gt;CTRL: setVideoSink(0)\n    Client-&gt;&gt;CTRL: start()\n    CLK--&gt;&gt;Listener: onStateChanged(READY, STARTING)\n    CLK--&gt;&gt;Listener: onStateChanged(STARTING, STARTED)\n    loop while playback continues\n      note over Client: As PCR is filtered, it is delivered to AV Clock.\n      Client-&gt;&gt;CTRL: notifyPCRSample()\n      note over Client: Periodically, we get clock time for use in subtitle sync with video.\n      Client-&gt;&gt;CTRL: getCurrentClockTime()\n    end\n    Client-&gt;&gt;CTRL: stop()\n    CLK--&gt;&gt;Listener: onStateChanged(STARTED, STOPPING)\n    CLK--&gt;&gt;Listener: onStateChanged(STOPPING, READY)\n    Client-&gt;&gt;CLK: close(IAVClockController)\n    CLK--&gt;&gt;Listener: onStateChanged(READY, CLOSING)\n    CLK-&gt;&gt;CTRL: destroy\n    CLK--&gt;&gt;Listener: onStateChanged(CLOSING, CLOSED)</code></pre>"},{"location":"halif/av_clock/current/av_clock/#session-for-av-playback-with-supplementary-audio-over-broadcast","title":"Session for AV Playback with Supplementary Audio over Broadcast","text":"<pre><code>sequenceDiagram\n    box rgb(30,136,229) RDK GST Pipeline\n      participant Client as RDK Client\n      participant Listener as IAVClockControllerListener\n    end\n    box rgb(249,168,37) AVClock HAL\n      participant CLKMAN as IAVClockManager\n      participant CLK as IAVClock\n      participant CTRL as IAVClockController\n    end\n\n    Client-&gt;&gt;CLKMAN: getAVClock(0)\n    Client-&gt;&gt;CLK: open(IAVClockControllerListener)\n    CLK--&gt;&gt;Listener: onStateChanged(CLOSED, OPENING)\n    CLK-&gt;&gt;CTRL: create\n    activate CTRL\n    CLK--&gt;&gt;Listener: onStateChanged(OPENING, READY)\n    CLK--&gt;&gt;Client: IAVClockController\n    note over CLK: Default clock mode is AUTO\\nwhen session is opened.\n    Client-&gt;&gt;CTRL: setClockMode(PCR)\n    Client-&gt;&gt;CTRL: setAudioSink(0)\n    Client-&gt;&gt;CTRL: setSupplementaryAudioSink(1)\n    Client-&gt;&gt;CTRL: setVideoSink(0)\n    Client-&gt;&gt;CTRL: start()\n    CLK--&gt;&gt;Listener: onStateChanged(READY, STARTING)\n    CLK--&gt;&gt;Listener: onStateChanged(STARTING, STARTED)\n    loop while playback continues\n      note over Client: As PCR is filtered, it is delivered to AV Clock.\n      Client-&gt;&gt;CTRL: notifyPCRSample()\n      note over Client: Periodically, we get clock time for use in subtitle sync with video.\n      Client-&gt;&gt;CTRL: getCurrentClockTime()\n    end\n    Client-&gt;&gt;CTRL: stop()\n    CLK--&gt;&gt;Listener: onStateChanged(STARTED, STOPPING)\n    CLK--&gt;&gt;Listener: onStateChanged(STOPPING, READY)\n    Client-&gt;&gt;CLK: close(IAVClockController)\n    CLK--&gt;&gt;Listener: onStateChanged(READY, CLOSING)\n    CLK-&gt;&gt;CTRL: destroy\n    CLK--&gt;&gt;Listener: onStateChanged(CLOSING, CLOSED)</code></pre>"},{"location":"halif/av_clock/current/av_clock/#session-for-av-playback-over-ip-with-rate-control","title":"Session for AV Playback over IP with Rate Control","text":"<pre><code>sequenceDiagram\n    box rgb(30,136,229) RDK GST Pipeline\n      participant Client as RDK Client\n      participant Listener as IAVClockControllerListener\n    end\n\n    box rgb(249,168,37) AVClock HAL\n      participant CLKMAN as IAVClockManager\n      participant CLK as IAVClock\n      participant CTRL as IAVClockController\n    end\n\n    Client-&gt;&gt;CLKMAN: getAVClock(0)\n    Client-&gt;&gt;CLK: open(IAVClockControllerListener)\n    CLK--&gt;&gt;Listener: onStateChanged(CLOSED, OPENING)\n    CLK-&gt;&gt;CTRL: create\n    activate CTRL\n    CLK--&gt;&gt;Listener: onStateChanged(OPENING, READY)\n    CLK--&gt;&gt;Client: IAVClockController\n    note over CLK: Default clock mode is AUTO\\nwhen session is opened.\n    Client-&gt;&gt;CTRL: setAudioSink(0)\n    Client-&gt;&gt;CTRL: setVideoSink(0)\n    Client-&gt;&gt;CTRL: start()\n    CLK--&gt;&gt;Listener: onStateChanged(READY, STARTING)\n    CLK--&gt;&gt;Listener: onStateChanged(STARTING, STARTED)\n    note over Client: Playback starts in paused state.\n    Client-&gt;&gt;CTRL: setPlaybackRate(0.0)\n    note over Client: AV data is buffered.\n    note over Client: Change playback rate to 1.0 to start playback.\n    Client-&gt;&gt;CTRL: setPlaybackRate(1.0)\n    note over Client: Change playback rate to 2.0 after some time.\n    Client-&gt;&gt;CTRL: setPlaybackRate(2.0)\n    Client-&gt;&gt;CTRL: stop()\n    CLK--&gt;&gt;Listener: onStateChanged(STARTED, STOPPING)\n    CLK--&gt;&gt;Listener: onStateChanged(STOPPING, READY)\n    Client-&gt;&gt;CLK: close(IAVClockController)\n    CLK--&gt;&gt;Listener: onStateChanged(READY, CLOSING)\n    CLK-&gt;&gt;CTRL: destroy\n    CLK--&gt;&gt;Listener: onStateChanged(CLOSING, CLOSED)</code></pre>"},{"location":"halif/key_concepts/hal/hal_feature_profiles/","title":"HAL Feature Profile (<code>HFP</code>)","text":"<p>The HAL Feature Profile (<code>HFP</code>) is a crucial declaration provided by the OEM when delivering a vendor layer implementation. It serves two primary purposes:</p> <ul> <li>Test Driver: The <code>HFP</code> informs the vendor test suite, enabling it to conduct targeted testing based on the declared feature set.</li> <li>Capability Declaration: The <code>HFP</code> lists all supported HAL features, allowing for verification against product requirements.</li> </ul>"},{"location":"halif/key_concepts/hal/hal_feature_profiles/#file-syntax-and-schema","title":"File Syntax and Schema","text":"<p>The <code>HFP</code> is structured as a YAML file.  It resides within the vendor layer deliverables, typically in a designated configuration directory (e.g., <code>vendor/&lt;vendor_name&gt;/&lt;platform&gt;/config/hal_feature_profile.yaml</code>).</p> <pre><code>hal_profile: \"TV\"        # Product/Platform identifier\nhal_version: \"1.0.0\"     # HFP schema version\ncomponents:              # List of HAL components\n\n  - name: \"kernel\"        # Component name\n    version: \"5.15.164\"  # Version of the component\n\n  - name: \"avbuffer\"      # Component name\n    aidl_version: 1       # AIDL interface version\n    non_secure_heap_bytes: 1048576 # Example: 1MB non-secure heap\n    secure_heap_bytes: 524288   # Example: 512KB secure heap\n\n  - name: \"videodecoder\"  # Component name\n    aidl_version: 1       # AIDL interface version\n    resources:            # Resource-specific information\n      - id: 0             # Resource identifier\n        codecs: [\"H264\", \"HEVC\"] # Supported codecs for this resource\n      - id: 1             # Resource identifier\n        codecs: [\"MPEG2\", \"AV1\"]  # Supported codecs for this resource\n\n  - name: \"cdm\"           # Component name (Content Decryption Module)\n    resources:            # Supported CDMs and their versions\n      - name: \"PlayReady\"\n        version: \"4.4\"\n      - name: \"Widevine\"\n        version: \"L3\" # Example: Security Level\n      - name: \"Fairplay\"\n        version: \"4.0\" # Example Version\n\n  - name: \"audio_decoder\"\n    aidl_version: 2\n    supported_formats: [\"AAC\", \"MP3\", \"AC3\"]\n\n  - name: \"tuner\"\n    type: \"dvb-c\" # Example: Cable tuner\n    frequency_range: \"50-860 MHz\"\n\n  - name: \"display\"\n    resolution: \"1920x1080\"\n    hdr_support: true\n    interfaces: [\"HDMI\", \"DisplayPort\"]\n\n  - name: \"network\"\n    interfaces: [\"Ethernet\", \"WiFi\"]\n    wifi_standards: [\"802.11a/b/g/n/ac/ax\"]\n\n  - name: \"bluetooth\"\n    version: \"5.2\"\n    profiles: [\"A2DP\", \"HFP\", \"AVRCP\"]\n\n  - name: \"input\"\n    devices: [\"Remote Control\", \"Keyboard\"]\n    types: [\"IR\", \"Bluetooth\", \"RF4CE\"]\n</code></pre>"},{"location":"halif/key_concepts/hal/hal_feature_profiles/#mandatory-and-optional-hals-and-features","title":"Mandatory and Optional HALs and Features","text":"<p>The HFP explicitly lists all HAL components present in the vendor implementation.  While all listed components are considered supported, the HFP can also indicate whether a component or a specific feature within a component is mandatory or optional. This distinction is crucial for product compliance testing.  This can be achieved by adding properties to the component definition, for example:</p> <pre><code>  - name: \"cdm\"\n    mandatory: true # CDM is a mandatory component\n    resources:\n      - name: \"PlayReady\"\n        version: \"4.4\"\n        mandatory: true # PlayReady is mandatory\n      - name: \"Widevine\"\n        version: \"L3\"\n        optional: true # Widevine is optional\n</code></pre>"},{"location":"halif/key_concepts/hal/hal_feature_profiles/#hfp-versioning","title":"HFP Versioning","text":"<p>The <code>hal_version</code> field in the HFP specifies the version of the HFP schema itself.  This allows for future evolution of the HFP structure while maintaining backward compatibility.  The versioning scheme should follow semantic versioning (major.minor.patch).</p>"},{"location":"halif/key_concepts/hal/hal_feature_profiles/#tooling","title":"Tooling","text":"<p>Tools should be developed to parse and validate the HFP file.  This tooling will be essential for both the vendor test suite and for product requirements verification.  The tool should be able to:</p> <ul> <li>Validate the HFP against the schema.</li> <li>Check for mandatory components and features.</li> <li>Compare the HFP against product requirements.</li> <li>Generate reports summarizing the supported features.</li> </ul>"},{"location":"halif/key_concepts/hal/hal_interfaces/","title":"HAL Interface Overview","text":"Status Description \u2705 Complete \ud83d\udcdd Under Review \u26a0\ufe0f Warning \u274c Needs work <p>The interfaces have to go through a few stages to version static interface for AIDL usage, whilst it's untested as a design, or there's major changes required, we cannot not approve first interface version.</p> <ul> <li>Phase 1, basic defined is completed, A/V up and running based on this </li> <li>Phase 2, remove shared common area, upgrade <code>HAL Feature Profile (HPF)</code> based on Phase 1</li> <li>Phase 3, upgrades to interface from feedback</li> <li>Phase 4, approval for first release</li> </ul>"},{"location":"halif/key_concepts/hal/hal_interfaces/#av-components","title":"AV Components","text":"<p>This list provides an overview of various HAL components, their device profiles, and functionality within the system.</p> HAL Component Device Profile Description Interface State (7/7) Documentation State (6/7) L1 Spec (0/7) L2 Spec (0/7) L3 Spec (0/7) Audio Decoder All Audio decoder control. \u2705 Phase 1 audio_decoder \ud83d\udcdd Under Review X X X Audio Sink All Audio sink and rendering control. \u2705 Phase 1 \ud83d\udcdd Under Review X X X Audio Mixer All Audio mixing and transcoding control. \u2705 Phase 1 \u274c\"Not Started\" X X X AV Buffer All A/V buffer and pool control. \u2705 Phase 1 \ud83d\udcdd Under Review X X X AV Clock All Clock control for A/V playback. \u2705 Phase 1 \ud83d\udcdd Under Review X X X Video Decoder All Video decoder control. \u2705 Phase 1 \ud83d\udcdd Under Review X X X Video Sink All Video sink and rendering control. \u2705 Phase 1 \ud83d\udcdd Under Review X X X"},{"location":"halif/key_concepts/hal/hal_interfaces/#non-av-components","title":"Non AV Components","text":"<p>This list provides an overview of various HAL components, their device profiles, and functionality within the system.</p> HAL Component Device Profile Description Interface State (1/17) Documentation State (0/17) L1 Spec (0/17) L2 Spec (0/17) L3 Spec (0/17) Plane Control All Video and graphics plane control. \u2705 Phase 1 \ud83d\udcdd Under Review X X X"},{"location":"halif/key_concepts/hal/hal_interfaces/#not-yet-documented","title":"Not Yet Documented","text":"HAL Component Device Profile Description Interface State Documentation State L1 Spec L2 Spec L3 Spec Composite Input TV Composite A/V input control. \u274c\"Not Started\" \u274c\"Not Started\" X X X FFV TV Far field voice DSP control. \u2705 Phase 1 \u274c \"Not Started\" X X X HDMI CEC All HDMI CEC message control. \u2705 Phase 1 \u274c \"Not Started\" X X X HDMI Input TV HDMI A/V input control. \u2705 Phase 1 !\u274c\"Not Started\" X X X HDMI Output STB HDMI A/V output control. \u2705 Phase 1 \u274c \"Not Started\"\" X X X Secapi All Security API. \u2705 Phase 1 \u274c\"Not Started\" X X X Service Manager All Binder service registration and discovery. \u2705 Phase 1 \ud83d\udcdd Under Review X X X Boot All Boot management and reset control. \u2705 Phase 1 \u274c\"Not Started\" X X X Broadcast All Digital TV broadcast control. \u2705 Phase 1 \u274c\"Not Started\" X X X CDM All Content decryption module control for DRM. \u2705 Phase 1 - To Be Removed \u274c\"Not Started\" X X X Common All Common HAL definitions. \u2705 Phase 1 \u274c\"Not Started\" X X X Deep Sleep All Deep sleep control. \u2705 Phase 1 \u274c\"Not Started\" X X X Device Info All Device information. \u2705 Phase 1 \u274c\"Not Started\" X X X Indicator All Front panel LEDs and indicators. \u2705 Phase 1 \u274c\"Not Started\" X X X Panel Output TV TV display panel control. \u2705 Phase 1 \u274c\"Not Started\" X X X Sensor All Integrated sensor management. \u2705 Phase 1 \u274c\"Not Started\" X X X"},{"location":"halif/key_concepts/hal/hal_interfaces/#system-interfaces","title":"System Interfaces","text":"<p>The following </p> HAL Component Device Profile Description Interface State Documentation State L4 Testing Bluetooth All Bluetooth device control. \u26a0\ufe0f Warning \u26a0\ufe0f Warning X Filesystem All Filesystem mounting. \u26a0\ufe0f Warning \u26a0\ufe0f Warning X Graphics All EGL, OpenGL ES and Vulkan graphics. \u26a0\ufe0f Warning \u26a0\ufe0f Warning L4-vendor_system_tests Wi-Fi All Wi-Fi connection control. \u26a0\ufe0f Warning \u26a0\ufe0f Warning X Power Management All Power and energy efficiency control. \u26a0\ufe0f Warning \u26a0\ufe0f Warning X Network Management All Network configuration and monitoring. \u26a0\ufe0f Warning \u26a0\ufe0f Warning X Kernel All Network configuration and monitoring. \u26a0\ufe0f Warning \u26a0\ufe0f Warning X"},{"location":"halif/key_concepts/hal/hal_naming_conventions/","title":"Naming Conventions for the Repository","text":"<p>To ensure consistency and maintainability across the repository, we adhere to the following naming conventions:</p>"},{"location":"halif/key_concepts/hal/hal_naming_conventions/#directory-and-file-naming-for-documentation","title":"Directory and File Naming for Documentation","text":"<ul> <li>Case: All directory and file names MUST be lowercase.</li> <li>Word Separation: Use underscores (<code>_</code>) instead of hyphens (<code>-</code>) or camel case to separate words in directory and file names.</li> <li>Rationale: This convention aligns with Unix-like system structures, ensuring smooth integration, ease of navigation, and simplified automation processes.</li> </ul> <p>Documentation will be located under the <code>docs</code> directory, split into interfaces <code>hal</code>. <code>vsi</code>, then split my module, following the convention below.</p>"},{"location":"halif/key_concepts/hal/hal_naming_conventions/#examples","title":"Examples","text":"<p>Good:</p> <pre><code>docs/audio_decoder/introduction_information.md\n</code></pre> <p>Bad:</p> <pre><code>docs/audio-decoder/intro-information.md       (Hyphen used)\ndocs/audiodecoder/introinformation.md         (No separator)\ndocs/audiodecoder/introInformation.md         (Camel case used)\ndocs/AudioDecoder/intro_information.md        (Incorrect case in directory)\n</code></pre>"},{"location":"halif/key_concepts/hal/hal_naming_conventions/#directory-and-file-naming-for-interfaces","title":"Directory and File Naming for Interfaces","text":"<ul> <li>Case: All directory and file names MUST be lowercase.</li> <li>Camel case: The filename will match the Class defination extended with <code>.aidl</code> the class defination is defined using Camcel case.</li> <li>Rationale: This convention aligns with coding standards used for C++ classes.</li> </ul> <p>Source code will be located under the <code>src</code> directory, then split my module, following the convention below.</p> <p>Good:</p> <pre><code>src/audiodecoder/IAudioDecoderInterface.aidl\n</code></pre> <p>Bad:</p> <pre><code>srcs/audio-decoder/intro-information.md      (Hyphen used)\nsrc/audiodecoder/introinformation.md         (All lower case)\nsrc/audiodecoder/introInformation.md         (Camel case used, but first letter of filename not capitals)\nsrc/AudioDecoder/intro_information.md        (Underscore used)\n</code></pre>"},{"location":"halif/key_concepts/hal/hal_naming_conventions/#interface-naming","title":"Interface Naming","text":"<pre><code>interface IAudioSinkManager\n{\n    /** The service name to publish. To be returned by getServiceName() in the derived class. */\n    const\n    @utf8InCpp String serviceName = \"AudioSinkManager\";\n}\n</code></pre>"},{"location":"halif/key_concepts/hal/hal_naming_conventions/#systemd-naming-of-launch","title":"Systemd Naming of Launch","text":"<p>Naming convention for systemd services follows the convention for documentation i.e. <code>hal-audio_decoder_manager.service</code></p>"},{"location":"halif/key_concepts/hal/hal_naming_conventions/#additional-considerations","title":"Additional Considerations","text":"<ul> <li>Abbreviations: Avoid abbreviations unless they are extremely common and well-understood within the project (e.g., <code>HAL</code>, <code>API</code>, <code>RDK</code>).  Prefer full words for clarity.</li> <li>Length: Keep file and directory names reasonably short and descriptive.  Avoid excessively long names.</li> <li>Special Characters: Do not use special characters (e.g., spaces, punctuation) in file or directory names, except for underscores as separators.</li> <li>File Extensions: Use appropriate file extensions for each file type (e.g., <code>.md</code> for Markdown, <code>.aidl</code> for AIDL).</li> <li>Directory Structure:  Consider adding a brief description of the intended directory structure.  For example, what types of files go into the <code>docs</code> directory, <code>src</code> directory, etc.  This helps new contributors understand the organization of the repository.</li> <li>Consistency Across Project: If there are other repositories in the project, it may be a good idea to align naming conventions.</li> </ul>"},{"location":"halif/key_concepts/hal/hal_properties/","title":"HAL <code>setProperty</code> and <code>getProperty</code>","text":"<p>This document provides a concise overview of the <code>setProperty</code> and <code>getProperty</code> methods within RDK-AIDL-HAL. These methods offer a flexible mechanism for interacting with services, encompassing both metadata management and functional control.</p>"},{"location":"halif/key_concepts/hal/hal_properties/#core-functionality","title":"Core Functionality:","text":"<p><code>setProperty(String key, String value)</code>:  Sets a property associated with the service.  The <code>key</code> identifies the property, and the <code>value</code> provides the data to be stored or used.</p> <p><code>getProperty(String key)</code>: Retrieves the value of a specified property. The <code>key</code> identifies the property to retrieve.</p>"},{"location":"halif/key_concepts/hal/hal_properties/#key-considerations","title":"Key Considerations:","text":"<ul> <li> <p>Implementation-Defined Behavior:  The meaning and effect of any given <code>key</code> and <code>value</code> are entirely determined by the service implementing the AIDL interface.  The AIDL itself only defines the communication mechanism, not the semantics.</p> </li> <li> <p>Beyond Metadata: While <code>setProperty</code> and <code>getProperty</code> can be used for storing and retrieving metadata (e.g., object names, versions), they are not limited to this purpose.  </p> </li> </ul> <p>They can be used to:</p> <ul> <li>Control Service Behavior: Setting a property might trigger an action, change a service's state, or modify its operational parameters.</li> <li> <p>Retrieve Service State: Getting a property might return the current state of a component, a calculated value, or any other information the service chooses to expose.</p> </li> <li> <p>General-Purpose Communication: Think of these methods as a generic communication channel. The AIDL defines the channel (key-value pairs), but the service defines the \"language\" spoken over that channel (the meaning of each key).</p> </li> </ul>"},{"location":"halif/key_concepts/hal/hal_properties/#example-use-cases","title":"Example Use Cases:","text":"<ul> <li>Configuration: <code>setProperty(\"logLevel\", \"DEBUG\")</code> could set the logging verbosity.</li> <li>State Management: <code>getProperty(\"connectionStatus\")</code> might return the current connection state.</li> <li>Command Execution: <code>setProperty(\"reboot\", \"true\")</code> could trigger a reboot.</li> <li> <p>Data Retrieval: <code>getProperty(\"sensorData\")</code> might return sensor readings.</p> </li> <li> <p>No Inherent Semantics:  The AIDL interface itself imposes no restrictions on the types of data that can be stored or retrieved, nor does it define what any particular key should represent.  The service is solely responsible for defining and managing these.</p> </li> </ul>"},{"location":"halif/key_concepts/hal/hal_properties/#best-practices","title":"Best Practices:","text":"<ul> <li>Documentation is Crucial: Service developers should clearly document the available properties, their meanings, valid value ranges, and any side effects.  This is essential for clients to use the interface correctly.</li> <li>Consistent Key Naming: Employ a consistent naming convention for properties to improve readability and maintainability.</li> <li>Error Handling: Services should handle invalid property keys or values gracefully, possibly by returning error codes or throwing exceptions.</li> </ul> <p>In summary: <code>setProperty()</code> and <code>getProperty()</code> are powerful and flexible tools.  They can be used for metadata, configuration, state management, and more.  However, their true potential is realized when service developers thoroughly document and carefully design the properties they expose, ensuring clear communication and predictable behavior for clients.</p>"},{"location":"halif/key_concepts/hal/hal_session_state_management/","title":"Session State Management","text":"<p>Several of the HAL services follow the same session state management paradigm and share a common pattern for state transitions and notifications.</p> <p>Any HAL service that handles AV data buffers will follow the session state management described in this section.</p> <p>Where resource instances managed by a HAL service, often a sub-interface is offered to manage that specific resource (e.g. <code>IAudioDecoderManager</code> provides <code>IAudioDecoder</code>\u00a0resource instance sub-interfaces).\u00a0 In this case each of the resource instances operates its own session state machine.</p> <p>Not all states may be applicable to all HAL services, so check the relevant HAL service documentation.</p>"},{"location":"halif/key_concepts/hal/hal_session_state_management/#hal-aidl-definitions","title":"HAL AIDL Definitions","text":"<p>See <code>State.aidl</code> in Common.</p>"},{"location":"halif/key_concepts/hal/hal_session_state_management/#implementation-requirements","title":"Implementation Requirements","text":"Requirement Comments HAL.STATE.1 When a function is called which changes state, an initial <code>onStateChanged()</code> callback shall occur indicating the new transitory state within 10ms. HAL.STATE.2 When a function is called which changes state, the final <code>onStateChanged()</code> callback shall occur indicating the new target state within 500ms."},{"location":"halif/key_concepts/hal/hal_session_state_management/#hal-service-component-states","title":"HAL Service Component States","text":"<p>When a service instance has finished initialising, its initial state is\u00a0<code>CLOSED</code>.</p> <p>A HAL service notifies the client of state changes through the <code>&lt;Listener&gt;.onStateChanged()</code>\u00a0callback which is usually registered with the <code>registerEventListener()</code> function.</p> <p>The functions which cause a state transition; <code>open()</code>, <code>close()</code>, <code>start()</code>, <code>stop()</code> and <code>flush()</code> cause the component to enter a transitory state for a period of time until it enters it target state.\u00a0 Both the transitory state change and target state change are both notified to the client through the <code>onStateChanged()</code>\u00a0callback.</p> <p>If an internal error occurs during the <code>OPENING</code>\u00a0or <code>STARTING</code> transitory states, then it cannot transition to the new target state, but instead returns to the previous state which is notified to the client through the <code>onStateChanged()</code>\u00a0callback.</p> enum State State Type Description UNKNOWN Transitory The initial HAL service session state while initialising, before transitioning to the\u00a0<code>CLOSED</code>\u00a0state. CLOSED Non-transitory Initial state entered after initialisation. OPENING Transitory The HAL service session is transitioning from CLOSED to the <code>READY</code>\u00a0state. READY Non-transitory The HAL service session is open and ready to start, but in a stopped state. STARTING Transitory The HAL service session is transitioning from READY to the <code>STARTED</code>\u00a0state. STARTED Non-transitory The opened HAL service session has been started. FLUSHING Transitory The started HAL service session is flushing internal state/buffers.\u00a0 Once flushed, the HAL service session returns to the <code>STARTED</code>\u00a0state. STOPPING Transitory The started HAL service session is stopping and flushing its internal state/buffers.\u00a0 Once flushed, the HAL service session enters the <code>READY</code>\u00a0state. CLOSING Transitory The HAL service session is transitioning from READY to the <code>CLOSED</code>\u00a0state."},{"location":"halif/key_concepts/hal/hal_session_state_management/#state-diagram","title":"State Diagram","text":"<p>The state diagram below includes the typical function names which trigger state transitions.</p> <p>Transitory states are only held while the HAL service performs internal processing to achieve the next target state.</p> <pre><code>stateDiagram-v2\n    direction LR\n    [*] --&gt; UNKNOWN\n    UNKNOWN --&gt; CLOSED: &lt;init&gt;\n\n    CLOSED --&gt; OPENING: open()\n    OPENING --&gt; READY: success\n    OPENING --&gt; CLOSED: &lt;error&gt;\n\n    READY --&gt; STARTING: start()\n    STARTING --&gt; READY: &lt;error&gt;\n    STARTING --&gt; STARTED: success\n\n    STARTED --&gt; FLUSHING: flush()\n    FLUSHING --&gt; STARTED: success\n\n    STARTED --&gt; STOPPING: stop()\n    STOPPING --&gt; READY: success\n\n    READY --&gt; CLOSING: close()\n    CLOSING --&gt; CLOSED: success\n\n    classDef NonTransitory fill:#1976D2, color:white, font-weight:bold;\n    classDef Transitory fill:#90CAF9, color:black, font-weight:bold;\n    class CLOSED,READY,STARTED NonTransitory\n    class UNKNOWN,OPENING,CLOSING,STARTING,STOPPING,FLUSHING Transitory</code></pre>"},{"location":"halif/key_concepts/hal/hal_session_state_management/#state-change-callbacks-sequence","title":"State Change Callbacks Sequence","text":"<p>The sequence diagram below shows the typical behaviour of the state machine and the expected callbacks.</p> <p>Many HAL services allow for multiple callback listeners to be registered and each registered listener would be notified of the state changes.</p> <pre><code>sequenceDiagram\n    box rgb(30,136,229) Client Component\n        participant Client as Client to &lt;br&gt;HAL service\n        participant Listener as Callback Listener\n    end\n    box rgb(249,168,37) HAL Component\n        participant HAL as HAL Service\n    end\n\n    Client-&gt;&gt;HAL: registerEventListener(... callback listener...)\n    Note over HAL: open() transitions from CLOSED -&gt; OPENING -&gt; READY\n\n    Client-&gt;&gt;HAL: open()\n    HAL--&gt;&gt;Listener: onStateChanged(CLOSED -&gt; OPENING)\n    HAL--&gt;&gt;Listener: onStateChanged(OPENING -&gt; READY)\n\n    Note over HAL: start() transitions from READY -&gt; STARTING -&gt; STARTED\n\n    Client-&gt;&gt;HAL: start()\n    HAL--&gt;&gt;Listener: onStateChanged(READY -&gt; STARTING)\n    HAL--&gt;&gt;Listener: onStateChanged(STARTING -&gt; STARTED)\n\n    Note over HAL: flush() transitions from STARTED -&gt; FLUSHING -&gt; STARTED\n\n    Client-&gt;&gt;HAL: flush()\n    HAL--&gt;&gt;Listener: onStateChanged(STARTED -&gt; FLUSHING)\n    HAL--&gt;&gt;Listener: onStateChanged(FLUSHING -&gt; STARTED)\n\n    Note over HAL: stop() transitions from STARTED -&gt; STOPPING -&gt; STOPPED\n\n    Client-&gt;&gt;HAL: stop()\n    HAL--&gt;&gt;Listener: onStateChanged(STARTED -&gt; STOPPING)\n    Note over HAL: A flush is also implied by stop().\n    HAL--&gt;&gt;Listener: onStateChanged(STOPPING -&gt; READY)\n\n    Note over HAL: stop() transitions from READY -&gt; CLOSING -&gt; CLOSED\n\n    Client-&gt;&gt;HAL: close()\n    HAL--&gt;&gt;Listener: onStateChanged(READY -&gt; CLOSING)\n    HAL--&gt;&gt;Listener: onStateChanged(CLOSING -&gt; CLOSED)\n\n    Note over HAL: Errors during open() transitions from CLOSED -&gt; OPENING -&gt; CLOSED\n\n    Client-&gt;&gt;HAL: open()\n    HAL--&gt;&gt;Listener: onStateChanged(CLOSED -&gt; OPENING)\n    HAL--&gt;&gt;Listener: onStateChanged(OPENING -&gt; CLOSED)\n\n    Client-&gt;&gt;HAL: unregisterEventListener(... callback listener...)\n</code></pre>"},{"location":"halif/plane_control/current/plane_control/","title":"Plane Control","text":"<p>The Plane Control HAL manages the platform\u2019s video and graphics plane resources, exposing each plane as a resource with readable capabilities.  </p> <p>It enables linking video sources\u2014such as video sinks, HDMI input, and composite input\u2014to a video plane. Additionally, it provides the RDK middleware with a native window graphics plane handle for EGL-based graphics display.  </p> <p>Each plane is configurable through a set of properties that clients can read or modify, either individually or in batches.</p>"},{"location":"halif/plane_control/current/plane_control/#references","title":"References","text":"<p>Info</p> Interface Definition planecontrol/current API Documentation TBD - Doxygen HAL Interface Type AIDL and Binder Initialization - TBC systemd - hal-plane_control.service VTS Tests https://github.com/rdkcentral/rdk-halif-binder-test-planecontrol Reference Implementation - vComponent TBC"},{"location":"halif/plane_control/current/plane_control/#related-pages","title":"Related Pages","text":"<p>Tip</p> <ul> <li>Video Sink</li> </ul>"},{"location":"halif/plane_control/current/plane_control/#implementation-requirements","title":"Implementation Requirements","text":"# Requirement Comments HAL.PLANECONTROL.1 Shall provide APIs to manage the geometry, z-order, visibility and other properties of graphics and video planes for tunnelled and non-tunnelled operational modes of the video pipeline. HAL.PLANECONTROL.2 Shall allow tunnelled video sources from a video decoder/sink, a HDMI input or a composite input to be linked to a video plane for display. HAL.PLANECONTROL.3 Shall provide an API to expose the plane resources and their capabilities for a client to discover. HAL.PLANECONTROL.4 Shall provide an API to atomically set multiple properties of a plane which take effect at the next available vsync. HAL.PLANECONTROL.5 Shall allow only 1 source to be mapped to any given video plane. HAL.PLANECONTROL.6 Shall provide an API to atomically update multiple video source to video plane mappings."},{"location":"halif/plane_control/current/plane_control/#interface-definition","title":"Interface Definition","text":"Interface Definition File Description <code>IPlaneControl.aidl</code> Plane Control HAL interface which provides the central API video and graphics plane management. <code>IPlaneControlListener.aidl</code> Plane Control listener for callbacks. <code>AspectRatio.aidl</code> Enum list of aspect ratios. <code>Capabilities.aidl</code> Parcelable describing a single plane resource capabilities. <code>PlaneType.aidl</code> Enum list of plane types. <code>Property.aidl</code> Enum list of plane properties. <code>PropertyKVPair.aidl</code> Parcelable of a single property key and value pair. <code>SourcePlaneMapping.aidl</code> Parcelable of a single source to plane mapping. <code>SourceType.aidl</code> Enum list of source types used in source plane mapping."},{"location":"halif/plane_control/current/plane_control/#initialization","title":"Initialization","text":"<p>The systemd <code>hal-plane_control.service</code> unit file is provided by the vendor layer to start the service and should include Wants or Requires  directives to start any platform driver services it depends upon.</p> <p>The Plane Control service depends on the Service Manager to register itself as a service.</p> <p>Upon starting, the service shall register the <code>IPlaneControl</code> interface with the Service Manager using the String <code>IPlaneControl.serviceName</code> and immediately become operational.</p>"},{"location":"halif/plane_control/current/plane_control/#product-customization","title":"Product Customization","text":"<p>The <code>IPlaneControl.getCapabilities()</code> returns an array of <code>Capabilities</code> parcelables to uniquely represent all of the plane resources supported by the vendor layer.</p> <p>Typically, the plane index (resource ID) value starts at 0 for the first video plane and increments by 1 for each additional video plane, followed by the graphic plane(s).</p> <p>The <code>Capabilities</code> parcelable returned by the <code>IPlaneControl.getCapabilities()</code> function lists all capabilities supported by a plane resource. - Concurrent control of plane resources is allowed by multiple clients. The RDK middleware is responsible for ensuring only 1 controlling client is active at any given time.</p>"},{"location":"halif/plane_control/current/plane_control/#system-context","title":"System Context","text":"<p>The Plane Control service provides functionality to multiple clients which exist inside the RDK middleware.</p> <p>Typically, video planes are linked to video sources when a GStreamer pipeline is created in the RDK middleware. The geometry of the video planes can be manipulated by the Window Manager through a separate client connection.</p> <p>Native graphics plane windows are taken by the RDK middleware compositor to link graphics display updates from EGL to the hardware.</p> <pre><code>flowchart TD\n    %% --- Components ---\n    RDKClientComponent[\"RDK Client Component\"]\n    IPlaneControlListener[\"IPlaneControlListener\"]\n\n    subgraph Connections[\"Vendor Layer\"]\n        subgraph IPlaneControlHAL[\"Plane Control HAL\"]\n            IPlaneControl[\"IPlaneControl\"]\n        end\n\n        subgraph OutputComponents[\" \"]\n            VideoPlane0[\"Video Plane 0\"]\n            VideoPlane1[\"Video Plane 1\"]\n            VideoPlane2[\"Graphics Plane 2\"]\n        end\n    end\n\n    %% --- Function Calls Over Single Line ---\n    RDKClientComponent -- getCapabilities()\n    getNativeGraphicsWindowHandle()\n    releaseNativeGraphicsWindowHandle()\n    flipGraphicsBuffer()\n    setVideoSourceDestinationPlaneMapping()\n    getVideoSourceDestinationPlaneMapping()\n    getProperty()\n    setProperty()\n    getPropertyMulti()\n    setPropertyMultiAtomic()\n    registerListener()\n    unregisterListener()\n     --&gt; IPlaneControl\n\n    IPlaneControlListener --&gt; RDKClientComponent\n\n    %% --- Wrapped Connections in a Subgraph ---\n        IPlaneControl --&gt; IPlaneControlListener\n        IPlaneControl -.-&gt; VideoPlane0\n        IPlaneControl -.-&gt; VideoPlane1\n        IPlaneControl -.-&gt; VideoPlane2\n\n    %% --- Apply Colors ---\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef blue fill:#1565C0,stroke:#E0E0E0,stroke-width:2px,color:#E0E0E0;\n    classDef lightGrey fill:#616161,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef wheat fill:#FFB74D,stroke:#424242,stroke-width:2px,color:#000000;\n    classDef green fill:#4CAF50,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef default fill:#1E1E1E,stroke:#E0E0E0,stroke-width:1px,color:#E0E0E0;\n\n    RDKClientComponent:::blue\n    IPlaneControl:::wheat\n    IPlaneControlListener:::wheat\n    VideoPlane0:::green\n    VideoPlane1:::green\n    VideoPlane2:::green\n</code></pre>"},{"location":"halif/plane_control/current/plane_control/#resource-management","title":"Resource Management","text":"<p>The <code>IPlaneControl</code> interface provides access to all of the plane resource instances offered by the platform.</p> <p>Each plane resource instance is assigned a unique integer resource ID or index, which is used in the <code>IPlaneControl</code> function calls to indicate which plane is being accessed.</p> <p>Any number of clients can access the <code>IPlaneControl</code> service and access plane settings.</p> <p>The diagram below shows the relationship between the interface and resource instances.</p> <pre><code>graph\n\n    %% --- Encapsulating Everything Inside \"Audio Decoder HAL\" ---\n    subgraph Connections[\"Plane Control HAL\"]\n        IPlaneControl(\"IPlaneControl\")\n\n        %% --- Audio Decoder Manager Service Spawns Instances ---\n        IPlaneControl --&gt; ADI1(\"Video Plane &lt;br&gt; RESOURCE_ID = 0\")\n        IPlaneControl --&gt; ADI2(\"Video Plane &lt;br&gt; RESOURCE_ID = 1\")\n        IPlaneControl --&gt; ADI3(\"Graphics Plane &lt;br&gt; RESOURCE_ID = 2\")\n    end\n\n    %% --- High Contrast Styling (Rounded Box Simulation) ---\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef manager fill:#388E3C,stroke:#1B5E20,stroke-width:2px,color:#FFFFFF;\n    classDef instance1 fill:#FFC107,stroke:#FF8F00,stroke-width:2px,color:#000000;\n    classDef instance2 fill:#FF9800,stroke:#E65100,stroke-width:2px,color:#000000;\n    classDef instance3 fill:#F44336,stroke:#B71C1C,stroke-width:2px,color:#FFFFFF;\n\n\n    %% --- Apply Colors ---\n    class IPlaneControl manager;\n    class ADI1 instance1;\n    class ADI2 instance2;\n    class ADI3 instance3;\n\n    %% --- Consistent Link Colors Per Instance ---\n    %% Yellow for Instance 0\n    linkStyle 0 stroke:#AA8800,stroke-width:2px;\n    %% Orange for Instance 1\n    linkStyle 1 stroke:#CC5500,stroke-width:2px;\n    %% Red for Instance 2\n    linkStyle 2 stroke:#CC2200,stroke-width:2px;</code></pre>"},{"location":"halif/plane_control/current/plane_control/#plane-types-and-fixed-configuration","title":"Plane Types and Fixed Configuration","text":"<p>For the 2 types of planes (video and graphics) there are fixed configurations which they are expected to hold.</p> Plane Type Fixed Configuration Video If there is no video to display on a visible plane, then it shall render transparent black. The z-order is dynamic only for video planes. Primary video plane shall always be listed at resource index 0. Graphics Calls to <code>getNativeGraphicsWindowHandle()</code> will return a handle that can be used to connect with EGL display implementations."},{"location":"halif/plane_control/current/plane_control/#video-planes","title":"Video Planes","text":"<p>Video sources (video sinks, HDMI inputs, and composite inputs) can be mapped to destination video planes for presentation.</p> <p>A video plane can only be mapped to one video source at a time, and any attempt to set additional video sources shall fail.</p> <p>A call to the <code>setVideoSourceDestinationPlaneMapping()</code> allows for multiple sources and planes to be mapped and can perform complex operations such as plane swapping between main and PIP video.</p> <p>The sequence of calls below shows how man video and PIP video can be mapped separately and then swapped.</p>"},{"location":"halif/plane_control/current/plane_control/#main-video-on-plane-0","title":"Main Video on Plane 0","text":"<ul> <li>The main video using video sink 0 is displayed on video plane 0. </li> <li>AV playback is started.</li> </ul> <pre><code>SourcePlaneMapping[] =\n{\n    sourceType = \"SOURCE_VIDEO_SINK\",\n    sourceIndex = 0,\n    destinationPlaneIndex = 0\n}\n</code></pre>"},{"location":"halif/plane_control/current/plane_control/#2-pip-video-on-plane-1","title":"2. PIP Video on Plane 1","text":"<ul> <li>The PIP video using video sink 1 is displayed on video plane 1.</li> <li>AV playback is started.</li> </ul> <pre><code>SourcePlaneMapping[] =\n{\n    sourceType = \"SOURCE_VIDEO_SINK\",\n    sourceIndex = 1,\n    destinationPlaneIndex = 1\n}\n</code></pre>"},{"location":"halif/plane_control/current/plane_control/#3a-swapping-main-and-pip-planes","title":"3a. Swapping Main and PIP Planes","text":"<ul> <li>First variant: The destination plane indices for main and PIP are swapped in a single call.</li> </ul> <pre><code>SourcePlaneMapping[] =\n{\n  sourceType = \"SOURCE_VIDEO_SINK\",\n  sourceIndex = 0,\n  destinationPlaneIndex = 1\n},\n{\n  sourceType = \"SOURCE_VIDEO_SINK\",\n  sourceIndex = 1,\n  destinationPlaneIndex = 0\n}\n</code></pre>"},{"location":"halif/plane_control/current/plane_control/#3b-unmapping-main-and-moving-pip","title":"3b. Unmapping Main and Moving PIP","text":"<ul> <li>Second variant: The destination plane index for PIP is moved to plane 0 and main is unmapped.</li> </ul> <pre><code>SourcePlaneMapping[] =\n{\n    sourceType = \"SOURCE_VIDEO_SINK\",\n    sourceIndex = 0,\n    destinationPlaneIndex = -1 // -1 indicates unmapping\n},\n{\n    sourceType = \"SOURCE_VIDEO_SINK\",\n    sourceIndex = 1,\n    destinationPlaneIndex = 0\n}\n</code></pre>"},{"location":"halif/plane_control/current/plane_control/#stopping-video-display","title":"Stopping Video Display","text":"<p>When video is being stopped, the video source must also be unmapped from the plane.</p> <p>The plane unmapping can technically be performed before or after the video source is stopped.</p> <p>The <code>setVideoSourceDestinationPlaneMapping()</code> function can be used to unmap one or more video sources from planes.</p> <ul> <li>Video sink 0 is unmapped from plane 0.</li> </ul> <pre><code>SourcePlaneMapping[]=\n{\n    sourceType = SOURCE_VIDEO_SINK, \n    sourceIndex = 0, \n    destinationPlaneIndex = -1\n}\n</code></pre>"},{"location":"halif/plane_control/current/plane_control/#z-order","title":"Z-Order","text":"<p>The default z-order for planes is linked to their resource ID (index).</p> <p>The z-order can be changed by setting the <code>ZORDER</code> property on a plane.</p> <p>Higher z-order planes display over the top of lower z-order planes.</p> <p>A virtual background plane of opaque black or ultra-black (RGB=0,0,0 or YUV=0,0,0) shall be used to display when no plane pixel is visible above it.</p> <p>The diagram below shows a typical default plane resource configuration for 2 video planes and a single graphics plane.</p> <p></p>"},{"location":"halif/plane_control/current/plane_control/#compositor","title":"Compositor","text":"<p>The compositor is a platform component responsible for blending the raster in the visible planes using z-order and alpha settings to produce a single output display image.</p> <p>For STB devices the display image is scaled and output over HDMI and for TV devices it is scaled and displayed on the panel.</p> <p>There is explicit HAL API exposed for the compositor as it is expected to be configured and managed privately by the vendor layer implementation based on the plane properties.</p>"},{"location":"halif/plane_control/current/plane_control/#plane-dimensions-geometry-control","title":"Plane Dimensions &amp; Geometry Control","text":"<p>When properties affecting the plane geometry are changed by the client, they shall take immediate effect on the next available vsync.</p> <p>For video planes, if there is already a video frame displayed on a plane that remains visible, then it shall be updated to reflect the new geometry settings.</p> <p>The frameWidth and frameHeight in the Capabilities specify the pixel coordinate system of the plane reference frame, when used for positioning and scaling the plane.  The plane properties X, Y, WIDTH and HEIGHT are all defined in terms of the reference frame geometry.</p> <p>The maxWidth and maxHeight specify the maximum size the plane can be scaled to within the reference frame.</p> <p>While a primary video plane commonly supports full screen display (maxWidth=frameWidth and maxHeight=frameHeight), it may not always be the case for other video planes.</p> <p>If a plane has a size limitation (e.g. 1/4 screen) then the maxWidth and maxHeight must reflect this limitation. </p> <p>There is no limitation on the positioning of a plane within its reference frame.</p> <p></p>"},{"location":"halif/plane_control/current/plane_control/#alpha-blending","title":"Alpha Blending","text":"<p>Where a plane is configured to use a translucent alpha setting (<code>Property::ALPHA = 1..254</code>), the porter-duff operation shall be <code>OVER</code> using pre-multiplied alpha.</p>"},{"location":"halif/plane_control/current/plane_control/#plane-display-latency","title":"Plane Display Latency","text":"<p>The <code>vsyncDisplayLatency</code> in <code>Capabilities</code> indicates the delay of video or graphics presentation changes before final output.</p> <p>For example, video planes may have latency incurred by vendor specific PQ pipelines or MEMC processing and graphics planes may have latency incurred by vendor specific double buffering or composition.</p> <p>Understanding the latencies for each plane is important when performing display synchronisation between different planes.</p> <p>For example, when subtitles on the graphics plane need to be displayed with a particular video frame the application rendering the subtitles needs to understand any latency difference between a video plane and the graphics plane to compensate for any differences.</p>"},{"location":"halif/video_decoder/current/video_decoder/","title":"Video Decoder","text":"<p>The Video Decoder HAL service provides interfaces for passing compressed video to the vendor layer for decoding. If the service supports secure audio processing, it may also handle secure buffers.</p> <p>The output of the video decoder can follow two paths:</p> <ul> <li>Non-tunnelled mode \u2013 The decoded video is returned to the RDK media pipeline as a video frame buffer along with metadata.</li> <li>Tunnelled mode \u2013 The decoded video is passed directly through the vendor layer.</li> </ul> <p>The choice between tunnelled and non-tunnelled video does not affect the operational mode of the audio decoder. It is possible to have tunnelled video while using non-tunnelled audio.</p> <p>The video decoder's operational mode can be selected by the client upon initialization.</p> <p>The RDK middleware GStreamer pipeline includes a dedicated RDK Video Decoder element, specifically designed to integrate with the Video Decoder HAL interface.</p>"},{"location":"halif/video_decoder/current/video_decoder/#references","title":"References","text":"<p>Info</p> Interface Definition video_decoder/current API Documentation TBD HAL Interface Type AIDL and Binder Initialization - TBC systemd - hal-video_decoder.service VTS Tests TBC Reference Implementation - vComponent https://github.com/rdkcentral/rdk-halif-aidl/tree/main/videodecoder/current"},{"location":"halif/video_decoder/current/video_decoder/#related-pages","title":"Related Pages","text":"<p>Tip</p> <ul> <li>Video Sink</li> <li>AV Buffer</li> <li>Session State Management</li> </ul>"},{"location":"halif/video_decoder/current/video_decoder/#implementation-requirements","title":"Implementation Requirements","text":"# Requirement Comments HAL.VIDEODECODER.1 Video elementary stream data shall be passed to the video decoder to be decoded as frames. Decontainerisation and demuxing are performed by the RDK AV pipeline before the video decoder. HAL.VIDEODECODER.2 Encoded video data is passed one frame at a time to the video decoder in stream, file or broadcast delivered order. HAL.VIDEODECODER.3 Decoded video frames are output from the decoder in presentation order. HAL.VIDEODECODER.4 Only one video frame shall be output per output frame callback from the video decoder. HAL.VIDEODECODER.5 Encoded video data shall be passed in shared memory buffers by handle and shall be in either secure or non-secure buffer types. The pool implementation of memory buffers for secure and non-secure memory is implemented by the vendor. See AV Buffer for details. HAL.VIDEODECODER.6 The video decoder shall support a secure video pipeline where encoded and decoded data in secure buffers shall not be exposed to any process outside of the secure video pipeline. Secure coded video input buffers to the video decoder shall always be output in secure decoded frame buffers. HAL.VIDEODECODER.7 The video decoder shall operate in either a tunnelled or non-tunnelled operational mode. Only one of these operational modes needs be supported by the video decoder. HAL.VIDEODECODER.8 The video decoder may optionally operate in a textured video operational mode. HAL.VIDEODECODER.9 The video decoder HAL shall report on the number of video decoder instances supported and their capabilities. HAL.VIDEODECODER.10 An opened video decoder instance shall be configured to decode only a single codec type. No dynamic video codec switching is supported while open.\u00a0 A video decoder instance must be closed and reopened to change the codec type. HAL.VIDEODECODER.11 The video decoder shall be able to decode back to back I-frames. Used in I-frame trick modes. HAL.VIDEODECODER.12 The video decoder shall discard any frames until the first reference frame has been received. HAL.VIDEODECODER.13 If a client process exits, the Video Decoder server shall automatically stop and close any Video Decoder instance controlled by that client."},{"location":"halif/video_decoder/current/video_decoder/#interface-definition","title":"Interface Definition","text":"Interface Definition File Description <code>IVideoDecoderManager.aidl</code> Video Decoder Manager HAL which provides access to\u00a0IVideoDecoder\u00a0resource instances. <code>IVideoDecoder.aidl</code> Video\u00a0Decoder interface for a single video decoder resource instance. <code>IVideoDecoderController.aidl</code> Controller interface for an\u00a0IVideoDecoder\u00a0resource instance. <code>IVideoDecoderControllerListener.aidl</code> Listener callbacks interface to clients from an\u00a0IVideoDecoderController. <code>IVideoDecoderEventListener.aidl</code> Listener callbacks interface to clients from an\u00a0IVideoDecoder. <code>Capabilities.aidl</code> Parcelable describing the capabilities of an\u00a0IVideoDecoder\u00a0resource instance. <code>Codec.aidl</code> Enum list of video codecs. <code>CodecCapabilities.aidl</code> Parcelable describing the capabilities of a codec supported by an\u00a0IVideoDecoder. <code>CSDVideoFormat.aidl</code> Enum list of video codec specific data formats. <code>DynamicRange.aidl</code> Enum list of dynamic ranges. <code>ErrorCode.aidl</code> Enum list of video decoder error codes. <code>FrameMetadata.aidl</code> Parcelable of video frame metadata passed from the video decoder. <code>OperationalMode.aidl</code> Enum list of video decoder operational modes. <code>PixelFormat.aidl</code> Enum list of video pixel formats. <code>Property.aidl</code> Enum list of video decoder properties. <code>PropertyKVPair.aidl</code> Parcelable of a Property and PropertyValue pair. <code>ScanType.aidl</code> Enum list of video frame scan types."},{"location":"halif/video_decoder/current/video_decoder/#initialization","title":"Initialization","text":"<p>The systemd <code>hal-video_decoder_manager.service</code> unit file is provided by the vendor layer to start the service and should include\u00a0 Wants or Requires directives to start any platform driver services it depends upon.</p> <p>The Video Decoder Manager service depends on the Service Manager to register itself as a service.</p> <p>Upon starting, the service shall register the\u00a0<code>IVideoDecoderManager</code>\u00a0interface with the Service Manager\u00a0using the String <code>IVideoDecoderManager.serviceName</code> and immediately become operational.</p>"},{"location":"halif/video_decoder/current/video_decoder/#product-customization","title":"Product Customization","text":"<p>The\u00a0<code>IVideoDecoderManager.getVideoDecoderIds()</code>\u00a0should return an array of\u00a0<code>IVideoDecoder.Id</code>\u00a0parcelables to uniquely represent all of the video decoder resources supported by the vendor layer.\u00a0 Typically, the ID value starts at 0 for the first video decoder and increments by 1 for each additional video decoder.</p> <p>The\u00a0Capabilities\u00a0parcelable returned by the\u00a0IVideoDecoder.getCapabilities()\u00a0function lists all of the\u00a0Codec types and DynamicRange types supported by this video decoder instance and indicates if the secure audio path can be used.</p> <p>A video decoder instance may support any number of video codecs, but can only operate on one compressed video stream in an open session.\u00a0 Concurrent video decode requires multiple video decoder instances to be opened.</p>"},{"location":"halif/video_decoder/current/video_decoder/#system-context","title":"System Context","text":"<p>The Video Decoder HAL can provide functionality to multiple clients.</p> <p>Typically an RDK middleware GStreamer video decoder element will work with a single\u00a0IVideoDecoder\u00a0instance and pass it\u00a0AV Buffer\u00a0handles for decode.</p> <p>The RDK middleware resource management system will examine the number of video decoder resources and their capabilities, so they can be allocated to streaming sessions.</p> <pre><code>flowchart TD\n    RDKClientComponent(\"RDKClientComponent\")\n    subgraph Listeners[\"Listeners\"]\n        IVideoDecoderEventListener(\"IVideoDecoderEventListener\")\n        IVideoDecoderControllerListener(\"IVideoDecoderControllerListener\")\n    end\n    subgraph IVideoDecoderHAL[\"Video Decoder HAL\"]\n        IVideoDecoderManager(\"IVideoDecoderManager &lt;br&gt;(Service)\")\n        IVideoDecoder(\"IVideoDecoder &lt;br&gt;(Instance)\")\n        IVideoDecoderController(\"IVideoDecoderController &lt;br&gt;(Instance)\")\n    end\n    subgraph OutputComponents[\"Output\"]\n        VideoFramePool(\"Video Frame Pool\")\n        VideoFrameQueue[\"Video Frame Queue\"]\n    end\n    RDKClientComponent -- createVideoPool() &lt;br&gt; alloc() &lt;br&gt; free() &lt;br&gt; destroyPool() --&gt; IAVBuffer\n    RDKClientComponent -- getVideoDecoderIds() &lt;br&gt; getVideoDecoder() getSupportedOperationModes()--&gt; IVideoDecoderManager\n    RDKClientComponent -- getCapabilities() &lt;br&gt; getProperty() &lt;br&gt; getPropertyMulti() &lt;br&gt; getState() &lt;br&gt; open() &lt;br&gt; close() &lt;br&gt; registerEventListener() &lt;br&gt; unregisterEventListener()--&gt; IVideoDecoder\n    RDKClientComponent -- registerEventListener() &lt;br&gt; unregisterEventListener() --&gt; IVideoDecoder\n    RDKClientComponent -- start() &lt;br&gt; stop() &lt;br&gt; setProperty() &lt;br&gt; decodeBuffer() &lt;br&gt; flush() &lt;br&gt; signalDiscontinuity() &lt;br&gt; signalEOS() &lt;br&gt; parseCodecSpecificData() --&gt; IVideoDecoderController\n    IVideoDecoderManager --&gt; IVideoDecoder --&gt; IVideoDecoderController\n    IVideoDecoder -- onStateChanged() &lt;br&gt; onDecodeError() --&gt; IVideoDecoderEventListener\n    IVideoDecoderEventListener --&gt; RDKClientComponent\n    IVideoDecoderControllerListener --&gt; RDKClientComponent\n    IVideoDecoderController -- onFrameOutput() --&gt; IVideoDecoderControllerListener\n    IVideoDecoderController -- onUserDataOutput() --&gt; IVideoDecoderControllerListener\n    IVideoDecoderController -- alloc --&gt; VideoFramePool\n    IVideoDecoderManager -- free --&gt; IAVBuffer\n    IVideoDecoderController -- tunneled Video --&gt; VideoFrameQueue\n\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef blue fill:#1565C0,stroke:#E0E0E0,stroke-width:2px,color:#E0E0E0;\n    classDef lightGrey fill:#616161,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef wheat fill:#FFB74D,stroke:#424242,stroke-width:2px,color:#000000;\n    classDef green fill:#4CAF50,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef default fill:#1E1E1E,stroke:#E0E0E0,stroke-width:1px,color:#E0E0E0;\n\n    RDKClientComponent:::blue\n    IVideoDecoderManager:::wheat\n    IVideoDecoderController:::wheat\n    IVideoDecoder:::wheat\n    IAVBuffer:::green\n    IVideoDecoderControllerListener:::wheat\n    IVideoDecoderEventListener:::wheat\n    VideoFramePool:::green\n    VideoFrameQueue:::green</code></pre>"},{"location":"halif/video_decoder/current/video_decoder/#resource-management","title":"Resource Management","text":"<p>The\u00a0<code>IVideoDecoderManager</code> provides access to one or more\u00a0IVideoDecoder\u00a0sub-interfaces which each represent a video decoder resource instance offered by the platform.</p> <p>Each\u00a0IVideoDecoder\u00a0resource instance is assigned a unique integer ID, which is used in\u00a0IVideoDecoder.Id.value\u00a0and can be read from\u00a0RESOURCE_ID\u00a0using the\u00a0IVideoDecoder.getProperty()\u00a0function.</p> <p>To use an\u00a0IVideoDecoder\u00a0resource instance it must be opened by a client, which returns an\u00a0IVideoDecoderController\u00a0sub-interface to access buffer decoding and additional state controls.</p> <p>Important</p> <p>Any number of clients can access the\u00a0<code>IVideoDecoderManager</code>\u00a0service and get access to the\u00a0IVideoDecoder\u00a0sub-interfaces, but only 1 client can\u00a0open()\u00a0an\u00a0IVideoDecoder\u00a0and access its\u00a0IVideoDecoderController\u00a0sub-interface.</p> <p>The diagram below shows the relationship between the interfaces and resource instances.</p> <pre><code>graph LR\n\n    %% --- Encapsulating Everything Inside \"Video Decoder HAL\" ---\n    IVideoDecoderManager(\"IVideoDecoderManager\")\n\n    %% --- Video Decoder Manager Service Spawns Instances ---\n    IVideoDecoderManager --&gt; ADI1(\"IVideoDecoder &lt;br&gt; ID = 0\")\n    IVideoDecoderManager --&gt; ADI2(\"IVideoDecoder &lt;br&gt; ID = 1\")\n    IVideoDecoderManager --&gt; ADI3(\"IVideoDecoder &lt;br&gt; ID = 2\")\n\n    %% --- Each Instance Has a Controller ---\n    ADI1 --&gt; ADIC1(\"IVideoDecoderController\")\n    ADI2 --&gt; ADIC2(\"IVideoDecoderController\")\n    ADI3 --&gt; ADIC3(\"IVideoDecoderController\")\n\n    %% --- High Contrast Styling (Rounded Box Simulation) ---\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef manager fill:#388E3C,stroke:#1B5E20,stroke-width:2px,color:#FFFFFF;\n    classDef instance1 fill:#FFC107,stroke:#FF8F00,stroke-width:2px,color:#000000;\n    classDef instance2 fill:#FF9800,stroke:#E65100,stroke-width:2px,color:#000000;\n    classDef instance3 fill:#F44336,stroke:#B71C1C,stroke-width:2px,color:#FFFFFF;\n    classDef controller fill:#00ACC1,stroke:#006064,stroke-width:2px,color:#000000;\n\n    %% --- Apply Colors ---\n    class IVideoDecoderManager manager;\n    class ADI1 instance1;\n    class ADI2 instance2;\n    class ADI3 instance3;\n    class ADIC1 instance1;\n    class ADIC2 instance2;\n    class ADIC3 instance3;\n\n    %% --- Consistent Link Colors Per Instance ---\n    %% Yellow for Instance 0\n    linkStyle 0,3 stroke:#AA8800,stroke-width:2px;\n    %% Orange for Instance 1\n    linkStyle 1,4 stroke:#CC5500,stroke-width:2px;\n    %% Red for Instance 2\n    linkStyle 2,5 stroke:#CC2200,stroke-width:2px;</code></pre>"},{"location":"halif/video_decoder/current/video_decoder/#codec-support","title":"Codec Support","text":"<p>Each RDK product defines the video codecs it requires for IP streaming, apps and broadcast.</p> <p>Some codecs are subject to third party licensing agreements and may therefore only be included in some products.</p> <p>The list below indicates the list of video codecs which are mandatory for the platform to support as hardware/vendor decode (potentially secure).</p> Codec Typical Use Case Hardware/Vendor Support MPEG-2 H.262 up to 1080P@60fps Broadcast streams, IP streams, files Mandatory AVC H.264 upto HP@L5.1 up to 4Kx2K@30fps Broadcast streams, IP streams, files Mandatory HEVC H.265 upto MP-10@L5.1 up to 4Kx2K@60fps Broadcast streams, IP streams, files Mandatory VP9 upto Profile 2-10 up to 4Kx2K@60fps YouTube, WebM, files Mandatory AV1 upto MP-10@L5.1 up to 4Kx2K@60fps YouTube, WebM, files Mandatory"},{"location":"halif/video_decoder/current/video_decoder/#encrypted-video-playback","title":"Encrypted Video Playback","text":"<p>Encrypted video is copied into a non-secure buffer by the application and then decrypted into a secure buffer. The secure buffer is then decoded by a video decoder accessed through the\u00a0<code>IVideoDecoderController</code>\u00a0interface.</p>"},{"location":"halif/video_decoder/current/video_decoder/#secure-video-processing","title":"Secure Video Processing","text":"<p>Secure video processing (SVP) is a requirement for RDK-E. Video decoder instances shall declare themselves as secure or non-secure by setting\u00a0<code>Capabilities.supportsSecure</code> appropriately.</p> <p>A secure video decoder shall be able to handle secure AV buffers and decoded video frames output from the decoder shall be either contained in secure AV buffers or securely tunnelled in the vendor layer.</p> <p>If any video decoder supports SVP in non-tunnelled mode then the Video Sink HAL must also support SVP to be able to process secure AV buffers of decoded video frames.</p> <p>Markdown Output:</p>"},{"location":"halif/video_decoder/current/video_decoder/#operational-modes","title":"Operational Modes","text":"<p>There are 3 modes that video decoders can operate in.\u00a0 The\u00a0<code>IVideoDecoderManager.getSupportedOperationalModes()</code>\u00a0function must return all operational modes supported by the video decoders in the system.</p> <p>This set of advertised operational modes must operate on all video decoder instances.</p> <p>Tunnelled and non-tunnelled modes cannot operate at the same time.\u00a0 It is optional for video decoders to support both modes as options, but at least one of them must be supported.</p> <p>If both are supported then there shall never be a dynamic switch between the 2 modes while STARTED.</p> <p>The\u00a0<code>OPERATIONAL_MODE</code> property controls the operational mode the video decoder shall use.</p> <p>The enum\u00a0<code>OperationalMode</code>\u00a0provides the constants used to specify operational modes and allows for bitwise-or of multiple values.</p> <p>The video decoder may switch operational modes at any time while in a READY or STARTED\u00a0state.</p> <p>In all modes, AV buffers containing compressed video are passed into the video decoder through calls to <code>decodeBuffer()</code>.</p> Operational Mode Description <code>TUNNELLED</code> Decoded video frames are passed directly to the linked video sink and video plane for rendering. The vendor layer is responsible for AV sync where audio and video streams are linked in the same pipeline. Decoded video frames are never received back in frame buffers over <code>IVideoDecoderControllerListener.onFrameOutput()</code>, but the <code>FrameMetadata</code>\u00a0must still be returned in the usual way. All calls to <code>onFrameOutput()</code> shall have the <code>frameBufferHandle</code> set to -1 to indicate no video frame buffer handle is being passed back. It is optional for video decoders to support tunnelled operational mode. If supported, tunnelled mode may be dynamically enabled or disabled while the video decoder is <code>READY</code> or <code>STARTED</code>\u00a0and may run concurrently with graphics texture mode. Tunnelled mode cannot be used at the same time as non-tunnelled mode. <code>NON_TUNNELLED</code> Decoded video frames are received back in video frame buffers over <code>IVideoDecoderListener.onFrameOutput()</code>. Frames must be received in presentation order. It is optional for video decoders to support non-tunnelled operational mode. If supported, non-tunnelled mode may be dynamically enabled or disabled while the video decoder is <code>READY</code> or <code>STARTED</code>\u00a0and may run concurrently with graphics texture mode. Non-tunnelled mode cannot be used at the same time as tunnelled mode. <code>GRAPHICS_TEXTURE</code> Video frames are converted to NV12 textures. It is optional for video decoders to support graphics texture operational mode. If supported, graphics texture mode may be dynamically enabled or disabled while the video decoder is <code>READY</code> or <code>STARTED</code>\u00a0and may run concurrently with tunnelled or non-tunnelled mode."},{"location":"halif/video_decoder/current/video_decoder/#frame-metadata","title":"Frame Metadata","text":"<p>As video frames are decoded, the metadata which related to the frames must be passed to the client over\u00a0<code>IVideoDecoderControllerListener.onFrameOutput()</code>.</p> <p>In non-tunnelled operating mode, the frame buffer handle and metadata related to the frame must be passed in the same <code>onFrameOutput()</code>\u00a0call.</p> <p>To conserve CPU load, the frame metadata is only passed with the first decoded frame after a\u00a0<code>start()</code>, the first decoded frame after a\u00a0<code>flush()</code>\u00a0or if the frame\u00a0metadata changes.</p> <p>If the frame metadata does not need to be passed, then the\u00a0<code>@nullable FrameMetadata metadata</code>\u00a0parameter should be passed as null in <code>onFrameOutput()</code>.</p> <p>The same rules for frame metadata apply to all operational modes.</p> <p>When operating exclusively in tunnelled mode, if there is no frame metadata to be passed, then no call to <code>onFrameOutput()</code>\u00a0should be made because there is no frame buffer handle or frame metadata to return to the client.</p>"},{"location":"halif/video_decoder/current/video_decoder/#low-latency-mode","title":"Low Latency Mode","text":"<p>A media pipeline is operating in low latency mode when the video decoder and audio decoder (if present) are set with a\u00a0<code>LOW_LATENCY_MODE</code>\u00a0property to 1 (enabled).</p>"},{"location":"halif/video_decoder/current/video_decoder/#video-stream-discontinuities","title":"Video Stream Discontinuities","text":"<p>Where the client has knowledge of PTS discontinuities in the video stream, it shall call\u00a0<code>IVideoDecoderController.signalDiscontinuity()</code> between the AV buffers passed to\u00a0<code>decodeBuffer()</code>.</p> <p>For the first input AV Buffer video frame passed in for decode after the discontinuity, it shall indicate the discontinuity in its next output\u00a0<code>FrameMetadata</code>.</p>"},{"location":"halif/video_decoder/current/video_decoder/#end-of-stream-signalling","title":"End of Stream Signalling","text":"<p>When the client knows it has delivered the final video frame buffer to a decoder it shall then call\u00a0<code>IVideoDecoderController.signalEOS()</code>.</p> <p>The Video Decoder shall continue to decode all buffers previously passed for decode, but no further video buffers should be expected unless the video decoder is first stopped and restarted or is flushed.</p> <p>The Video Decoder shall emit a <code>FrameMetadata</code>\u00a0with\u00a0<code>endOfStream=true</code>\u00a0after all video frames have been output from the decoder.</p>"},{"location":"halif/video_decoder/current/video_decoder/#decoded-video-frame-buffers","title":"Decoded Video Frame Buffers","text":"<p>Decoded video frame buffers are only passed from the video decoder to the client when operating in the non-tunnelled operational mode.</p> <p>If the input AV Buffer that contained the coded video frame was passed in a secure buffer, then the corresponding decoded video frame must be output in a secure video frame buffer.</p> <p>Video frame buffers are passed back as handles in the\u00a0<code>IVideoDecoderControllerListener.onFrameOutput()</code>\u00a0function\u00a0<code>frameBufferHandle</code>\u00a0parameter.\u00a0 If no frame buffer handle is available to pass but the call needs to be made to provide updated FrameMetadata then <code>-1</code> shall be passed as the handle value.</p> <p>The format of the data in the decoded video frame buffer is determined by the vendor driver implementation and does not need to be understood by the RDK middleware.</p> <p>The frame buffer handle is later passed to the Video Sink for queuing before presentation and is then freed.</p> <p>The vendor layer is expected to manage the pool of decoded frame buffers privately and report its size in the <code>OUTPUT_FRAME_POOL_SIZE</code>\u00a0property.</p> <p>If the frame buffer pool is empty then the video decoder cannot output the next decoded frame until a new frame buffer becomes available.\u00a0 While frame output is blocked, it is reasonable for the video decoder service to either buffer additional coded input buffers or to reject new calls to <code>decodeBuffer()</code>\u00a0with a false\u00a0return value.</p>"},{"location":"halif/video_decoder/current/video_decoder/#presentation-time-for-video-frames","title":"Presentation Time for Video Frames","text":"<p>The presentation time base units for video frames is nanoseconds and passed in an int64 (long in AIDL definition) variable type. Audio buffers shared the same time base units of nanoseconds.</p> <p>When coded video frames are passed in through AV Buffer handles to\u00a0<code>IVideoDecoderController.decodeBuffer()</code> the <code>nsPresentationTime</code>\u00a0parameter represents the video frame presentation time.</p> <p>Calls to\u00a0<code>IVideoDecoderControllerListener.onFrameOutput()</code>\u00a0with frame buffer handles (non-tunnelled mode) and/or frame metadata shall use the same\u00a0<code>nsPresentationTime</code>.</p> <p>The video decoder shall output frames in presentation order regardless of the order of input frames which is ordered by the encoder.</p>"},{"location":"halif/video_decoder/current/video_decoder/#video-decoder-states","title":"Video Decoder States","text":"<p>The Video Decoder HAL follows the standard Session State Management paradigm.</p> <p>When an Video Decoder session enters a FLUSHING or STOPPING transitory state it shall free any AV buffers it is holding.</p> <p>The sequence diagram below shows the behaviour of the callbacks.</p> <pre><code>sequenceDiagram\n    box rgb(30,136,229) RDK Video Decoder\n        participant Client as RDK Client\n        participant IVideoDecoderEventListener\n        participant IVideoDecoderControllerListener\n    end\n    box rgb(249,168,37) Video Decoder Server\n        participant ADC as IVideoDecoder\n        participant Controller as IVideoDecoderController\n    end\n    box rgb(67,160,71) Video AV Buffer\n        participant IAVBuffer as IAVBuffer\n    end\n\n    Client-&gt;&gt;ADC: registerEventListener(IVideoDecoderEventListener)\n\n    Note over ADC: open() transitions from CLOSED -&gt; OPENING -&gt; READY\n\n    Client-&gt;&gt;ADC: open(IVideoDecoderControllerListener)\n    ADC--&gt;&gt;IVideoDecoderEventListener: onStateChanged(CLOSED -&gt; OPENING)\n    ADC-&gt;&gt;Controller: new\n    ADC--&gt;&gt;IVideoDecoderEventListener: onStateChanged(OPENING -&gt; READY)\n    ADC--&gt;&gt;Client: IVideoDecoderController\n\n    Note over ADC: start() transitions from READY -&gt; STARTING -&gt; STARTED\n\n    Client-&gt;&gt;Controller: start()\n    ADC--&gt;&gt;IVideoDecoderEventListener: onStateChanged(READY -&gt; STARTING)\n    ADC--&gt;&gt;IVideoDecoderEventListener: onStateChanged(STARTING -&gt; STARTED)\n\n    Note over Client: Client can now&lt;br&gt;send AV buffers\n\n    Client-&gt;&gt;Controller: decodeBuffer(pts, bufferHandle=1)\n    Client-&gt;&gt;Controller: decodeBuffer(pts, bufferHandle=2)\n    Controller--&gt;&gt;IVideoDecoderControllerListener: onFrameOutput(pts, frameBufferHandle=1000, metadata)\n    Controller-&gt;&gt;IAVBuffer: free(bufferHandle=1)\n\n    Note over ADC: flush() transitions from STARTED -&gt; FLUSHING -&gt; STARTED\n\n    Client-&gt;&gt;Controller: flush()\n    ADC--&gt;&gt;IVideoDecoderEventListener: onStateChanged(STARTED -&gt; FLUSHING)\n    Controller-&gt;&gt;IAVBuffer: free(bufferHandle=2)\n    ADC--&gt;&gt;IVideoDecoderEventListener: onStateChanged(FLUSHING -&gt; STARTED)\n\n    Client-&gt;&gt;Controller: decodeBuffer(pts, bufferHandle=3)\n\n    Note over ADC: stop() transitions from STARTED -&gt; STOPPING -&gt; READY\n\n    Client-&gt;&gt;Controller: stop()\n    ADC--&gt;&gt;IVideoDecoderEventListener: onStateChanged(STARTED -&gt; STOPPING)\n    Controller-&gt;&gt;IAVBuffer: free(bufferHandle=3)\n    ADC--&gt;&gt;IVideoDecoderEventListener: onStateChanged(STOPPING -&gt; READY)\n\n    Note over ADC: close() transitions from READY -&gt; CLOSING -&gt; CLOSED\n\n    Client-&gt;&gt;ADC: close()\n    ADC--&gt;&gt;IVideoDecoderEventListener: onStateChanged(READY -&gt; CLOSING)\n    ADC-&gt;&gt;Controller: delete\n    ADC--&gt;&gt;IVideoDecoderEventListener: onStateChanged(CLOSING -&gt; CLOSED)\n\n    Client-&gt;&gt;ADC: unregisterEventListener(IVideoDecoderEventListener)</code></pre>"},{"location":"halif/video_sink/current/video_sink/","title":"Video Sink","text":"<p>The <code>Video Sink</code> HAL service manages the video frame queue and ensures timely delivery of video frames to a video plane, synchronized with the vendor\u2019s AV timing.</p> <p>In non-tunneled video modes, it facilitates the transfer of decoded video frame buffers to the video frame queue for processing.</p> <p>The RDK middleware\u2019s GStreamer pipeline includes a dedicated RDK Video Sink element, specifically designed to integrate seamlessly with the Video Sink HAL interface.</p>"},{"location":"halif/video_sink/current/video_sink/#references","title":"References","text":"<p>Info</p> Interface Definition video_sink/current API Documentation TBD - Doxygen HAL Interface Type AIDL and Binder Initialization - TBC systemd - hal-video_sink.service VTS Tests TBC Reference Implementation - vComponent https://github.com/rdkcentral/rdk-halif-aidl/tree/main/videosink/current"},{"location":"halif/video_sink/current/video_sink/#related-pages","title":"Related Pages","text":"<p>Tip</p> <ul> <li>Video Decoder</li> <li>AV Buffer</li> <li>AV Clock</li> <li>Session State Management</li> </ul>"},{"location":"halif/video_sink/current/video_sink/#implementation-requirements","title":"Implementation Requirements","text":"# Requirement Comments HAL.VIDEOSINK.1 Shall manage a queue of video frames delivered from the client and held ready for presentation, often requiring AV lip sync. HAL.VIDEOSINK.2 Shall support flushing of the internal queue of video frames and notify the client when a flush operation has completed. HAL.VIDEOSINK.3 Shall internally manage the release of video frame handles back to the internal pool after they have finished being presented or during a flush. HAL.VIDEOSINK.4 Shall notify the client when the first frame is presented in the session once opened or after a flush operation. HAL.VIDEOSINK.5 Shall notify the client when a video underflow occurs. A video underflow condition is met if an expected frame is not queued in time for display. HAL.VIDEOSINK.6 Shall provide an API to expose the video sink resources for the client to discover. HAL.VIDEOSINK.7 HAL.VIDEOSINK.8 Video frames decoupled from video planes (destination plane -1) shall continue to be delivered and remain in sync with audio.\u00a0 When coupled to a video plane they shall immediately become visible and be in lip sync. To ensure if/when a video sink source is assigned to a video plane it appears in sync with audio. HAL.VIDEOSINK.9 If a client process exits, the Video Sink server shall automatically stop and close any <code>IVideoSink</code> instance controlled by that client."},{"location":"halif/video_sink/current/video_sink/#interface-definition","title":"Interface Definition","text":"Interface Definition File Description <code>IVideoSinkManager.aidl</code> Video Sink Manager HAL which provides access to\u00a0<code>IVideoSink</code>\u00a0resource instances. <code>IVideoSink.aidl</code> <code>IVideoSink</code> interface for a single video sink resource instance. <code>IVideoSinkController.aidl</code> Controller interface for an\u00a0<code>IVideoSink</code>\u00a0resource instance. <code>IVideoSinkControllerListener.aidl</code> Listener callbacks interface to clients from an\u00a0<code>IVideoSinkController</code>. <code>IVideoSinkEventListener.aidl</code> Listener callbacks interface to clients from an\u00a0<code>IVideoSink</code>. <code>Capabilities.aidl</code> Parcelable describing the capabilities of an\u00a0<code>IVideoSink</code>\u00a0resource instance. <code>Property.aidl</code> Enum list of video sink properties."},{"location":"halif/video_sink/current/video_sink/#initialization","title":"Initialization","text":"<p>The systemd <code>hal-video_sink_manager.service</code> unit file is provided by the vendor layer to start the service and should include\u00a0Wants or Requires directives to start any platform driver services it depends upon.</p> <p>The Video Sink Manager service depends on the Service Manager to register itself as a service.</p> <p>Upon starting, the service shall register the\u00a0<code>IVideoSinkManager</code>\u00a0interface with the Service Manager\u00a0using the String <code>IVideoSinkManager.serviceName</code> and immediately become operational.</p>"},{"location":"halif/video_sink/current/video_sink/#product-customization","title":"Product Customization","text":"<p>The\u00a0<code>IVideoSinkManager.getVideoSinkIds()</code>\u00a0should return an array of\u00a0<code>IVideoSink.Id</code> parcelables to uniquely represent all of the video sink resources supported by the vendor layer.\u00a0 Typically, the ID value starts at 0 for the first video sink and increments by 1 for each additional video sink.</p> <p>The\u00a0<code>Capabilities</code>\u00a0parcelable returned by the\u00a0<code>IVideoSink.getCapabilities()</code> function lists all capabilities supported by this video sink instance.</p> <p>A video sink instance can only operate on one video stream in an open session.\u00a0 Concurrent video streams requires multiple video sink instances to be opened.</p>"},{"location":"halif/video_sink/current/video_sink/#system-context","title":"System Context","text":"<p>The Video Sink HAL can provide functionality to multiple clients.</p> <p>Typically an RDK middleware GStreamer video sink element will work with a single\u00a0<code>IVideoSink</code>\u00a0instance and pass it video frame buffers with associated metadata for display.</p> <p>The RDK middleware resource management system will examine the number of video sink resources and their capabilities, so they can be allocated to streaming sessions.</p> <pre><code>flowchart TD\n    RDKClientComponent(\"RDKClientComponent\")\n    subgraph Listeners[\"Listeners\"]\n        IVideoSinkEventListener(\"IVideoSinkEventListener\")\n        IVideoSinkControllerListener(\"IVideoSinkControllerListener\")\n    end\n    subgraph IVideoSinkHAL[\"Video Sink HAL\"]\n        IVideoSinkManager(\"IVideoSinkManager &lt;br&gt;(Service)\")\n        IVideoSink(\"IVideoSink &lt;br&gt;(Instance)\")\n        IVideoSinkController(\"IVideoSinkController &lt;br&gt;(Instance)\")\n    end\n    subgraph OutputComponents[\"Output\"]\n        VideoPresentation[\"Video Presentation\"]\n    end\n    VideoFramePool(\"Video Frame Pool\")\n    RDKClientComponent -- createVideoPool() &lt;br&gt; alloc() &lt;br&gt; free() &lt;br&gt; destroyPool() --&gt; IAVBuffer\n    RDKClientComponent -- getVideoSinkIds() &lt;br&gt; getVideoSink() getSupportedOperationModes()--&gt; IVideoSinkManager\n    RDKClientComponent -- getCapabilities() &lt;br&gt; getProperty() &lt;br&gt; getState() &lt;br&gt; open() &lt;br&gt; close() &lt;br&gt; registerEventListener() &lt;br&gt; unregisterEventListener()--&gt; IVideoSink\n    RDKClientComponent -- registerEventListener() &lt;br&gt; unregisterEventListener() --&gt; IVideoSink\n    RDKClientComponent -- setVideoDecoder() &lt;br&gt; getVideoDecoder() &lt;br&gt; start() &lt;br&gt; stop() &lt;br&gt; queueVideoFrame() &lt;br&gt; flush() &lt;br&gt; discardFramesUntil() --&gt; IVideoSinkController\n    IVideoSinkManager --&gt; IVideoSink --&gt; IVideoSinkController\n    IVideoSink -- onStateChanged() &lt;br&gt; onFistFrameRendered() &lt;br&gt; onEndOfStream() &lt;br&gt; onVideoUnderflow() &lt;br&gt; onVideoResumed() &lt;br&gt; onFlushComplete() --&gt; IVideoSinkEventListener\n    IVideoSinkEventListener --&gt; RDKClientComponent\n    IVideoSinkControllerListener --&gt; RDKClientComponent\n    IVideoSinkController -- onFrameOutput() --&gt; IVideoSinkControllerListener\n    IVideoSinkController -- onUserDataOutput() --&gt; IVideoSinkControllerListener\n    IVideoSinkController -- free() --&gt; VideoFramePool\n    IAVBuffer -- free() --&gt; VideoFramePool\n    IVideoSinkManager -- free() --&gt; IAVBuffer\n    IVideoSinkController -- tunneled Video --&gt; VideoPresentation\n\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef blue fill:#1565C0,stroke:#E0E0E0,stroke-width:2px,color:#E0E0E0;\n    classDef lightGrey fill:#616161,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef wheat fill:#FFB74D,stroke:#424242,stroke-width:2px,color:#000000;\n    classDef green fill:#4CAF50,stroke:#E0E0E0,stroke-width:2px,color:#FFFFFF;\n    classDef default fill:#1E1E1E,stroke:#E0E0E0,stroke-width:1px,color:#E0E0E0;\n\n    RDKClientComponent:::blue\n    IVideoSinkManager:::wheat\n    IVideoSinkController:::wheat\n    IVideoSink:::wheat\n    IAVBuffer:::green\n    IVideoSinkControllerListener:::wheat\n    IVideoSinkEventListener:::wheat\n    VideoPresentation:::green\n    VideoFramePool:::green</code></pre>"},{"location":"halif/video_sink/current/video_sink/#resource-management","title":"Resource Management","text":"<p>The\u00a0<code>IVideoSinkManager</code>\u00a0provides access to one or more\u00a0<code>IVideoSink</code>\u00a0sub-interfaces which each represent a video sink resource instance offered by the platform.</p> <p>Each\u00a0<code>IVideoSink</code>\u00a0resource instance is assigned a unique integer ID, which is used in the\u00a0<code>IVideoSink.Id.value</code>\u00a0and can be read from\u00a0<code>RESOURCE_ID</code>\u00a0using the\u00a0<code>IVideoSink.getProperty()</code>\u00a0function.</p> <p>To use an\u00a0<code>IVideoSink</code>\u00a0resource instance it must be opened by a client, which returns an\u00a0<code>IVideoSinkController</code>\u00a0sub-interface to access buffer queuing and additional state controls.</p> <p>Any number of clients can access the\u00a0<code>IVideoSinkManager</code>\u00a0service and get access to the\u00a0<code>IVideoSink</code>\u00a0sub-interfaces, but only 1 client can\u00a0<code>open()</code>\u00a0an\u00a0<code>IVideoSink</code>\u00a0and access its\u00a0<code>IVideoSinkController</code>\u00a0sub-interface.</p> <p>The diagram below shows the relationship between the interfaces and resource instances.</p> <pre><code>graph LR\n\n    %% --- Encapsulating Everything Inside \"Audio Decoder HAL\" ---\n    IVideoSinkManager(\"IVideoSinkManager\")\n\n    %% --- Audio Decoder Manager Service Spawns Instances ---\n    IVideoSinkManager --&gt; ADI1(\"IVideoSink &lt;br&gt; ID = 0\")\n    IVideoSinkManager --&gt; ADI2(\"IVideoSink &lt;br&gt; ID = 1\")\n    IVideoSinkManager --&gt; ADI3(\"IVideoSink &lt;br&gt; ID = 2\")\n\n    %% --- Each Instance Has a Controller ---\n    ADI1 --&gt; ADIC1(\"IVideoSinkController\")\n    ADI2 --&gt; ADIC2(\"IVideoSinkController\")\n    ADI3 --&gt; ADIC3(\"IVideoSinkController\")\n\n    %% --- High Contrast Styling (Rounded Box Simulation) ---\n    classDef background fill:#121212,stroke:none,color:#E0E0E0;\n    classDef manager fill:#388E3C,stroke:#1B5E20,stroke-width:2px,color:#FFFFFF;\n    classDef instance1 fill:#FFC107,stroke:#FF8F00,stroke-width:2px,color:#000000;\n    classDef instance2 fill:#FF9800,stroke:#E65100,stroke-width:2px,color:#000000;\n    classDef instance3 fill:#F44336,stroke:#B71C1C,stroke-width:2px,color:#FFFFFF;\n    classDef controller fill:#00ACC1,stroke:#006064,stroke-width:2px,color:#000000;\n\n\n    %% --- Apply Colors ---\n    class IVideoSinkManager manager;\n    class ADI1 instance1;\n    class ADI2 instance2;\n    class ADI3 instance3;\n    class ADIC1 instance1;\n    class ADIC2 instance2;\n    class ADIC3 instance3;\n\n    %% --- Consistent Link Colors Per Instance ---\n    %% Yellow for Instance 0\n    linkStyle 0,3 stroke:#AA8800,stroke-width:2px;\n    %% Orange for Instance 1\n    linkStyle 1,4 stroke:#CC5500,stroke-width:2px;\n    %% Red for Instance 2\n    linkStyle 2,5 stroke:#CC2200,stroke-width:2px;</code></pre>"},{"location":"halif/video_sink/current/video_sink/#video-buffers","title":"Video Buffers","text":"<p>Video frame buffers only pass through the Video Sink while a video decoder is operating in non-tunnelled mode.</p> <p>Video frame buffers entering the Video Sink shall be delivered as\u00a0AV Buffer\u00a0handles with a presentation timestamp and metadata describing the video frame through the\u00a0<code>IVideoSinkController.queueVideoFrame()</code>\u00a0function.</p> <p>The video frame data in the buffer is vendor specific and is not decoded or understood by the RDK middleware.</p> <p>Once the data in a video frame buffer has been presented or upon a flush request, the Video Sink shall free handles by calling <code>IAVBuffer.free()</code>.</p>"},{"location":"halif/video_sink/current/video_sink/#secure-video-processing","title":"Secure Video Processing","text":"<p>Secure video processing (SVP) is a requirement for RDK-E.</p> <p>If any video decoder supports SVP in non-tunnelled mode then the Video Sink HAL must also support SVP to be able to process secure AV buffers of decoded video frames.</p>"},{"location":"halif/video_sink/current/video_sink/#end-of-stream-signalling","title":"End of Stream Signalling","text":"<p>The Video Decoder shall emit a\u00a0<code>FrameMetadata</code>\u00a0with\u00a0<code>endOfStream=true</code> after all video frames have been output from the decoder.</p> <p>For non-tunnelled video, the Video Sink shall be passed this metadata with the final video frame buffer or after the last video frame buffer has been queued by the RDK middleware client.</p> <p>All video frame buffers queued up in the Video Sink are expected to continue to be displayed in the usual way, but the Video Sink is not expecting any further video buffers to be queued.</p>"},{"location":"halif/video_sink/current/video_sink/#video-plane-mapping","title":"Video Plane Mapping","text":"<p>The display of decoded video frames are made on the video plane that has been mapped by a <code>SourceType::VIDEO_SINK</code> and index matching the Video Sink resource instance ID which was specified in the ID when <code>IVideoSinkManager.getVideoSink()</code>\u00a0was called and can also be read back in the <code>RESOURCE_ID</code>\u00a0property of the Video Sink.</p> <p>Setting and changing the mapping requires a call to <code>IPlaneControl.setVideoSourceDestinationPlaneMapping()</code>.</p> <p>Full details are covered in the Plane Control HAL.</p>"},{"location":"halif/video_sink/current/video_sink/#video-sink-states","title":"Video Sink States","text":"<p>The Video Sink HAL follows the standard\u00a0Session State Management\u00a0paradigm.</p> <p>When an Video Sink session enters a <code>FLUSHING</code> or <code>STOPPING</code> transitory state it shall free any AV buffers it is holding.</p> <p>The sequence diagram below shows the behavior of the callbacks.</p> <pre><code>sequenceDiagram\n    box rgb(30,136,229) RDK Video Sink\n        participant Client as RDK Client\n        participant IVideoSinkEventListener\n        participant IVideoSinkControllerListener\n    end\n\n    box rgb(249,168,37) Video Sink Server\n        participant ADC as IVideoSink\n        participant Controller as IVideoSinkController\n    end\n\n    box rgb(67,160,71) Video AV Buffer\n        participant IAVBuffer as IAVBuffer\n    end\n\n    Client-&gt;&gt;ADC: registerEventListener(IVideoSinkEventListener)\n\n    Note over Client,ADC: open() transitions&lt;br/&gt;from CLOSED -&gt; OPENING -&gt; READY\n\n    Client-&gt;&gt;ADC: open(IVideoSinkControllerListener)\n    ADC--&gt;&gt;IVideoSinkEventListener: onStateChanged(CLOSED -&gt; OPENING)\n    ADC-&gt;&gt;Controller: new\n    ADC--&gt;&gt;IVideoSinkEventListener: onStateChanged(OPENING -&gt; READY)\n    ADC--&gt;&gt;Client: IVideoSinkController\n    Client-&gt;&gt;Controller: setVideoDecoder(0)\n\n    Note over Client,ADC: start() transitions&lt;br/&gt;from READY -&gt; STARTING -&gt; STARTED\n\n    Client-&gt;&gt;Controller: start()\n    ADC--&gt;&gt;IVideoSinkEventListener: onStateChanged(READY -&gt; STARTING)\n    ADC--&gt;&gt;IVideoSinkEventListener: onStateChanged(STARTING -&gt; STARTED)\n\n    Note over Client: Client can now queue&lt;br/&gt;Video frame buffers\n\n    Client-&gt;&gt;Controller: queueVideoFrame(pts, bufferHandle=1000, metadata)\n    Client-&gt;&gt;Controller: queueVideoFrame(pts, bufferHandle=1001, metadata)\n    Controller-&gt;&gt;IAVBuffer: free(bufferHandle=1000)\n\n    Note over Client,ADC: flush() transitions&lt;br/&gt;from STARTED -&gt; FLUSHING -&gt; STARTED\n\n    Client-&gt;&gt;Controller: flush()\n    ADC--&gt;&gt;IVideoSinkEventListener: onStateChanged(STARTED -&gt; FLUSHING)\n    Controller-&gt;&gt;IAVBuffer: free(bufferHandle=1001)\n    ADC--&gt;&gt;IVideoSinkEventListener: onStateChanged(FLUSHING -&gt; STARTED)\n\n    Client-&gt;&gt;Controller: queueVideoFrame(pts, bufferHandle=1002, metadata)\n\n    Note over Client,ADC: stop() transitions&lt;br/&gt;from STARTED -&gt; STOPPING -&gt; READY\n\n    Client-&gt;&gt;Controller: stop()\n    ADC--&gt;&gt;IVideoSinkEventListener: onStateChanged(STARTED -&gt; STOPPING)\n    Controller-&gt;&gt;IAVBuffer: free(bufferHandle=1002)\n    ADC--&gt;&gt;IVideoSinkEventListener: onStateChanged(STOPPING -&gt; READY)\n\n    Note over Client,ADC: close() transitions&lt;br/&gt;from READY -&gt; CLOSING -&gt; CLOSED\n\n    Client-&gt;&gt;ADC: close()\n    ADC--&gt;&gt;IVideoSinkEventListener: onStateChanged(READY -&gt; CLOSING)\n    ADC-&gt;&gt;Controller: delete\n    ADC--&gt;&gt;IVideoSinkEventListener: onStateChanged(CLOSING -&gt; CLOSED)\n\n    Client-&gt;&gt;ADC: unregisterEventListener(IVideoSinkEventListener)</code></pre>"},{"location":"introduction/aidl_and_binder/","title":"RDK Hardware Abstraction Layer (HAL)","text":"<p>The 2023 RDK HAL study identified key design goals for a new HAL interface and implementation, focusing on the following aspects:</p>"},{"location":"introduction/aidl_and_binder/#design-goals","title":"Design Goals","text":"<ul> <li>Clean Separation: Clear division between middleware and vendor layers.</li> <li>Process Isolation: Middleware and vendor layers operate in separate processes and memory spaces.</li> <li>Late Binding: Decoupling of middleware from vendor HAL components at build time.</li> <li>Versioning: Versioned interfaces with forward and backward compatibility.</li> <li>Performance: High-performance Inter-Process Communication (IPC).</li> <li>Testability: Standalone testability for the vendor layer.</li> <li>Debuggability: Enhanced debugging tools.</li> </ul>"},{"location":"introduction/aidl_and_binder/#binder","title":"Binder","text":"<p>Binder is the chosen Inter-Process Communication (IPC) mechanism for RDK HALs. It offers both synchronous and asynchronous calls, crucial for the diverse communication needs of subsystems like A/V.  Implementing HAL interfaces as Binder services provides:</p> <ul> <li>Process and Memory Isolation: Enhances stability, testability, and memory management.  HAL crashes are isolated and won't bring down the entire system.  This also improves security.</li> <li>Late Binding: Eliminates build-time dependencies on vendor HAL libraries, enabling independent delivery and updates of middleware and vendor layers.  This simplifies the build process and allows for more flexible deployments.</li> </ul> <p>Binder is implemented as a Linux kernel driver that must be enabled during kernel compilation.</p>"},{"location":"introduction/aidl_and_binder/#aidl","title":"AIDL","text":"<p>AIDL (Android Interface Definition Language) is used to define the interfaces for Binder services.  It acts as a contract between the client (e.g., middleware) and the server (e.g., HAL implementation). RDK leverages C++ bindings generated by the AIDL tool to create client-side proxy and server-side stub implementations. All Binder-based HAL interfaces are defined in AIDL files, typically located in a dedicated repository (e.g., <code>rdk-halif-aidl</code>).</p> <p>Stable AIDL is crucial for maintaining compatibility across interface versions. It enables runtime version detection, allowing clients to verify the HAL service version they are communicating with. This ensures interoperability even when client and server components are built against different interface versions.</p>"},{"location":"introduction/aidl_and_binder/#why-use-aidl-with-binder-for-hals","title":"Why use AIDL with Binder for HALs?","text":"<p>AIDL provides a structured and standardized way to define the interfaces between the framework (or in this case, the RDK middleware) and the hardware-specific HAL implementation.  This is critical for several reasons:</p> <ul> <li> <p>Standardized Interface Definition: AIDL provides a clear, concise, and language-agnostic way to define the functions, parameters, and return values of the HAL interface. This ensures both the middleware and the HAL understand the contract, preventing ambiguity and errors.</p> </li> <li> <p>Binder Integration:  AIDL is tightly integrated with Binder.  The AIDL compiler generates the code necessary for marshaling (packaging) and unmarshaling (unpacking) data as it's passed between processes via Binder. This significantly simplifies the development process.</p> </li> <li> <p>Code Generation: The AIDL compiler automates the creation of boilerplate code (proxies and stubs) required for Binder communication.  This saves developers significant time and effort, allowing them to focus on the core logic of the HAL implementation.</p> </li> <li> <p>Versioning and Compatibility: Stable AIDL allows for evolving the HAL interface over time while maintaining backward compatibility.  This is essential for ensuring that updates to the HAL or middleware don't break existing components.</p> </li> <li> <p>Abstraction: AIDL abstracts away the complexities of inter-process communication.  Developers don't need to worry about the underlying Binder mechanisms; the generated code handles this automatically.</p> </li> </ul>"},{"location":"introduction/aidl_and_binder/#key-concepts-and-benefits","title":"Key Concepts and Benefits","text":"<ul> <li>Interface Definition: AIDL provides a structured, language-agnostic way to define the contract between the client and server.</li> <li>Code Generation: The AIDL compiler generates the necessary code for Binder communication.</li> <li>Proxy/Stub: Client-side proxies handle communication with the server, while server-side stubs receive and process requests.</li> <li>Versioning: Stable AIDL allows for interface evolution while preserving backward compatibility.</li> <li>Process Isolation: Binder services run in separate processes, improving system stability.</li> <li>Late Binding: Reduces dependencies and simplifies updates.</li> </ul>"},{"location":"introduction/aidl_and_binder/#useful-external-links","title":"Useful External Links","text":"<ul> <li>RDK HAL AIDL Git Repository: RDK HAL AIDL</li> <li>Kernel Binder Driver: Kernel Binder</li> </ul>"},{"location":"introduction/aidl_and_binder/#aidl-documentation","title":"AIDL Documentation","text":"<ul> <li>AIDL Overview</li> <li>AIDL Core Architecture</li> <li>AIDL Language</li> <li>AIDL HALs</li> <li>Stable AIDL</li> </ul>"},{"location":"introduction/aidl_and_binder/#binder-tracing-tools","title":"Binder Tracing Tools","text":"<ul> <li>Binder Trace</li> <li>Binder Tracing Part 2</li> <li>Eclipse Trace Compass</li> <li>Android Performance Tracing</li> <li>Binder Explorer</li> </ul>"},{"location":"introduction/build_binder_tools/","title":"Building and Using Binder Tools","text":""},{"location":"introduction/build_binder_tools/#overview","title":"Overview","text":"<p>This document provides step-by-step instructions on how to clone, build, and use the Binder tools from the Android source repository.</p>"},{"location":"introduction/build_binder_tools/#prerequisites","title":"Prerequisites","text":"<p>Before proceeding, ensure that you have the following dependencies installed on your Linux system:</p> <pre><code>sudo apt update &amp;&amp; sudo apt install -y git build-essential clang cmake\n</code></pre>"},{"location":"introduction/build_binder_tools/#cloning-the-repository","title":"Cloning the Repository","text":"<p>To get the source code for the Binder tools, use the following command:</p> <pre><code>git clone https://android.googlesource.com/platform/prebuilts/build-tools\ncd build-tools\n</code></pre>"},{"location":"introduction/build_binder_tools/#using-prebuilt-binder-tools","title":"Using Prebuilt Binder Tools","text":"<p>If you prefer to use the prebuilt Binder tools instead of building them from source, follow these steps:</p> <ol> <li>Ensure you have the necessary permissions to execute the prebuilt binaries.</li> <li>Navigate to the directory containing the prebuilt tools:</li> </ol> <pre><code>cd build-tools/prebuilt/linux-x86_64/bin\n</code></pre> <ol> <li>Add the directory to your system <code>PATH</code> to use the tools globally:</li> </ol> <pre><code>export PATH=$(pwd):$PATH\n</code></pre> <ol> <li>Verify the installation by checking the available commands:</li> </ol> <pre><code>binder --help\n</code></pre>"},{"location":"introduction/build_binder_tools/#building-the-binder-tools","title":"Building the Binder Tools","text":"<ol> <li>Navigate to the <code>build-tools</code> directory:</li> </ol> <pre><code>cd build-tools\n</code></pre> <ol> <li>If the repository includes a <code>CMakeLists.txt</code> file, use CMake to build:</li> </ol> <pre><code>mkdir -p build &amp;&amp; cd build\ncmake ..\nmake -j$(nproc)\n</code></pre> <ol> <li>Alternatively, if a standard <code>Makefile</code> is present, simply run:</li> </ol> <pre><code>make -j$(nproc)\n</code></pre>"},{"location":"introduction/build_binder_tools/#installing-the-built-tools","title":"Installing the Built Tools","text":"<p>Once the build is complete, install the tools system-wide (if required):</p> <pre><code>sudo make install\n</code></pre>"},{"location":"introduction/build_binder_tools/#using-binder-tools","title":"Using Binder Tools","text":"<p>After installation, you can use the tools directly. Some commonly used commands include:</p> <pre><code>binder --help   # Display help menu\nbinder &lt;options&gt;  # Run the tool with required options\n</code></pre> <p>If the tool is not found in the system path, you can run it from the build directory:</p> <pre><code>./binder &lt;options&gt;\n</code></pre>"},{"location":"introduction/build_binder_tools/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>If the build fails due to missing dependencies, install them using:</li> </ul> <pre><code>sudo apt install -y additional-dependency\n</code></pre> <ul> <li>If the command is not found, ensure the binary is in your <code>PATH</code>:</li> </ul> <pre><code>export PATH=$(pwd)/build:$PATH\n</code></pre> <p>For more details, refer to the official Android source documentation.</p>"},{"location":"introduction/documentation_guide/","title":"Documentation Guide","text":"<p>This guide outlines the process for contributing to and maintaining the documentation. All documentation resides within the <code>docs</code> directory of the GitHub repository. We leverage ReadTheDocs (https://readthedocs.org/) for documentation generation and the Material for MkDocs theme (https://squidfunk.github.io/mkdocs-material/) for a polished and consistent user experience.</p>"},{"location":"introduction/documentation_guide/#setting-up-your-local-environment","title":"Setting Up Your Local Environment","text":"<p>To work on the documentation locally:</p>"},{"location":"introduction/documentation_guide/#install-python","title":"Install Python","text":"<p>Ensure Python 3 is installed and accessible on your system. Verify by running:</p> <pre><code>python3 --version\n</code></pre>"},{"location":"introduction/documentation_guide/#building-and-serving-documentation","title":"Building and Serving Documentation","text":"<p>To generate and serve the documentation locally, navigate to the <code>docs</code> directory and execute the <code>build_docs.sh</code> script. This script will:</p> <ul> <li>Set up a Python 3 virtual environment  </li> <li>Clone the required repositories  </li> <li>Configure necessary directories  </li> <li>Build the documentation and launch a local web server  </li> </ul> <p>Run the following command:</p> <pre><code>./build_docs.sh serve\n</code></pre> <p>Once the process completes, you can access the documentation in your web browser at:</p> <p>http://localhost:8000/rdkcentral/rdk-halif-aidl/</p> <p>The site will automatically reload when you modify Markdown files within the <code>docs</code> directory.</p>"},{"location":"introduction/documentation_guide/#building-without-serving","title":"Building Without Serving","text":"<p>If you want to build the documentation without running the local web server, use:</p> <pre><code>./build_docs.sh\n</code></pre>"},{"location":"introduction/documentation_guide/#structuring-the-documentation","title":"Structuring the Documentation","text":"<p>The <code>mkdocs.yml</code> file, located at the root of the repository, is crucial for defining the documentation's structure and navigation. This file dictates the hierarchy of pages and how they are linked. Any additions or removals of documentation pages require a corresponding update to <code>mkdocs.yml</code> to maintain proper navigation.</p> <p>See For information on the the naming conventions used see:-</p>"},{"location":"introduction/documentation_guide/#deploying-documentation","title":"Deploying Documentation","text":"<p>If you have the required permissions to deploy the documentation, use the <code>deploy_docs.sh</code> script. This will:</p> <ul> <li>Rebuild the documentation  </li> <li>Deploy the latest version  </li> </ul> <p>Run the following command:</p> <pre><code>./deploy_docs.sh\n</code></pre> <p>The latest documentation will be deployed to GitHub Pages at https://rdkcentral.github.io/rdk-halif-aidl/. The website's source code resides in the <code>gh-pages</code> branch of the repository.</p>"},{"location":"introduction/documentation_guide/#writing-style-and-guidelines","title":"Writing Style and Guidelines","text":"<p>When contributing to the documentation, please adhere to the following guidelines:</p> <ul> <li>Accuracy and Clarity: Ensure all information is accurate, up-to-date, and easy to understand. Use clear and concise language.</li> <li>Proofreading: Thoroughly proofread all content for spelling, grammar, and punctuation errors before submitting changes.</li> <li>Admonitions for Emphasis: Use admonitions to highlight key information, warnings, notes, or tips. Material for MkDocs provides various admonition styles: https://squidfunk.github.io/mkdocs-material/reference/admonitions/</li> </ul> <p>Helpful Tip</p> <p>This is an example of a note admonition.</p> <p>Important Consideration</p> <p>This is a warning!</p> <ul> <li>Code Blocks with Syntax Highlighting: Always use code blocks for code examples and specify the language for syntax highlighting:</li> </ul> <pre><code>def example_function():\n    print(\"Hello, world!\")\n</code></pre> <pre><code>function exampleFunction() {\n    console.log(\"Hello, world!\");\n}\n</code></pre> <ul> <li> <p>MkDocs-Material Reference: Refer to the official Material for MkDocs documentation for advanced features and customization options: https://squidfunk.github.io/mkdocs-material/reference/</p> </li> <li> <p>Mermaid Diagrams (Preferred): Use Mermaid (https://mermaid.js.org/) for creating diagrams whenever possible. Mermaid diagrams offer better accessibility, performance, and scalability compared to embedded images.</p> </li> </ul> <pre><code>graph LR\n    A[Start] --&gt; B{Is there an Error?};\n    B -- Yes --&gt; C[Debug];\n    C --&gt; D[Test];\n    D --&gt; B;\n    B -- No --&gt; E[Success!];</code></pre> <p>This guide ensures consistency, accuracy, and usability across all documentation contributions.</p>"},{"location":"introduction/interface_generation/","title":"HAL Interface Generation","text":"<p>This document describes how to generate Hardware Abstraction Layer (HAL) interface definitions using the Android Interface Definition Language (AIDL).</p>"},{"location":"introduction/interface_generation/#prerequisites","title":"Prerequisites","text":"<p>Building this repository requires the AIDL compiler (<code>aidl</code>).  This can be obtained by building the <code>linux_binder_idl</code> project, available on GitHub: github.com/rdkcentral/linux_binder_idl.git. Alternatively, you can use a Docker image that includes <code>aidl</code>, such as <code>rdk-dunfell</code> or the recommended <code>rdk-kirkstone</code>.</p>"},{"location":"introduction/interface_generation/#building-aidl-from-linux_binder_idl","title":"Building <code>aidl</code> from <code>linux_binder_idl</code>","text":"<p>Minimum Required GCC Version: 9.4.0</p> <p>Using the <code>rdk-kirkstone</code> Docker image is highly recommended.</p> <p>Clone the <code>linux_binder_idl</code> repository:</p> <pre><code>git clone -b main https://github.com/rdkcentral/linux_binder_idl.git\n</code></pre> <p>Build <code>aidl</code>:</p> <pre><code>cd linux_binder_idl\n\n# Optional: Run inside the Docker container\nsc docker run rdk-kirkstone /bin/bash\n\n./build-aidl-generator-tool.sh\n</code></pre> <p>Locate the <code>aidl</code> binary:</p> <p>The compiled <code>aidl</code> binary will be located in the <code>local/bin</code> directory within the <code>linux_binder_idl</code> project.  The full path might resemble:</p> <pre><code>linux_binder_idl/local/bin/aidl\n</code></pre> <p>For more detailed information, refer to the github.com/rdkcentral/linux_binder_idl.git repository.</p>"},{"location":"introduction/interface_generation/#generating-aidl-proxy-and-native-interfaces","title":"Generating AIDL Proxy and Native Interfaces","text":"<p>Clone the <code>hal</code> repository:</p> <pre><code>git clone -b develop https://github.com/rdkcentral/rdk-halif-aidl.git\n</code></pre> <p>Generate the AIDL proxy and native interfaces:</p> <p>The following example demonstrates generating interfaces for the <code>audiodecoder</code> module. Adapt the <code>AIDL_TARGET</code> CMake variable for other modules.</p> <pre><code>cd hal\n\n# Optional: Run inside the Docker container\nsc docker run rdk-kirkstone /bin/bash\n\n# Optional: Set AIDL binary path if not in system PATH.  Replace with the actual path from the previous step.\nexport PATH=$PATH:/path/to/linux_binder_idl/local/bin\n\ncmake -DAIDL_TARGET=audiodecoder .\n</code></pre> <p>Warning</p> <p>CMake must be run from the root directory of the <code>hal</code> repository, not within a specific module directory.</p> <p>Locate the generated files:</p> <p>The generated proxy and interface files will be placed under <code>audiodecoder/gen/&lt;version&gt;</code>.  For example:</p> <pre><code>hal/audiodecoder/gen/current/cpp/com/rdk/hal/audiodecoder/...  (C++ files)\nhal/audiodecoder/gen/current/h/com/rdk/hal/audiodecoder/...   (Header files)\nhal/audiodecoder/current/com/rdk/hal/audiodecoder/...        (AIDL files)\n</code></pre>"},{"location":"introduction/interface_generation/#example-cmake-commands","title":"Example CMake Commands","text":"<pre><code># Use a custom path to the `aidl` binary\ncmake -DAIDL_TARGET=audiodecoder -DAIDL_BIN=/home/example/bin/aidl .\n\n# Specify a specific AIDL interface version (e.g., version 2)\ncmake -DAIDL_TARGET=audiodecoder -DAIDL_SRC_VERSION=2 .\n\n# Specify a custom output directory for generated files\ncmake -DAIDL_TARGET=audiodecoder -DAIDL_GEN_DIR=/home/example/example_out .\n</code></pre>"},{"location":"introduction/interface_generation/#cmake-variables","title":"CMake Variables","text":"Variable Description <code>AIDL_BIN</code> Optional. Path to the <code>aidl</code> executable. If not set, CMake will attempt to locate it. <code>AIDL_GEN_DIR</code> Optional. Output directory for generated files. Default: <code>&lt;module&gt;/gen/&lt;version&gt;</code>. <code>AIDL_SRC_VERSION</code> Optional. Version of the AIDL interface to generate. Default: <code>current</code>. <code>AIDL_TARGET</code> Mandatory. Name of the module for which to generate interfaces."},{"location":"introduction/interface_generation/#notes","title":"Notes","text":"<p>The <code>Broadcast</code> module is currently disabled because its <code>demux</code> submodule depends on the Android framework.</p>"},{"location":"introduction/versions/","title":"HAL Versions Overview","text":"<p>The HAL interfaces provide the API contract between the RDK middleware and vendor layer containing the HAL implementation.</p> <p>Both the RDK middleware and the Vendor Test Suite can sit above the HAL interfaces, which have been designed to use completely generic code with no platform/vendor specific code.</p> <pre><code>block-beta\n  columns 3\n  A(\"RDK Middleware / Vendor Test Suite\"):3\n  block:Vendor:2\n    columns 1\n    B(\"HAL Interfaces\")\n    D(\"HAL Implementation\")\n    E(\"Vendor Platform Drivers\")\n  end\n  C(\"Kernel\")\n\n  style A fill:#0066cc,stroke:#000,color:#fff;\n  style B fill:#d0d9c4,stroke:#000,color:#000;\n  style C fill:#007000,stroke:#000,color:#fff;\n  style D fill:#007000,stroke:#000,color:#fff;\n  style E fill:#007000,stroke:#000,color:#fff;</code></pre> <p>TBC: Static Image</p> <p></p>"},{"location":"introduction/versions/#semantic-versioning","title":"Semantic Versioning","text":"<p>Each HAL release follows Semantic Versioning (SemVer) principles and is versioned using the <code>major.minor.bugfix/doc</code> format, which applies to HAL services and components.</p> <p>The version should increment as follows:</p> <ul> <li>Major: Increased when making incompatible API changes.</li> <li>Minor: Increased when adding functionality in a backwards-compatible manner.</li> <li>Bugfix/Doc: Increased when making backwards-compatible bug fixes or documentation updates. Since the documentation defines semantic operation, it is as important as an interface header definition change but remains backward compatible.</li> </ul> <p>For more details, refer to SemVer.</p>"},{"location":"introduction/versions/#hal-service-interfaces","title":"HAL Service Interfaces","text":"<p>Most of the HAL interfaces are implemented as services across a client-server architecture which uses process separation and provides backwards compatibility with older versions of the API.</p> <p>The interface definitions are provided in AIDL files, which generate C++ sources for both the client and server processes. HAL API calls are made across Binder.</p>"},{"location":"introduction/versions/#in-process-hals","title":"In-Process HALs","text":"<p>A small number of HALs exist as libraries which are dynamically linked to RDK middleware processes.</p> <ul> <li>Graphics: EGL, OpenGL ES, Vulkan graphics drivers</li> <li>Wi-Fi: wpa_supplicant</li> <li>Bluetooth: BlueZ</li> <li>CDM: Content Decryption Modules for DRM</li> </ul>"},{"location":"introduction/versions/#device-profiles","title":"Device Profiles","text":"<p>The HAL supports device profiles for TV and STB which mandates which of the HAL services should be supported in the vendor layer.</p> <p>At runtime the RDK middleware can access the DeviceInfo HAL service to get the device profile for the HAL.</p>"},{"location":"python_venv/lib/python3.12/site-packages/Markdown-3.7.dist-info/LICENSE/","title":"LICENSE","text":"<p>BSD 3-Clause License</p> <p>Copyright 2007, 2008 The Python Markdown Project (v. 1.7 and later) Copyright 2004, 2005, 2006 Yuri Takhteyev (v. 0.2-1.6b) Copyright 2004 Manfred Stienstra (the original version)</p> <p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p> <ol> <li> <p>Redistributions of source code must retain the above copyright notice, this    list of conditions and the following disclaimer.</p> </li> <li> <p>Redistributions in binary form must reproduce the above copyright notice,    this list of conditions and the following disclaimer in the documentation    and/or other materials provided with the distribution.</p> </li> <li> <p>Neither the name of the copyright holder nor the names of its    contributors may be used to endorse or promote products derived from    this software without specific prior written permission.</p> </li> </ol> <p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>"},{"location":"python_venv/lib/python3.12/site-packages/idna-3.10.dist-info/LICENSE/","title":"LICENSE","text":"<p>BSD 3-Clause License</p> <p>Copyright (c) 2013-2024, Kim Davies and contributors. All rights reserved.</p> <p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p> <ol> <li> <p>Redistributions of source code must retain the above copyright    notice, this list of conditions and the following disclaimer.</p> </li> <li> <p>Redistributions in binary form must reproduce the above copyright    notice, this list of conditions and the following disclaimer in the    documentation and/or other materials provided with the distribution.</p> </li> <li> <p>Neither the name of the copyright holder nor the names of its    contributors may be used to endorse or promote products derived from    this software without specific prior written permission.</p> </li> </ol> <p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>"},{"location":"python_venv/lib/python3.12/site-packages/mkdocs_get_deps-0.2.0.dist-info/licenses/LICENSE/","title":"LICENSE","text":"<p>MIT License</p> <p>Copyright (c) 2023 Oleh Prypin oleh@pryp.in</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"python_venv/lib/python3.12/site-packages/mkdocs_material_extensions-1.3.1.dist-info/licenses/LICENSE/","title":"LICENSE","text":"<p>MIT License</p> <p>Copyright (c) 2021 Isaac Muse</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"python_venv/lib/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/","title":"License","text":""},{"location":"python_venv/lib/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/#pymdown-extensions","title":"PyMdown Extensions","text":"<p>The MIT License (MIT)</p> <p>Copyright (c) 2014 - 2024 Isaac Muse</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"python_venv/lib/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/#superfences","title":"SuperFences","text":"<p><code>superfences.py</code> is derived from Python Markdown's fenced_code extension.</p> <pre><code>Fenced Code Extension for Python Markdown\n =========================================\nThis extension adds Fenced Code Blocks to Python-Markdown.\nSee &lt;https://python-markdown.github.io/extensions/fenced_code_blocks/&gt;\nfor documentation.\nOriginal code Copyright 2007-2008 [Waylan Limberg](http://achinghead.com/).\nAll changes Copyright 2008-2014 The Python Markdown Project\nLicense: [BSD](http://www.opensource.org/licenses/bsd-license.php)\n</code></pre>"},{"location":"python_venv/lib/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/#highlight","title":"Highlight","text":"<p><code>highlight.py</code> is derived from Python Markdown's CodeHilite extension.</p> <pre><code>CodeHilite Extension for Python-Markdown\n ========================================\nAdds code/syntax highlighting to standard Python-Markdown code blocks.\nSee &lt;https://python-markdown.github.io/extensions/code_hilite/&gt;\nfor documentation.\nOriginal code Copyright 2006-2008 [Waylan Limberg](http://achinghead.com/).\nAll changes Copyright 2008-2014 The Python Markdown Project\nLicense: [BSD](http://www.opensource.org/licenses/bsd-license.php)\n</code></pre>"},{"location":"python_venv/lib/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/#fancylists","title":"FancyLists","text":"<p><code>fancylists.py</code> is derived from Python Markdown's list handler.</p> <pre><code>Started by Manfred Stienstra (http://www.dwerg.net/).\nMaintained for a few years by Yuri Takhteyev (http://www.freewisdom.org).\nCurrently maintained by Waylan Limberg (https://github.com/waylan),\nDmitry Shachnev (https://github.com/mitya57) and Isaac Muse (https://github.com/facelessuser).\n\nCopyright 2007-2023 The Python Markdown Project (v. 1.7 and later)\nCopyright 2004, 2005, 2006 Yuri Takhteyev (v. 0.2-1.6b)\nCopyright 2004 Manfred Stienstra (the original version)\n\nLicense: [BSD](http://www.opensource.org/licenses/bsd-license.php)\n</code></pre>"},{"location":"python_venv/lib/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/#gemoji-index","title":"Gemoji Index","text":"<p><code>gemoji_db.py</code> is generated from Gemoji's source code: @github/gemoji.</p> <pre><code>Copyright (c) 2013 GitHub, Inc.\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n</code></pre>"},{"location":"python_venv/lib/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/#emojione-index","title":"EmojiOne Index","text":"<p><code>emoji1_db.py</code> is generated from EmojiOne's source code: @Ranks/emojione</p> <pre><code>EmojiOne Non-Artwork\n\nApplies to the JavaScript, JSON, PHP, CSS, HTML files, and everything else not covered under the artwork license above.\nLicense: MIT\nComplete Legal Terms: http://opensource.org/licenses/MIT\n</code></pre>"},{"location":"python_venv/lib64/python3.12/site-packages/Markdown-3.7.dist-info/LICENSE/","title":"LICENSE","text":"<p>BSD 3-Clause License</p> <p>Copyright 2007, 2008 The Python Markdown Project (v. 1.7 and later) Copyright 2004, 2005, 2006 Yuri Takhteyev (v. 0.2-1.6b) Copyright 2004 Manfred Stienstra (the original version)</p> <p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p> <ol> <li> <p>Redistributions of source code must retain the above copyright notice, this    list of conditions and the following disclaimer.</p> </li> <li> <p>Redistributions in binary form must reproduce the above copyright notice,    this list of conditions and the following disclaimer in the documentation    and/or other materials provided with the distribution.</p> </li> <li> <p>Neither the name of the copyright holder nor the names of its    contributors may be used to endorse or promote products derived from    this software without specific prior written permission.</p> </li> </ol> <p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>"},{"location":"python_venv/lib64/python3.12/site-packages/idna-3.10.dist-info/LICENSE/","title":"LICENSE","text":"<p>BSD 3-Clause License</p> <p>Copyright (c) 2013-2024, Kim Davies and contributors. All rights reserved.</p> <p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p> <ol> <li> <p>Redistributions of source code must retain the above copyright    notice, this list of conditions and the following disclaimer.</p> </li> <li> <p>Redistributions in binary form must reproduce the above copyright    notice, this list of conditions and the following disclaimer in the    documentation and/or other materials provided with the distribution.</p> </li> <li> <p>Neither the name of the copyright holder nor the names of its    contributors may be used to endorse or promote products derived from    this software without specific prior written permission.</p> </li> </ol> <p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>"},{"location":"python_venv/lib64/python3.12/site-packages/mkdocs_get_deps-0.2.0.dist-info/licenses/LICENSE/","title":"LICENSE","text":"<p>MIT License</p> <p>Copyright (c) 2023 Oleh Prypin oleh@pryp.in</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"python_venv/lib64/python3.12/site-packages/mkdocs_material_extensions-1.3.1.dist-info/licenses/LICENSE/","title":"LICENSE","text":"<p>MIT License</p> <p>Copyright (c) 2021 Isaac Muse</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"python_venv/lib64/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/","title":"License","text":""},{"location":"python_venv/lib64/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/#pymdown-extensions","title":"PyMdown Extensions","text":"<p>The MIT License (MIT)</p> <p>Copyright (c) 2014 - 2024 Isaac Muse</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"python_venv/lib64/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/#superfences","title":"SuperFences","text":"<p><code>superfences.py</code> is derived from Python Markdown's fenced_code extension.</p> <pre><code>Fenced Code Extension for Python Markdown\n =========================================\nThis extension adds Fenced Code Blocks to Python-Markdown.\nSee &lt;https://python-markdown.github.io/extensions/fenced_code_blocks/&gt;\nfor documentation.\nOriginal code Copyright 2007-2008 [Waylan Limberg](http://achinghead.com/).\nAll changes Copyright 2008-2014 The Python Markdown Project\nLicense: [BSD](http://www.opensource.org/licenses/bsd-license.php)\n</code></pre>"},{"location":"python_venv/lib64/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/#highlight","title":"Highlight","text":"<p><code>highlight.py</code> is derived from Python Markdown's CodeHilite extension.</p> <pre><code>CodeHilite Extension for Python-Markdown\n ========================================\nAdds code/syntax highlighting to standard Python-Markdown code blocks.\nSee &lt;https://python-markdown.github.io/extensions/code_hilite/&gt;\nfor documentation.\nOriginal code Copyright 2006-2008 [Waylan Limberg](http://achinghead.com/).\nAll changes Copyright 2008-2014 The Python Markdown Project\nLicense: [BSD](http://www.opensource.org/licenses/bsd-license.php)\n</code></pre>"},{"location":"python_venv/lib64/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/#fancylists","title":"FancyLists","text":"<p><code>fancylists.py</code> is derived from Python Markdown's list handler.</p> <pre><code>Started by Manfred Stienstra (http://www.dwerg.net/).\nMaintained for a few years by Yuri Takhteyev (http://www.freewisdom.org).\nCurrently maintained by Waylan Limberg (https://github.com/waylan),\nDmitry Shachnev (https://github.com/mitya57) and Isaac Muse (https://github.com/facelessuser).\n\nCopyright 2007-2023 The Python Markdown Project (v. 1.7 and later)\nCopyright 2004, 2005, 2006 Yuri Takhteyev (v. 0.2-1.6b)\nCopyright 2004 Manfred Stienstra (the original version)\n\nLicense: [BSD](http://www.opensource.org/licenses/bsd-license.php)\n</code></pre>"},{"location":"python_venv/lib64/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/#gemoji-index","title":"Gemoji Index","text":"<p><code>gemoji_db.py</code> is generated from Gemoji's source code: @github/gemoji.</p> <pre><code>Copyright (c) 2013 GitHub, Inc.\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n</code></pre>"},{"location":"python_venv/lib64/python3.12/site-packages/pymdown_extensions-10.14.3.dist-info/licenses/LICENSE/#emojione-index","title":"EmojiOne Index","text":"<p><code>emoji1_db.py</code> is generated from EmojiOne's source code: @Ranks/emojione</p> <pre><code>EmojiOne Non-Artwork\n\nApplies to the JavaScript, JSON, PHP, CSS, HTML files, and everything else not covered under the artwork license above.\nLicense: MIT\nComplete Legal Terms: http://opensource.org/licenses/MIT\n</code></pre>"},{"location":"references/references/","title":"References","text":""},{"location":"references/references/#unit-testing-core-framework","title":"Unit Testing Core Framework","text":"<ul> <li>Repository: ut-core </li> <li>Description: A core framework for unit testing, providing essential tools and utilities to streamline test development and execution.</li> </ul>"},{"location":"references/references/#uinit-testing-control","title":"Uinit Testing Control","text":"<ul> <li>Repository: ut-control</li> <li>Description: Modules that support functionality for message handling, key-value pair (KVP) data parsing, and logging. Used for testing and also vDevice.</li> </ul>"},{"location":"references/references/#python-raft","title":"Python Raft","text":"<ul> <li>Repository: python-raft </li> <li>Description: Python-based engineering testing framework for validating embedded device.</li> </ul>"},{"location":"references/references/#unit-testing-raft","title":"Unit Testing RAFT","text":"<ul> <li>Repository: ut-raft</li> <li>Description: The ut-raft repository is part of the RAFT (Rapid Application For Test Framework) and profiles classes to support L3-L4 testing.</li> </ul>"},{"location":"vsi/service_manager/current/service_manager/","title":"Service Manager","text":"<p>The Service Manager is a crucial Binder service included in the vendor layer. It is launched early in system initialization and serves as a registry for Binder service interfaces.</p> <ul> <li>As each HAL service starts, it registers its public Binder interface with the Service Manager.</li> <li>Registered interfaces are added to the Service Manager\u2019s list, making them discoverable by clients.</li> <li>Clients can retrieve a registered service interface by calling <code>getService()</code> with the corresponding service name.</li> </ul>"},{"location":"vsi/service_manager/current/service_manager/#references","title":"References","text":"<p>Info</p> Interface Definition service_manager/current API Documentation TBD - Doxygen HAL Interface Type AIDL and Binder Initialization - TBC systemd - hal-service_manager.service VTS Tests TBC Reference Implementation - vComponent https://github.com/rdkcentral/rdk-halif-aidl/tree/main/service_manager/current"},{"location":"vsi/service_manager/current/service_manager/#related-pages","title":"Related Pages","text":"<p>Tip</p>"},{"location":"vsi/service_manager/current/service_manager/#implementation-requirements","title":"Implementation Requirements","text":"# Requirement Comments HAL.SERVICEMAN.1 Service Manager shall initialise and run early boot time to allow HAL servers to register their binder service interfaces as they start up. HAL.SERVICEMAN.2 The list of registered services shall be listable for developers and testers to list on the device. HAL.SERVICEMAN.3 HAL services shall be able to register their public HAL interfaces with Service Manager using the string name defined in the AIDL file. HAL.SERVICEMAN.4 Clients shall obtain a public HAL interface using a string name from Service Manager."},{"location":"vsi/service_manager/current/service_manager/#interface-definition","title":"Interface Definition","text":"<p>Client code accesses the Service Manager by including C++ <code>IServiceManager.h</code> header and using the <code>getService()</code> function to access registered binder service interfaces.</p> <p>See https://android.googlesource.com/platform/frameworks/native/+/android-13.0.0_r74/libs/binder/include/binder/IServiceManager.h</p> <p>HAL binder services register an interface by calling the <code>publishAndJoinThreadPool()</code> static method on their interface class.</p> <p>See https://android.googlesource.com/platform/frameworks/native/+/android-13.0.0_r74/libs/binder/include/binder/BinderService.h</p>"},{"location":"vsi/service_manager/current/service_manager/#initialization","title":"Initialization","text":"<p>The systemd <code>hal-service_manager.service</code> unit file is provided by the vendor layer to start the service.</p> <p>The Service Manager depends on the kernel binder driver.</p>"},{"location":"vsi/service_manager/current/service_manager/#product-customization","title":"Product Customization","text":"<p>The Service Manager is universal code that must be compiled and delivered as part of the vendor layer.</p>"},{"location":"vsi/service_manager/current/service_manager/#system-context","title":"System Context","text":"<p>The Service Manager handles service registration from HAL binder services and provides clients access to registered binder interfaces.</p> <p>The list of registered binder interfaces builds up during boot.</p> <p></p>"},{"location":"vsi/service_manager/current/service_manager/#building","title":"Building","text":"<p>To build the Service Manager from source, use the links to the source repository and patch repository below. The patch is required to build it for RDK.</p> <p>For details on building the executable, see https://github.com/rdk-e/linux_binder_idl/tree/main?tab=readme-ov-file#additional-build-options.</p> Description RDK-E Repository Alternate Repository Service Manager [https://github.com/rdk-e/native_frameworks_platform-android/tree/master/cmds/servicemanager(https://github.com/rdk-e/native_frameworks_platform-android/tree/master/cmds/servicemanager) https://android.googlesource.com/platform/frameworks/native/+/refs/tags/android-13.0.0_r74/cmds/servicemanager/ RDK patch ttps://github.com/rdk-e/linux_binder_idl/blob/main/patches/native.patch https://github.com/rdkcentral/linux_binder_idl/blob/main/patches/native.patch)"},{"location":"vsi/service_manager/current/service_manager/#client-access-to-service-manager","title":"Client Access to Service Manager","text":"<p>For sample code, see https://github.com/rdk-e/linux_binder_idl/tree/main/example.</p> <p>The <code>IServiceManager.h</code> file can be found here: https://android.googlesource.com/platform/frameworks/native/+/android-13.0.0_r74/libs/binder/include/binder/IServiceManager.h</p> <pre><code>sp&lt;IFWManager&gt; fwManagerService;\nstatus_t status;\n\n// Get the binder interface for the service.\nstatus = getService(String16(\"FWManagerService\"), &amp;fwManagerService);\nif (status != OK) {\n    printf(\"\\nFWManagerTestApp : Failed to Get FWManagerService handle from ServiceManager : [%s]\\n\", Status::fromStatusT(status).toString8().c_str());\n    return -1;\n}\n\n// Use the interface to make a call.\nFirmwareStatus fwStatus;\nStatus binderStatus;\nbinderStatus = fwManagerService-&gt;getFirmwareUpdateState(&amp;fwStatus);\n</code></pre>"},{"location":"vsi/service_manager/current/service_manager/#clients-waiting-for-services","title":"Clients Waiting for Services","text":"<p>A client can call the <code>waitForService()</code> function to block until a HAL binder service becomes initialized and registered.</p> <p>This may happen if the client is allowed to execute before or while the HAL service is initializing, but then needs to synchronize with the HAL service registration before it can proceed.</p> <p>See <code>waitForService()</code> in https://android.googlesource.com/platform/frameworks/native/+/android-13.0.0_r74/libs/binder/include/binder/IServiceManager.h</p>"}]}