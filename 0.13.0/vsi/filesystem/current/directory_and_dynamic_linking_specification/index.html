
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://www.github.com/rdkcentral/rdk-halif-aidl/0.13.0/vsi/filesystem/current/directory_and_dynamic_linking_specification/">
      
      
        <link rel="prev" href="../file_system_architecture/">
      
      
        <link rel="next" href="../logging_system/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.2">
    
    
      
        <title>Directory And Dynamic Linking - RDK Hardware Porting Kit</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.d7758b05.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#directory-and-dynamic-linking-specification" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="RDK Hardware Porting Kit" class="md-header__button md-logo" aria-label="RDK Hardware Porting Kit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RDK Hardware Porting Kit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Directory And Dynamic Linking
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/rdkcentral/rdk-halif-aidl" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    rdkcentral/rdk-halif-aidl
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="RDK Hardware Porting Kit" class="md-nav__button md-logo" aria-label="RDK Hardware Porting Kit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    RDK Hardware Porting Kit
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/rdkcentral/rdk-halif-aidl" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    rdkcentral/rdk-halif-aidl
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../introduction/the_software_stack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Software Stack
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Hardware Abstraction Layer
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Hardware Abstraction Layer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../introduction/aidl_and_binder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Key Concepts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Key Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/key_concepts/hal/hal_properties/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HAL Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/key_concepts/hal/hal_feature_profiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HAL Feature Profiles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/key_concepts/hal/hal_naming_conventions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HAL Naming Conventions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/key_concepts/hal/hal_session_state_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HAL Session State Management
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Standards
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Standards
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../standards/direct_branching/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core Development Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../standards/forked_based_branching/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fork-Based Contribution Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../standards/git_flow_branching_strategy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git Flow Branching Strategy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../standards/semantic_versioning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semantic Versioning
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Vendor HAL Interfaces (VHI)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Vendor HAL Interfaces (VHI)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/key_concepts/hal/hal_interfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../introduction/interface_generation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interface Generation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AV Subsystem
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            AV Subsystem
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/audio_decoder/current/audio_decoder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio Decoder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/audio_mixer/current/audio_mixer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio Mixer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/audio_sink/current/audio_sink/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio Sink
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/av_buffer/current/av_buffer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AV Buffer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/av_clock/current/av_clock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AV Clock
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/video_decoder/current/video_decoder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Video Decoder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/video_sink/current/video_sink/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Video Sink
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/boot/current/boot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/broadcast/current/broadcast/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Broadcast
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/cdm/current/cdm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CDM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    HDMI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            HDMI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/hdmi_cec/current/hdmi_cec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HDMI CEC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/hdmi_input/current/hdmi_input/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HDMI Input
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/hdmi_output/current/hdmi_output/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HDMI Output
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/common/current/common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/deep_sleep/current/deep_sleep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deep Sleep
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/device_info/current/device_info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Device Info
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/flash/current/flash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flash
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/indicator/current/indicator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Indicator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/panel/current/panel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Panel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/plane_control/current/plane_control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plane Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/sec_api/current/sec_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Secure API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_16" >
        
          
          <label class="md-nav__link" for="__nav_4_16" id="__nav_4_16_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Sensor
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_16">
            <span class="md-nav__icon md-icon"></span>
            Sensor
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/sensor/current/motion/motion_sensor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Motion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../halif/sensor/current/thermal/thermal_sensor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Thermal
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Vendor System Interfaces (VSI)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Vendor System Interfaces (VSI)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" checked>
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    File System
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            File System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../file_system_architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Directory And Dynamic Linking
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Directory And Dynamic Linking
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#document-history" class="md-nav__link">
    <span class="md-ellipsis">
      Document History
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-pages" class="md-nav__link">
    <span class="md-ellipsis">
      Related Pages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design-principles" class="md-nav__link">
    <span class="md-ellipsis">
      Design Principles
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#layer-aggregation-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Layer Aggregation Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#directory-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Directory Layout
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Directory Layout">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples-by-layer" class="md-nav__link">
    <span class="md-ellipsis">
      Examples by Layer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Integration Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-linking-and-dlopen-support" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic Linking and dlopen() Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dynamic Linking and dlopen() Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples-by-layer_1" class="md-nav__link">
    <span class="md-ellipsis">
      Examples by Layer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apparmor-integration-and-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      AppArmor Integration and Permissions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AppArmor Integration and Permissions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apparmor-profile-structure" class="md-nav__link">
    <span class="md-ellipsis">
      AppArmor Profile Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-by-layer_2" class="md-nav__link">
    <span class="md-ellipsis">
      Examples by Layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Enforcement Policy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-and-runtime-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Update and Runtime Policy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operational-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Operational Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operational Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filesystem-access-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Filesystem Access Policy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-footprint-declarations" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Footprint Declarations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systemd-service-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Systemd Service Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      Boot Sequence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-by-layer_3" class="md-nav__link">
    <span class="md-ellipsis">
      Examples by Layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-management" class="md-nav__link">
    <span class="md-ellipsis">
      Log Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-by-layer_4" class="md-nav__link">
    <span class="md-ellipsis">
      Examples by Layer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples by Layer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log-file-rotation-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Log File Rotation Integration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Log Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#startup-configuration-application" class="md-nav__link">
    <span class="md-ellipsis">
      Startup Configuration Application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      Logging Mechanism
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#syslog-ng-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Syslog-ng Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-declaration-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      Version Declaration (Recommended)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-example-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Appendix: Example Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix: Example Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-vendor-layer-module-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Example 1: Vendor Layer Module Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Directory Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-snippet-yocto-style-do_install" class="md-nav__link">
    <span class="md-ellipsis">
      Installation Snippet (Yocto-style do_install())
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-version-file" class="md-nav__link">
    <span class="md-ellipsis">
      Example VERSION File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compliance-notes-vendor-example" class="md-nav__link">
    <span class="md-ellipsis">
      Compliance Notes (Vendor Example)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-middleware-layer-module-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Example 2: Middleware Layer Module Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 2: Middleware Layer Module Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#directory-structure_1" class="md-nav__link">
    <span class="md-ellipsis">
      Directory Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-manifestjson" class="md-nav__link">
    <span class="md-ellipsis">
      Example manifest.json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-snippet-yocto-style-do_install" class="md-nav__link">
    <span class="md-ellipsis">
      Integration Snippet (Yocto-style do_install())
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-systemd-service-file" class="md-nav__link">
    <span class="md-ellipsis">
      Example Systemd Service File
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compliance-notes-middleware-example" class="md-nav__link">
    <span class="md-ellipsis">
      Compliance Notes (Middleware Example)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging_system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging System
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bluetooth/current/bluetooth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bluetooth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../graphics/current/graphics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Graphics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../service_manager/current/service_manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Service Manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../wifi/current/wifi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wi-Fi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systemd/current/systemd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Systemd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../kernel/current/kernel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kernel
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Vendor Tests Suites (VTS)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Vendor Tests Suites (VTS)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/3.-Standards%3A-Levels-of-Test-for-Vendor-Layer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Levels of Test
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Level 4
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Level 4
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/3.3.-Standards%3A-L4-%E2%80%90-System-Interface-Testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L4 System Interface (VSI)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/3.4.-Standards%3A-L4%3A-Vendor-Full-Stack-%E2%80%90-Video-%E2%80%90-Smoke-Regression-Test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L4 Smoke Test (VST)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Testing Framework
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Testing Framework
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/3.2.-Standards%3A-Requirements-for-building-testing-suites/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Framework Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Key Concepts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            Key Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/3.1.-Standards%3A-Overview-of-Test%E2%80%90Driven-Development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test Driven Development
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/FAQ%3A-Black%E2%80%90Box-Testing-and-Code-Coverage-Metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Black Box Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/3.0.1-Standards%3A-Testing-Feedback-Loops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Feedback Loops
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UT-Core Test Framework
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            UT-Core Test Framework
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/Home/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UT-Core Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/FAQ%3A-UT-Core-Framework-Overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Level Actors
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Virtual Device
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Virtual Device
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/5.0%3A-Standards%3A-vDevice-Overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What is the vDevice
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/5.0.1%3A-Standards%3A-vDevice-Architecture-Overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Key Concepts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            Key Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/5.1.0%3A-Standards%3A-vDevice-Controller/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Controller
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/5.1.1%3A-Standards%3A-vDevice-Control-Plane/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Control Plane
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Misc
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Misc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    References
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Documentation Standards
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            Documentation Standards
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../introduction/documentation_getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../standards/interface_template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interface Template
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3" >
        
          
          <label class="md-nav__link" for="__nav_9_3" id="__nav_9_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Governance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_3">
            <span class="md-nav__icon md-icon"></span>
            Governance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../governance/rdk-release-documenation-structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RDK Documentation Structure
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_4" >
        
          
          <label class="md-nav__link" for="__nav_9_4" id="__nav_9_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    White Papers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_4">
            <span class="md-nav__icon md-icon"></span>
            White Papers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../whitepapers/documentation_in_git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation in Git
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../whitepapers/branching_strategies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Branching Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../whitepapers/doxygen_code_documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Doxygen Code Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../whitepapers/engineering_goals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Achieving Engineering Goal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../whitepapers/standardizing_git_commit_messages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commit Message Standards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../whitepapers/interface_version_alignment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interface Version Alignment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../whitepapers/client_usage_of_stable_aidl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client Usage of Stable AIDL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/1.2.-Standards%3A-Issue-Description-Guideline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filing an Issue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_6" >
        
          
          <label class="md-nav__link" for="__nav_9_6" id="__nav_9_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_6">
            <span class="md-nav__icon md-icon"></span>
            FAQ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../external_content/ut-core-wiki/FAQ%3A-Comparing-Python-Development-Platforms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python Development
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../CHANGELOG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ChangeLog
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#document-history" class="md-nav__link">
    <span class="md-ellipsis">
      Document History
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-pages" class="md-nav__link">
    <span class="md-ellipsis">
      Related Pages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design-principles" class="md-nav__link">
    <span class="md-ellipsis">
      Design Principles
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#layer-aggregation-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Layer Aggregation Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#directory-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Directory Layout
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Directory Layout">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples-by-layer" class="md-nav__link">
    <span class="md-ellipsis">
      Examples by Layer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Integration Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-linking-and-dlopen-support" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic Linking and dlopen() Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dynamic Linking and dlopen() Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples-by-layer_1" class="md-nav__link">
    <span class="md-ellipsis">
      Examples by Layer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apparmor-integration-and-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      AppArmor Integration and Permissions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AppArmor Integration and Permissions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apparmor-profile-structure" class="md-nav__link">
    <span class="md-ellipsis">
      AppArmor Profile Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-by-layer_2" class="md-nav__link">
    <span class="md-ellipsis">
      Examples by Layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Enforcement Policy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-and-runtime-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Update and Runtime Policy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operational-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Operational Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operational Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filesystem-access-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Filesystem Access Policy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-footprint-declarations" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Footprint Declarations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systemd-service-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Systemd Service Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      Boot Sequence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-by-layer_3" class="md-nav__link">
    <span class="md-ellipsis">
      Examples by Layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-management" class="md-nav__link">
    <span class="md-ellipsis">
      Log Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-by-layer_4" class="md-nav__link">
    <span class="md-ellipsis">
      Examples by Layer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples by Layer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log-file-rotation-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Log File Rotation Integration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Log Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#startup-configuration-application" class="md-nav__link">
    <span class="md-ellipsis">
      Startup Configuration Application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      Logging Mechanism
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#syslog-ng-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Syslog-ng Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-declaration-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      Version Declaration (Recommended)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-example-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Appendix: Example Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix: Example Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-vendor-layer-module-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Example 1: Vendor Layer Module Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Directory Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-snippet-yocto-style-do_install" class="md-nav__link">
    <span class="md-ellipsis">
      Installation Snippet (Yocto-style do_install())
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-version-file" class="md-nav__link">
    <span class="md-ellipsis">
      Example VERSION File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compliance-notes-vendor-example" class="md-nav__link">
    <span class="md-ellipsis">
      Compliance Notes (Vendor Example)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-middleware-layer-module-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Example 2: Middleware Layer Module Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 2: Middleware Layer Module Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#directory-structure_1" class="md-nav__link">
    <span class="md-ellipsis">
      Directory Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-manifestjson" class="md-nav__link">
    <span class="md-ellipsis">
      Example manifest.json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-snippet-yocto-style-do_install" class="md-nav__link">
    <span class="md-ellipsis">
      Integration Snippet (Yocto-style do_install())
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-systemd-service-file" class="md-nav__link">
    <span class="md-ellipsis">
      Example Systemd Service File
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compliance-notes-middleware-example" class="md-nav__link">
    <span class="md-ellipsis">
      Compliance Notes (Middleware Example)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="directory-and-dynamic-linking-specification">Directory and Dynamic Linking Specification</h1>
<h2 id="document-history">Document History</h2>
<table>
<thead>
<tr>
<th>Date</th>
<th>Author</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td>2025-12-12</td>
<td>G.Weatherup</td>
<td>Updated for multi-layer architecture</td>
</tr>
<tr>
<td>2025-05-21</td>
<td>G.Weatherup</td>
<td>Draft Revision</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Draft Document</p>
<p>This document is currently in <strong>draft form</strong> and under active discussion. Specifications, examples, and recommendations may change based on review feedback and implementation experience.</p>
</div>
<h2 id="related-pages">Related Pages</h2>
<div class="admonition tip">
<p class="admonition-title">Related Pages</p>
<ul>
<li><a href="../file_system_architecture/">File System</a></li>
<li><a href="../halif_logging_system_design/">HALIF Logging System Design</a></li>
<li><a href="../logging_system/">Logging System</a></li>
</ul>
</div>
<h2 id="purpose">Purpose</h2>
<p>This document defines the file placement and dynamic linking policies for the <strong>layered file system architecture</strong>. It ensures modularity, maintainability, and reliable integration of components across multiple layers.</p>
<p>Applicable to all modules, libraries, executables, and configuration files delivered in the <code>/vendor</code>, <code>/mw</code>, <code>/product</code>, and <code>/apps</code> layers.</p>
<div class="admonition note">
<p class="admonition-title">Multi-Layer Architecture</p>
<p>Each layer (<code>/vendor</code>, <code>/mw</code>, <code>/product</code>, <code>/apps</code>) follows the same structural conventions while maintaining independence. For architectural overview, see <a href="../file_system_architecture/">File System</a>.</p>
</div>
<h2 id="design-principles">Design Principles</h2>
<ul>
<li><strong>Self-contained Modules</strong>: Each module resides within its own directory under <code>/&lt;layer&gt;/&lt;module&gt;/</code> (e.g., <code>/vendor/&lt;module&gt;/</code>, <code>/mw/&lt;module&gt;/</code>).</li>
<li><strong>Layer Isolation</strong>: Each layer (<code>/vendor</code>, <code>/mw</code>, <code>/product</code>, <code>/apps</code>) is an independent mount point, allowing separate updates, versioning, and integrity checks.</li>
<li><strong>Runtime Discovery</strong>: Upper layers discover available modules via standardised layer aggregation directories (e.g., <code>/vendor/bin/</code>, <code>/vendor/lib/</code>), enabling platform-independent operation without compile-time knowledge of specific vendor modules.</li>
<li><strong>No Global Path Pollution</strong>: Module recipes never directly modify system directories like <code>/etc</code> or <code>/lib</code>; system integration is handled by boot/init processes.</li>
<li><strong>Independent OSS Management</strong>: Each layer manages its own Open Source Software components consumed exclusively from its mount point.</li>
</ul>
<h2 id="layer-aggregation-architecture">Layer Aggregation Architecture</h2>
<p><strong>Design Goal</strong>: Enable the middleware layer to boot identically across all platforms without knowledge of vendor-specific modules.</p>
<p><strong>Boot Sequence</strong>:</p>
<ol>
<li><strong>Kernel</strong> boots and mounts read-only layers (<code>/vendor</code>, <code>/mw</code>, <code>/apps</code>)</li>
<li><strong>Boot sequence</strong> (primarily controlled by <code>/mw</code> but operating generically across all layer mount points) discovers available resources by scanning <strong>fixed aggregation directories</strong>:</li>
<li><code>/vendor/bin/*</code> - all vendor executables (symlinks to module binaries)</li>
<li><code>/vendor/lib/*</code> - all vendor libraries (symlinks to module libraries)</li>
<li><code>/vendor/systemd/*</code> - all vendor services (symlinks to module services)</li>
<li><code>/vendor/ld.so.conf.d/*</code> - all vendor linker configs (symlinks to module configs)</li>
<li><code>/vendor/app_armor/*</code> - all vendor profiles (symlinks to module profiles)</li>
<li>Same pattern applies to <code>/mw</code>, <code>/apps</code>, and other layer mount points</li>
<li><strong>Init system</strong> integrates discovered resources into system-wide locations</li>
</ol>
<p><strong>Key Principle</strong>: The boot sequence operates generically across all layer mount points without needing to know specific module names, paths, or what hardware exists. It simply processes everything present in the standard aggregation directories of each mounted layer.</p>
<p><strong>Aggregation Directory Structure</strong>:</p>
<p>Each layer provides standardised directories containing symlinks to all module resources:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>/&lt;layer&gt;/bin/<span class="w">           </span><span class="c1"># Symlinks to all module executables</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>/&lt;layer&gt;/lib/<span class="w">           </span><span class="c1"># Symlinks to all module libraries</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>/&lt;layer&gt;/etc/<span class="w">           </span><span class="c1"># Symlinks to all module configurations</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>/&lt;layer&gt;/systemd/<span class="w">       </span><span class="c1"># Symlinks to all module service files</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>/&lt;layer&gt;/app_armor/<span class="w">     </span><span class="c1"># Symlinks to all module AppArmor profiles</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>/&lt;layer&gt;/ld.so.conf.d/<span class="w">  </span><span class="c1"># Symlinks to all module linker configs</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>/&lt;layer&gt;/logrotate.d/<span class="w">   </span><span class="c1"># Symlinks to all module logrotate configs</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>/&lt;layer&gt;/memory/<span class="w">        </span><span class="c1"># Symlinks to all module memory declarations</span>
</span></code></pre></div>
<p><strong>Discovery Example</strong>:</p>
<p>Boot sequence discovers vendor services without prior knowledge:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Boot sequence has no idea what vendor modules exist</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="c1"># It simply discovers and processes everything in the aggregation directory</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">for</span><span class="w"> </span>service<span class="w"> </span><span class="k">in</span><span class="w"> </span>/vendor/systemd/*.service<span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$service</span><span class="s2">&quot;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="k">done</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c1"># Same pattern for dynamic linker - no module-specific knowledge needed</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="k">for</span><span class="w"> </span>conf<span class="w"> </span><span class="k">in</span><span class="w"> </span>/vendor/ld.so.conf.d/*.conf<span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">  </span><span class="c1"># Process discovered linker configuration</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="k">done</span>
</span></code></pre></div>
<p><strong>Example Layer Aggregation</strong> (vendor layer with HDMI and Audio modules):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Vendor layer aggregation directories (boot sequence only knows these exist)</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>/vendor/bin/
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="w"> </span>hdmi-daemon<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/hdmi/bin/hdmi-daemon
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="w"> </span>audio-service<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/audio/bin/audio-service
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>/vendor/lib/
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">  </span><span class="w"> </span>libhdmi.so.1.0<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/hdmi/lib/libhdmi.so.1.0
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">  </span><span class="w"> </span>libaudio.so.2.3<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/audio/lib/libaudio.so.2.3
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>/vendor/systemd/
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">  </span><span class="w"> </span>vendor-hdmi.service<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/hdmi/systemd/vendor-hdmi.service
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">  </span><span class="w"> </span>vendor-audio.service<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/audio/systemd/vendor-audio.service
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>/vendor/ld.so.conf.d/
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">  </span><span class="w"> </span>vendor-hdmi.conf<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/hdmi/ld.so.conf.d/vendor-hdmi.conf
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">  </span><span class="w"> </span>vendor-audio.conf<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/audio/ld.so.conf.d/vendor-audio.conf
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="c1"># Module directories (boot sequence doesn&#39;t directly access these)</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>/vendor/hdmi/
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">  </span><span class="w"> </span>bin/hdmi-daemon
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">  </span><span class="w"> </span>lib/libhdmi.so.1.0
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">  </span><span class="w"> </span>systemd/vendor-hdmi.service
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">  </span><span class="w"> </span>ld.so.conf.d/vendor-hdmi.conf
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>/vendor/audio/
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">  </span><span class="w"> </span>bin/audio-service
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">  </span><span class="w"> </span>lib/libaudio.so.2.3
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">  </span><span class="w"> </span>systemd/vendor-audio.service
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">  </span><span class="w"> </span>ld.so.conf.d/vendor-audio.conf
</span></code></pre></div>
<p><strong>Boot-Agnostic Processing</strong>: The boot sequence processes <code>/vendor/systemd/*.service</code> without needing to know that <code>hdmi</code> or <code>audio</code> modules exist. Dependencies are resolved through the service files themselves.</p>
<p><strong>System Integration</strong> (pre-configured in rootfs at build time, out of scope for module recipes):</p>
<p>The rootfs is <strong>read-only</strong> and <strong>pre-configured</strong> at build time with fixed symlinks to known mount point locations. These mount points can contain different content depending on which layer image is mounted at runtime.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Rootfs is pre-configured with fixed symlinks to mount point aggregation locations</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="c1"># These are created once during rootfs image build, NOT at runtime</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="c1"># Dynamic linker - fixed symlink to mount point location</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>/etc/ld.so.conf.d/vendor.conf<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/ld.so.conf.d/vendor.conf
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>/etc/ld.so.conf.d/mw.conf<span class="w"> </span>-&gt;<span class="w"> </span>/mw/ld.so.conf.d/mw.conf
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>/etc/ld.so.conf.d/apps.conf<span class="w"> </span>-&gt;<span class="w"> </span>/apps/ld.so.conf.d/apps.conf
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="c1"># Systemd - fixed symlink to mount point location</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="c1"># Each layer provides multiple milestone targets for fine-grained boot sequencing</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="c1"># Module services within a layer can depend on each other (e.g., After=vendor-hdmi.service)</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="c1"># System integration only links the layer-level milestone targets (early/late)</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>/etc/systemd/system/vendor-early.target<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/systemd/vendor-early.target
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>/etc/systemd/system/vendor-late.target<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/systemd/vendor-late.target
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>/etc/systemd/system/mw-early.target<span class="w"> </span>-&gt;<span class="w"> </span>/mw/systemd/mw-early.target
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>/etc/systemd/system/mw-late.target<span class="w"> </span>-&gt;<span class="w"> </span>/mw/systemd/mw-late.target
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>/etc/systemd/system/app-early.target<span class="w"> </span>-&gt;<span class="w"> </span>/app/systemd/app-early.target
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>/etc/systemd/system/app-late.target<span class="w"> </span>-&gt;<span class="w"> </span>/app/systemd/app-late.target
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="c1"># AppArmor - fixed symlink to consolidated layer profiles</span>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>/etc/apparmor.d/vendor.profile<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/etc/app_armor/vendor.profile
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>/etc/apparmor.d/mw.profile<span class="w"> </span>-&gt;<span class="w"> </span>/mw/etc/app_armor/mw.profile
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>/etc/apparmor.d/apps.profile<span class="w"> </span>-&gt;<span class="w"> </span>/apps/etc/app_armor/apps.profile
</span></code></pre></div>
<p><strong>Runtime Behavior</strong>: When <code>/vendor</code> is mounted (could be vendor_a or vendor_b), the pre-configured <code>/etc/ld.so.conf.d/vendor.conf</code> symlink automatically points to whatever content exists at <code>/vendor/ld.so.conf.d/vendor.conf</code> in the mounted image. After mount, <code>ldconfig</code> regenerates the cache with the discovered content.</p>
<p><strong>Platform Independence</strong>: The rootfs is built once with fixed symlinks to known mount point locations (<code>/vendor</code>, <code>/mw</code>, <code>/apps</code>). At runtime, different vendor/middleware images can be mounted at these locations, and the system automatically uses whatever content is present. No runtime discovery or reconfiguration is needed.</p>
<div class="admonition important">
<p class="admonition-title">Module Recipe Scope</p>
<p>Module recipes (<code>do_install()</code>) are <strong>only</strong> responsible for:
1. Installing files to <code>/&lt;layer&gt;/&lt;module&gt;/</code>
2. Creating layer aggregation symlinks in <code>/&lt;layer&gt;/{bin,lib,etc,systemd,app_armor,ld.so.conf.d}/</code>
Module recipes <strong>must never</strong> create symlinks in <code>/etc/</code>, <code>/lib/</code>, or other system directories. System integration is the responsibility of the boot/init process.</p>
</div>
<h2 id="directory-layout">Directory Layout</h2>
<p>Each module in any layer should follow the directory convention:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>/&lt;layer&gt;/&lt;module&gt;/<span class="w">              </span><span class="c1"># Where &lt;layer&gt; is vendor, mw, product, or apps</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w"> </span>bin/<span class="w">          </span><span class="c1"># Executables specific to the module</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w"> </span>lib/<span class="w">          </span><span class="c1"># Shared/static libraries used by the module</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w"> </span>etc/<span class="w">          </span><span class="c1"># Configuration files for the module</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">   </span><span class="w"> </span>manifest.json<span class="w">          </span><span class="c1"># Module metadata and dependencies</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w"> </span>data/<span class="w">         </span><span class="c1"># Optional runtime or persistent module data</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w"> </span>app_armor/<span class="w">    </span><span class="c1"># Optional AppArmor profiles for the module</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w"> </span>systemd/<span class="w">      </span><span class="c1"># Optional systemd service files</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w"> </span>memory/<span class="w">       </span><span class="c1"># Static guide to resource usage declarations</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">   </span><span class="w"> </span>usage.conf<span class="w">             </span><span class="c1"># Memory footprint declarations</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w"> </span>logs/<span class="w"> </span>-&gt;<span class="w"> </span>/var/log/&lt;layer&gt;/&lt;module&gt;/<span class="w">   </span><span class="c1"># Writable logs symlink</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w"> </span>ld.so.conf.d/<span class="w"> </span><span class="c1"># Optional linker path configuration for symlink</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w"> </span>logrotate.d/<span class="w">  </span><span class="c1"># Optional logrotate configuration for symlink</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w"> </span>VERSION<span class="w">       </span><span class="c1"># Module version and build information (recommended)</span>
</span></code></pre></div>
<h3 id="examples-by-layer">Examples by Layer</h3>
<p><strong>Vendor Layer</strong> (<code>/vendor/&lt;module&gt;/</code>):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>/vendor/hdmi/
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w"> </span>bin/hdmi-daemon
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w"> </span>lib/libhdmi.so.1.0
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w"> </span>etc/hdmi.conf
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w"> </span>VERSION
</span></code></pre></div>
<p><strong>Middleware Layer</strong> (<code>/mw/&lt;module&gt;/</code>):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>/mw/streaming/
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w"> </span>bin/stream-manager
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w"> </span>lib/libstreaming.so.2.0
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w"> </span>etc/streaming.conf
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w"> </span>VERSION
</span></code></pre></div>
<p><strong>Product Layer</strong> (configuration-only, see <a href="../file_system_architecture/">File System</a>):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>/product/etc/
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w"> </span>as/config.yaml
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w"> </span>entservices/config.yaml
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w"> </span>rdkappmanager/config.yaml
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Layer Examples</p>
<p>For complete layer structure examples and details, see <a href="../file_system_architecture/">File System</a>.</p>
</div>
<h2 id="integration-requirements">Integration Requirements</h2>
<ul>
<li>Executables must be invoked using absolute paths (e.g., <code>/vendor/&lt;module&gt;/bin/daemon</code>, <code>/mw/&lt;module&gt;/bin/service</code>).</li>
<li>Any module requiring dynamic libraries must either:</li>
<li>Embed RPATH during linking (<code>-Wl,-rpath,/&lt;layer&gt;/&lt;module&gt;/lib</code>), or</li>
<li>Rely on linker cache updates via <code>/etc/ld.so.conf.d/</code> configuration.</li>
<li>Environment variables (e.g., <code>LD_LIBRARY_PATH</code>) must not be relied upon at runtime.</li>
<li>Cross-layer dependencies must be declared in the module's <code>etc/manifest.json</code> file.</li>
<li>Each layer maintains independence  libraries from one layer should not directly link against internal libraries of another layer unless through well-defined interfaces.</li>
</ul>
<h2 id="dynamic-linking-and-dlopen-support">Dynamic Linking and <code>dlopen()</code> Support</h2>
<p><strong>Requirement: Module libraries must be made visible to the system linker via layer aggregation directories.</strong></p>
<p>Each module in any layer must provide a linker configuration file:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>/&lt;layer&gt;/&lt;module&gt;/ld.so.conf.d/&lt;layer&gt;-&lt;module&gt;.conf
</span></code></pre></div>
<p><strong>Module Recipe Responsibility</strong>: Create layer aggregation symlink:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>/&lt;layer&gt;/ld.so.conf.d/&lt;layer&gt;-&lt;module&gt;.conf<span class="w"> </span>-&gt;<span class="w"> </span>/&lt;layer&gt;/&lt;module&gt;/ld.so.conf.d/&lt;layer&gt;-&lt;module&gt;.conf
</span></code></pre></div>
<p><strong>Rootfs Configuration</strong> (pre-configured at build time, out of scope for module recipes): Fixed symlink to mount point:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># Rootfs contains pre-configured symlink (created once during rootfs build)</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>/etc/ld.so.conf.d/&lt;layer&gt;.conf<span class="w"> </span>-&gt;<span class="w"> </span>/&lt;layer&gt;/ld.so.conf.d/&lt;layer&gt;.conf
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="c1"># After layer mount, regenerate cache with mounted content</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>ldconfig
</span></code></pre></div>
<p><strong>Content at Mount Point</strong>: The <code>/&lt;layer&gt;/ld.so.conf.d/&lt;layer&gt;.conf</code> file at the mount point contains includes for all module configs:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># /vendor/ld.so.conf.d/vendor.conf (created by layer build, contains all module paths)</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>include<span class="w"> </span>/vendor/ld.so.conf.d/*.conf
</span></code></pre></div>
<p><strong>Boot-Agnostic Operation</strong>: The rootfs contains a single pre-configured symlink <code>/etc/ld.so.conf.d/&lt;layer&gt;.conf</code> pointing to <code>/&lt;layer&gt;/ld.so.conf.d/&lt;layer&gt;.conf</code>. This works identically whether the mounted layer contains 2 modules or 20 modules - the content at the mount point handles the inclusion of all discovered modules.</p>
<h3 id="examples-by-layer_1">Examples by Layer</h3>
<p><strong>Vendor Module</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># File in module directory</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>/vendor/input/ld.so.conf.d/vendor-input.conf
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>Contents:<span class="w"> </span>/vendor/input/lib
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="c1"># Layer aggregation (created by module recipe at build time)</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>/vendor/ld.so.conf.d/vendor-input.conf<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/input/ld.so.conf.d/vendor-input.conf
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="c1"># System integration (created at runtime by boot/init from aggregation directory)</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>/etc/ld.so.conf.d/vendor-input.conf<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/ld.so.conf.d/vendor-input.conf
</span></code></pre></div>
<p><strong>Middleware Module</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1"># File in module directory</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>/mw/streaming/ld.so.conf.d/mw-streaming.conf
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>Contents:<span class="w"> </span>/mw/streaming/lib
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="c1"># Layer aggregation (created by module recipe at build time)</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>/mw/ld.so.conf.d/mw-streaming.conf<span class="w"> </span>-&gt;<span class="w"> </span>/mw/streaming/ld.so.conf.d/mw-streaming.conf
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="c1"># System integration (created at runtime by boot/init from aggregation directory)</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>/etc/ld.so.conf.d/mw-streaming.conf<span class="w"> </span>-&gt;<span class="w"> </span>/mw/ld.so.conf.d/mw-streaming.conf
</span></code></pre></div>
<p><strong>Post-Install Action:</strong> The system must execute <code>ldconfig</code> after installation or image build to regenerate the dynamic linker cache.</p>
<h2 id="apparmor-integration-and-permissions">AppArmor Integration and Permissions</h2>
<p>To maintain security boundaries and prevent privilege escalation, each module integrated into any layer must be governed by an AppArmor profile.</p>
<h3 id="apparmor-profile-structure">AppArmor Profile Structure</h3>
<p>Each module will include its AppArmor profile in:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>/&lt;layer&gt;/&lt;module&gt;/app_armor/&lt;layer&gt;-&lt;module&gt;.profile
</span></code></pre></div>
<p><strong>Module Recipe Responsibility</strong>: Create layer aggregation symlink:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>/&lt;layer&gt;/app_armor/&lt;layer&gt;-&lt;module&gt;.profile<span class="w"> </span>-&gt;<span class="w"> </span>/&lt;layer&gt;/&lt;module&gt;/app_armor/&lt;layer&gt;-&lt;module&gt;.profile
</span></code></pre></div>
<p><strong>Layer-Wide Profile Consolidation</strong>: A consolidated profile for each layer includes or references all module profiles:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>/&lt;layer&gt;/etc/app_armor/&lt;layer&gt;.profile<span class="w">  </span><span class="c1"># Consolidated profile including all module profiles</span>
</span></code></pre></div>
<p><strong>Rootfs Configuration</strong> (pre-configured at build time, out of scope for module recipes): Fixed symlink to mount point:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1"># Rootfs contains pre-configured symlink (created once during rootfs build)</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>/etc/apparmor.d/&lt;layer&gt;.profile<span class="w"> </span>-&gt;<span class="w"> </span>/&lt;layer&gt;/etc/app_armor/&lt;layer&gt;.profile
</span></code></pre></div>
<p>This consolidated approach allows boot/init to load a single profile per layer that encompasses all modules, rather than discovering and loading individual module profiles.</p>
<h3 id="examples-by-layer_2">Examples by Layer</h3>
<p><strong>Vendor Layer</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1"># Individual module profiles (created by module recipe at build time)</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>/vendor/etc/app_armor/vendor-hdmi.profile<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/hdmi/app_armor/vendor-hdmi.profile
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>/vendor/etc/app_armor/vendor-audio.profile<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/audio/app_armor/vendor-audio.profile
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="c1"># Consolidated vendor profile (includes or references all module profiles)</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>/vendor/etc/app_armor/vendor.profile
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">  </span><span class="c1">#include &quot;/vendor/app_armor/vendor-hdmi.profile&quot;</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">  </span><span class="c1">#include &quot;/vendor/app_armor/vendor-audio.profile&quot;</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="c1"># System integration (created at runtime by boot/init - single profile per layer)</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>/etc/apparmor.d/vendor.profile<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/etc/app_armor/vendor.profile
</span></code></pre></div>
<p><strong>Middleware Layer</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1"># Individual module profiles (created by module recipe at build time)</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>/mw/app_armor/mw-streaming.profile<span class="w"> </span>-&gt;<span class="w"> </span>/mw/streaming/app_armor/mw-streaming.profile
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>/mw/app_armor/mw-browser.profile<span class="w"> </span>-&gt;<span class="w"> </span>/mw/browser/app_armor/mw-browser.profile
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="c1"># Consolidated middleware profile (includes or references all module profiles)</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>/mw/etc/app_armor/mw.profile
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">  </span><span class="c1">#include &quot;/mw/app_armor/mw-streaming.profile&quot;</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">  </span><span class="c1">#include &quot;/mw/app_armor/mw-browser.profile&quot;</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="c1"># System integration (created at runtime by boot/init - single profile per layer)</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>/etc/apparmor.d/mw.profile<span class="w"> </span>-&gt;<span class="w"> </span>/mw/etc/app_armor/mw.profile
</span></code></pre></div>
<h3 id="enforcement-policy">Enforcement Policy</h3>
<ul>
<li>Profiles must be in enforced mode to provide real confinement.</li>
<li>Profiles are activated via systemd unit or application launcher.</li>
<li>Install scripts must create appropriate symlinks into <code>/etc/apparmor.d/</code>.</li>
<li>System integrators must validate that all paths used by the module are declared.</li>
</ul>
<h2 id="update-and-runtime-policy">Update and Runtime Policy</h2>
<ul>
<li>All layers (<code>/vendor</code>, <code>/mw</code>, <code>/product</code>, <code>/apps</code>) are treated as <strong>read-only</strong> at runtime.</li>
<li>Writable runtime data for modules should be stored under <code>/var/&lt;layer&gt;/&lt;module&gt;/</code>.</li>
<li>Updates to modules must not affect global system directories outside of <code>/etc/ld.so.conf.d/</code> and <code>/etc/apparmor.d/</code> symlinks.</li>
<li>AppArmor profiles should be validated against updated module paths post-deployment.</li>
<li><strong>Layer Independence</strong>: Updates to one layer (e.g., <code>/mw</code>) must not require rebuilding other layers (e.g., <code>/vendor</code>), provided interface contracts are maintained.</li>
<li><strong>Version Pinning</strong>: Cross-layer dependencies must specify version requirements in manifest files to ensure compatibility.</li>
</ul>
<h2 id="operational-considerations">Operational Considerations</h2>
<h3 id="filesystem-access-policy">Filesystem Access Policy</h3>
<ul>
<li>All layers (<code>/vendor</code>, <code>/mw</code>, <code>/product</code>, <code>/apps</code>) are <strong>read-only</strong> at runtime.</li>
<li><code>/&lt;layer&gt;/&lt;module&gt;/log</code> is the designated <strong>writable</strong> path for runtime data, logs, and override configurations; this is a symbolic link from <code>/var/log/&lt;layer&gt;/&lt;module&gt;/</code></li>
<li>Modules must not write to <code>/etc</code>, <code>/usr</code>, or other immutable parts of the root filesystem.</li>
<li>Each layer maintains isolated writable storage under <code>/var/&lt;layer&gt;/</code> to prevent cross-contamination.</li>
</ul>
<h3 id="memory-footprint-declarations">Memory Footprint Declarations</h3>
<ul>
<li>
<p>Each module must include a <code>memory/usage.conf</code> file declaring expected heap, stack, and static memory usage.</p>
</li>
<li>
<p>Format:</p>
</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nv">heap</span><span class="o">=</span>4MB
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="nv">stack</span><span class="o">=</span>512KB
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="nv">static</span><span class="o">=</span>1MB
</span></code></pre></div>
<ul>
<li>This allows the system to pre-allocate or validate resource claims during module startup.</li>
</ul>
<h3 id="systemd-service-integration">Systemd Service Integration</h3>
<ul>
<li>Each module may include its own <code>.service</code> file in <code>/&lt;layer&gt;/&lt;module&gt;/systemd/</code>.</li>
</ul>
<p><strong>Module Recipe Responsibility</strong>: Create layer aggregation symlink:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>/&lt;layer&gt;/systemd/&lt;layer&gt;-&lt;module&gt;.service<span class="w"> </span>-&gt;<span class="w"> </span>/&lt;layer&gt;/&lt;module&gt;/systemd/&lt;layer&gt;-&lt;module&gt;.service
</span></code></pre></div>
<p><strong>Rootfs Configuration</strong> (pre-configured at build time, out of scope for module recipes): Fixed symlinks to mount point:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1"># Rootfs contains pre-configured symlinks (created once during rootfs build)</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="c1"># Systemd can be configured to include all services from mount point directories</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>/etc/systemd/system/&lt;layer&gt;.target.wants/<span class="w"> </span>-&gt;<span class="w"> </span>/&lt;layer&gt;/systemd/
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="c1"># Or use systemd drop-ins to enable services from mount point</span>
</span></code></pre></div>
<ul>
<li>Services must declare dependencies using <code>After=</code>, <code>Requires=</code>, and optionally <code>WatchdogSec=</code> for health monitoring.</li>
<li><strong>Layer Boundaries</strong>: Lower-layer services (e.g., vendor) should define milestone targets for upper layers to depend on, but must not directly reference upper-layer services.</li>
<li><strong>Middleware Control</strong>: Middleware controls the boot sequence but delegates to layer-specific milestone targets without needing knowledge of individual vendor services.</li>
<li><strong>Milestone Targets</strong>: Each layer provides early and late targets (<code>vendor-early.target</code>, <code>vendor-late.target</code>, <code>mw-early.target</code>, <code>mw-late.target</code>, <code>app-early.target</code>, <code>app-late.target</code>) for boot sequencing.</li>
</ul>
<h3 id="boot-sequence">Boot Sequence</h3>
<p>The following diagram illustrates the system boot sequence and layer milestone targets:</p>
<pre class="mermaid"><code>graph TD
    Start[Kernel Boot] --&gt; MountLayers[Mount Layers: /vendor, /mw, /product, /apps]
    MountLayers --&gt; Ldconfig[ldconfig: Regenerate dynamic linker cache]
    Ldconfig --&gt; SystemdInit[Systemd Init]

    SystemdInit --&gt; VendorEarly[vendor-early.target]
    VendorEarly --&gt; VendorServices[Vendor Services Start]
    VendorServices --&gt; VendorLate[vendor-late.target]

    VendorLate --&gt; MwEarly[mw-early.target]
    MwEarly --&gt; MwServices[MW Services Start]
    MwServices --&gt; GraphicsReady[Graphics Ready Milestone?]
    GraphicsReady --&gt; MwLate[mw-late.target]

    MwLate --&gt; AppEarly[app-early.target]
    AppEarly --&gt; AppServices[Application Services Start]
    AppServices --&gt; AppLate[app-late.target]

    AppLate --&gt; MultiUser[multi-user.target]

    style VendorEarly fill:#fce4ec,stroke:#c2185b
    style VendorLate fill:#fce4ec,stroke:#c2185b
    style MwEarly fill:#e8f5e9,stroke:#2e7d32
    style MwLate fill:#e8f5e9,stroke:#2e7d32
    style AppEarly fill:#e1f5ff,stroke:#01579b
    style AppLate fill:#e1f5ff,stroke:#01579b</code></pre>
<p><strong>Key Boot Sequence Points</strong>:</p>
<ul>
<li><strong>vendor-early.target</strong>: Critical vendor services needed before middleware starts (e.g., essential hardware drivers)</li>
<li><strong>vendor-late.target</strong>: Full vendor layer operational (all vendor services running)</li>
<li><strong>mw-early.target</strong>: Middleware early initialization services</li>
<li><strong>Graphics Ready</strong>: Optional milestone indicating graphics subsystem is ready for applications</li>
<li><strong>mw-late.target</strong>: Full middleware stack operational (all RDK services running)</li>
<li><strong>app-early.target</strong>: Application layer initialization</li>
<li><strong>app-late.target</strong>: All applications running</li>
<li><strong>multi-user.target</strong>: System fully operational</li>
</ul>
<p>Each layer's internal service ordering and dependencies are the responsibility of that layer. Upper layers only depend on the milestone targets of lower layers, maintaining layer independence.</p>
<h3 id="examples-by-layer_3">Examples by Layer</h3>
<p><strong>Vendor Service</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1"># Layer aggregation (created by module recipe at build time)</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>/vendor/systemd/vendor-hdmi.service<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/hdmi/systemd/vendor-hdmi.service
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="c1"># System integration (created at runtime by boot/init from aggregation directory)</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>/etc/systemd/system/vendor-hdmi.service<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/systemd/vendor-hdmi.service
</span></code></pre></div>
<p><strong>Middleware Service</strong> (depending on vendor milestone):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1"># /mw/streaming/systemd/mw-streaming.service</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="o">[</span>Unit<span class="o">]</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="nv">Description</span><span class="o">=</span>Streaming<span class="w"> </span>Middleware<span class="w"> </span>Service
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="nv">After</span><span class="o">=</span>vendor-layer.target
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="o">[</span>Service<span class="o">]</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="nv">ExecStart</span><span class="o">=</span>/mw/streaming/bin/stream-manager
</span></code></pre></div>
<h3 id="log-management">Log Management</h3>
<ul>
<li>Logs must be written to:</li>
</ul>
<p><code>/&lt;layer&gt;/&lt;module&gt;/log/</code></p>
<ul>
<li>This path must be a symbolic link to:</li>
</ul>
<p><code>/var/log/&lt;layer&gt;/&lt;module&gt;/</code></p>
<p>Logs will be written to <code>/&lt;layer&gt;/&lt;module&gt;/log/</code>, which redirects to the writable <code>/var/log/&lt;layer&gt;/&lt;module&gt;/</code> location.</p>
<p><strong>Layer Initialization Responsibility</strong>: During early boot, each layer's initialization process must create the required log directory structure in <code>/var/log/&lt;layer&gt;/</code> before module services start. This is typically handled by the layer's init script or systemd generator.</p>
<p><strong>Syslog-ng Integration</strong>: Modules use syslog-ng for centralized logging. The platform's syslog-ng configuration routes messages to appropriate log files under <code>/var/log/&lt;layer&gt;/&lt;module&gt;/</code> based on facility and program name.</p>
<h3 id="examples-by-layer_4">Examples by Layer</h3>
<p><strong>Vendor Module</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1"># Module recipe creates symlink (at build time)</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>/vendor/hdmi/log/<span class="w"> </span>-&gt;<span class="w"> </span>/var/log/vendor/hdmi/
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="c1"># Layer init creates directory structure (at boot time)</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/var/log/vendor/hdmi/
</span></code></pre></div>
<p><strong>Middleware Module</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1"># Module recipe creates symlink (at build time)</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>/mw/streaming/log/<span class="w"> </span>-&gt;<span class="w"> </span>/var/log/mw/streaming/
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="c1"># Layer init creates directory structure (at boot time)</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/var/log/mw/streaming/
</span></code></pre></div>
<h4 id="log-file-rotation-integration">Log File Rotation Integration</h4>
<p>Each module may provide a standard logrotate config file:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>/&lt;layer&gt;/&lt;module&gt;/logrotate.d/&lt;layer&gt;-&lt;module&gt;.conf
</span></code></pre></div>
<p><strong>Module Recipe Responsibility</strong>: Create layer aggregation symlink:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>/&lt;layer&gt;/logrotate.d/&lt;layer&gt;-&lt;module&gt;.conf<span class="w"> </span>-&gt;<span class="w"> </span>/&lt;layer&gt;/&lt;module&gt;/logrotate.d/&lt;layer&gt;-&lt;module&gt;.conf
</span></code></pre></div>
<p><strong>Layer-Wide Configuration</strong>: A consolidated logrotate configuration for each layer includes all module configs:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1"># /vendor/etc/logrotate.d/vendor.conf (created by layer build)</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="c1"># This file includes all vendor module logrotate configurations</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>include<span class="w"> </span>/vendor/logrotate.d/vendor-*.conf
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="c1"># /mw/etc/logrotate.d/mw.conf (created by layer build)</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="c1"># This file includes all middleware module logrotate configurations</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>include<span class="w"> </span>/mw/logrotate.d/mw-*.conf
</span></code></pre></div>
<p><strong>Example Content Discovery</strong>: When <code>/vendor</code> is mounted with hdmi and audio modules:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="c1"># Layer aggregation directory contains module configs:</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>/vendor/logrotate.d/
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">  </span><span class="w"> </span>vendor-hdmi.conf<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/hdmi/logrotate.d/vendor-hdmi.conf
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">  </span><span class="w"> </span>vendor-audio.conf<span class="w"> </span>-&gt;<span class="w"> </span>/vendor/audio/logrotate.d/vendor-audio.conf
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="c1"># Consolidated config includes all discovered modules:</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>/vendor/etc/logrotate.d/vendor.conf
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="w">  </span>include<span class="w"> </span>/vendor/logrotate.d/vendor-*.conf
</span></code></pre></div>
<p><strong>Rootfs Configuration</strong> (pre-configured at build time, out of scope for module recipes): Fixed symlink to mount point:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1"># Rootfs contains pre-configured symlink (created once during rootfs build)</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>/etc/logrotate.d/&lt;layer&gt;.conf<span class="w"> </span>-&gt;<span class="w"> </span>/&lt;layer&gt;/etc/logrotate.d/&lt;layer&gt;.conf
</span></code></pre></div>
<p><strong>Example Module Configuration</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1"># /vendor/hdmi/logrotate.d/vendor-hdmi.conf</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>/var/log/vendor/hdmi/*.log<span class="w"> </span><span class="o">{</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="w">  </span>size<span class="w"> </span>100k
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">  </span>rotate<span class="w"> </span><span class="m">5</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">  </span>compress
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">  </span>delaycompress
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="w">  </span>missingok
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="w">  </span>notifempty
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="w">  </span>copytruncate
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="o">}</span>
</span></code></pre></div>
<p>This configuration ensures:</p>
<ul>
<li>Logs are rotated once they exceed 100 KB</li>
<li>Up to 5 old logs are kept</li>
<li>Old logs are compressed to save space</li>
<li>Logging continues uninterrupted via copytruncate</li>
</ul>
<h3 id="log-configuration">Log Configuration</h3>
<p>Build-time log level configuration is defined in:</p>
<p><code>/&lt;layer&gt;/&lt;module&gt;/etc/loglevel.conf</code></p>
<p>Format:</p>
<p><code>loglevel=error</code></p>
<p>The default log level must be set to error.</p>
<h3 id="startup-configuration-application">Startup Configuration Application</h3>
<p>During system startup, each layer's platform components are responsible for applying syslog configuration settings for their modules.</p>
<p>This is platform-specific and may involve setting log levels in drivers, kernel modules, or components using platform-appropriate mechanisms.</p>
<p>Each layer team ensures this file is parsed and its value applied according to the SoCs logging configuration method.</p>
<p>At runtime, a copy of the configuration is made to a writable location:</p>
<p><code>/&lt;layer&gt;/&lt;module&gt;/log/loglevel.conf</code></p>
<p>Wrapper modules will read the log level from the runtime configuration file to support dynamic log level adjustments without requiring a reboot or rebuild.</p>
<p>Supported log levels (ordered by severity, highest to lowest):</p>
<ul>
<li><strong>fatal</strong>  Critical errors causing immediate termination.</li>
<li><strong>error</strong>  Operational failures requiring attention.</li>
<li><strong>warn</strong>  Recoverable anomalies or warnings.</li>
<li><strong>info</strong>  General informational messages.</li>
<li><strong>debug</strong>  Development-level diagnostics.</li>
<li><strong>trace</strong>  Highly granular tracing for deep debugging.</li>
</ul>
<h3 id="logging-mechanism">Logging Mechanism</h3>
<h3 id="syslog-ng-usage">Syslog-ng Usage</h3>
<p>All modules must use syslog-ng for log message emission through the platform's syslog infrastructure.</p>
<p>This ensures logs are centrally accessible and manageable through standard tools (e.g., logread, journalctl, or remote syslog sinks).</p>
<p><strong>Wrapper Requirement</strong>: Direct usage of <code>syslog()</code> is not permitted. Vendors must use the logging wrapper APIs provided by the HAL (Hardware Abstraction Layer).</p>
<p>These wrappers:</p>
<ul>
<li>Read and cache the active log level (as configured by the platform during startup)</li>
<li>Filter messages based on severity</li>
<li>Format and dispatch logs to syslog-ng with appropriate facility and program identifiers</li>
<li>Route to module-specific log files via syslog-ng configuration (e.g., <code>/var/log/&lt;layer&gt;/&lt;module&gt;/&lt;module&gt;.log</code>)</li>
</ul>
<p><strong>Layer Initialization</strong>: Each layer's early init process must ensure <code>/var/log/&lt;layer&gt;/</code> directory structure exists before starting module services that require logging.</p>
<h3 id="version-declaration-recommended">Version Declaration (Recommended)</h3>
<ul>
<li>Each module should include a file <code>/&lt;layer&gt;/&lt;module&gt;/VERSION</code> with contents akin to:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nv">version</span><span class="o">=</span>MAJOR.MINOR.PATCH
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="nv">build_date</span><span class="o">=</span>YYYY-MM-DD<span class="w"> </span>HH:MM:SS<span class="w"> </span>UTC
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="nv">build_sha</span><span class="o">=</span>sha256:&lt;commit-hash&gt;
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="nv">layer</span><span class="o">=</span>vendor<span class="p">|</span>mw<span class="p">|</span>product<span class="p">|</span>apps
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="nv">dependencies</span><span class="o">=</span>&lt;comma-separated<span class="w"> </span>list&gt;
</span></code></pre></div>
<ul>
<li>Version should follow Semantic Versioning (SemVer).</li>
<li>The <code>layer</code> field identifies which layer the module belongs to.</li>
<li>The <code>dependencies</code> field lists runtime dependencies on other modules.</li>
</ul>
<h2 id="appendix-example-integration">Appendix: Example Integration</h2>
<p>This section provides concrete examples of how modules can integrate with the multi-layer architecture in compliance with the directory and dynamic linking policies described above.</p>
<h3 id="example-1-vendor-layer-module-integration">Example 1: Vendor Layer Module Integration</h3>
<p>This example shows how a vendor module integrates with the <code>/vendor/sysint/${sysconfdir}</code> structure.</p>
<h3 id="overview">Overview</h3>
<p>This module is installed under the path <code>/vendor/sysint</code>, with all configuration, systemd, logging, versioning, and dynamic linker artifacts scoped within this directory. Integration points such as AppArmor and ld.so.conf.d use symbolic links into <code>/etc/</code> to preserve system-wide access.</p>
<h3 id="directory-structure">Directory Structure</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>/vendor/sysint/
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w"> </span>etc/
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">   </span><span class="w"> </span>partners_defaults_device.json
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">   </span><span class="w"> </span>device-vendor.properties
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">   </span><span class="w"> </span>rfcdefaults/
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">   </span><span class="w"> </span>logrotation.conf
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="w"> </span>lib/rdk/
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="w">   </span><span class="w"> </span>...
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="w"> </span>systemd/
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="w">   </span><span class="w"> </span>start-up-scripts.service
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="w"> </span>app_armor/
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="w">   </span><span class="w"> </span>vendor-sysint.profile
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="w"> </span>ld.so.conf.d/
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="w">   </span><span class="w"> </span>vendor-sysint.conf
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="w"> </span>VERSION
</span></code></pre></div>
<h3 id="installation-snippet-yocto-style-do_install">Installation Snippet (Yocto-style <code>do_install()</code>)</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nv">INSTALL_ROOT</span><span class="o">=</span><span class="s2">&quot;/vendor/sysint&quot;</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="nv">LAYER</span><span class="o">=</span><span class="s2">&quot;/vendor&quot;</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="c1"># Create module directory structure</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>install<span class="w"> </span>-d<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/<span class="o">{</span>etc,lib/rdk,systemd,app_armor,ld.so.conf.d<span class="o">}</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="c1"># Create layer aggregation directories</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>install<span class="w"> </span>-d<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/<span class="o">{</span>lib,etc,systemd,app_armor,ld.so.conf.d<span class="o">}</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="c1"># Install module files</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0644</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span>/etc/partners_defaults_device.json<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/etc/
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0755</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span>/etc/device-vendor.properties<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/etc/
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>install<span class="w"> </span>-d<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/etc/rfcdefaults
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0755</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span>/lib/rdk/*<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/lib/rdk/
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0644</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span>/systemd_units/start-up-scripts.service<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/systemd/
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a>
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a><span class="c1"># Clean up pre-existing keys</span>
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a><span class="k">for</span><span class="w"> </span>key<span class="w"> </span><span class="k">in</span><span class="w"> </span>MODEL_NUM<span class="w"> </span>FW_VERSION_TAG1<span class="w"> </span>FW_VERSION_TAG2<span class="w"> </span>MANUFACTURE<span class="w"> </span>FRIENDLY_ID<span class="w"> </span>USB_POWER_GPIO_NUMBER<span class="w"> </span>USB_A_POWER_GPIO_NUMBER<span class="w"> </span>MFG_NAME<span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a><span class="w">  </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;/</span><span class="nv">$key</span><span class="s2">/d&quot;</span><span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/etc/device-vendor.properties
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a><span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$key</span><span class="s2">=&lt;default_or_variable_value&gt;&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/etc/device-vendor.properties
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a><span class="k">done</span>
</span><span id="__span-35-22"><a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a>
</span><span id="__span-35-23"><a id="__codelineno-35-23" name="__codelineno-35-23" href="#__codelineno-35-23"></a><span class="c1"># AppArmor profile</span>
</span><span id="__span-35-24"><a id="__codelineno-35-24" name="__codelineno-35-24" href="#__codelineno-35-24"></a>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0644</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span>/etc/apparmor/vendor-sysint.profile<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/app_armor/
</span><span id="__span-35-25"><a id="__codelineno-35-25" name="__codelineno-35-25" href="#__codelineno-35-25"></a>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/app_armor/vendor-sysint.profile<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/app_armor/vendor-sysint.profile
</span><span id="__span-35-26"><a id="__codelineno-35-26" name="__codelineno-35-26" href="#__codelineno-35-26"></a>
</span><span id="__span-35-27"><a id="__codelineno-35-27" name="__codelineno-35-27" href="#__codelineno-35-27"></a><span class="c1"># Dynamic linker configuration</span>
</span><span id="__span-35-28"><a id="__codelineno-35-28" name="__codelineno-35-28" href="#__codelineno-35-28"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span><span class="s2">/lib&quot;</span><span class="w"> </span>&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/ld.so.conf.d/vendor-sysint.conf
</span><span id="__span-35-29"><a id="__codelineno-35-29" name="__codelineno-35-29" href="#__codelineno-35-29"></a>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/ld.so.conf.d/vendor-sysint.conf<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/ld.so.conf.d/vendor-sysint.conf
</span><span id="__span-35-30"><a id="__codelineno-35-30" name="__codelineno-35-30" href="#__codelineno-35-30"></a>
</span><span id="__span-35-31"><a id="__codelineno-35-31" name="__codelineno-35-31" href="#__codelineno-35-31"></a><span class="c1"># Systemd service (layer aggregation)</span>
</span><span id="__span-35-32"><a id="__codelineno-35-32" name="__codelineno-35-32" href="#__codelineno-35-32"></a>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/systemd/start-up-scripts.service<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/systemd/vendor-sysint.service
</span><span id="__span-35-33"><a id="__codelineno-35-33" name="__codelineno-35-33" href="#__codelineno-35-33"></a>
</span><span id="__span-35-34"><a id="__codelineno-35-34" name="__codelineno-35-34" href="#__codelineno-35-34"></a><span class="c1"># Layer aggregation for configuration files</span>
</span><span id="__span-35-35"><a id="__codelineno-35-35" name="__codelineno-35-35" href="#__codelineno-35-35"></a>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/etc/partners_defaults_device.json<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/etc/partners_defaults_device.json
</span><span id="__span-35-36"><a id="__codelineno-35-36" name="__codelineno-35-36" href="#__codelineno-35-36"></a>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/etc/device-vendor.properties<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/etc/device-vendor.properties
</span><span id="__span-35-37"><a id="__codelineno-35-37" name="__codelineno-35-37" href="#__codelineno-35-37"></a>
</span><span id="__span-35-38"><a id="__codelineno-35-38" name="__codelineno-35-38" href="#__codelineno-35-38"></a><span class="c1"># Layer aggregation for libraries</span>
</span><span id="__span-35-39"><a id="__codelineno-35-39" name="__codelineno-35-39" href="#__codelineno-35-39"></a><span class="k">for</span><span class="w"> </span>lib<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/lib/rdk/*<span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-35-40"><a id="__codelineno-35-40" name="__codelineno-35-40" href="#__codelineno-35-40"></a><span class="w">  </span>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/lib/rdk/<span class="k">$(</span>basename<span class="w"> </span><span class="nv">$lib</span><span class="k">)</span><span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/lib/<span class="k">$(</span>basename<span class="w"> </span><span class="nv">$lib</span><span class="k">)</span>
</span><span id="__span-35-41"><a id="__codelineno-35-41" name="__codelineno-35-41" href="#__codelineno-35-41"></a><span class="k">done</span>
</span><span id="__span-35-42"><a id="__codelineno-35-42" name="__codelineno-35-42" href="#__codelineno-35-42"></a>
</span><span id="__span-35-43"><a id="__codelineno-35-43" name="__codelineno-35-43" href="#__codelineno-35-43"></a><span class="c1"># Version metadata</span>
</span><span id="__span-35-44"><a id="__codelineno-35-44" name="__codelineno-35-44" href="#__codelineno-35-44"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;version=</span><span class="k">$(</span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>describe<span class="w"> </span>--tags<span class="w"> </span>--always<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>unknown<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/VERSION
</span><span id="__span-35-45"><a id="__codelineno-35-45" name="__codelineno-35-45" href="#__codelineno-35-45"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;build_date=</span><span class="k">$(</span><span class="nv">TZ</span><span class="o">=</span>UTC<span class="w"> </span>date<span class="w"> </span><span class="s1">&#39;+%Y-%m-%d %H:%M:%S UTC&#39;</span><span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/VERSION
</span><span id="__span-35-46"><a id="__codelineno-35-46" name="__codelineno-35-46" href="#__codelineno-35-46"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;build_sha=sha256:</span><span class="k">$(</span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>rev-parse<span class="w"> </span>HEAD<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>unknown<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/VERSION
</span><span id="__span-35-47"><a id="__codelineno-35-47" name="__codelineno-35-47" href="#__codelineno-35-47"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;layer=vendor&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/VERSION
</span><span id="__span-35-48"><a id="__codelineno-35-48" name="__codelineno-35-48" href="#__codelineno-35-48"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;dependencies=&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/VERSION
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">System Integration</p>
<p>The boot/init process (not this module recipe) is responsible for creating symlinks from <code>/etc/ld.so.conf.d/</code>, <code>/etc/systemd/system/</code>, and <code>/etc/apparmor.d/</code> to the layer aggregation directories.</p>
</div>
<h3 id="example-version-file">Example <code>VERSION</code> File</h3>
<div class="language-ini highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="na">version</span><span class="o">=</span><span class="s">2.5.0</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="na">build_date</span><span class="o">=</span><span class="s">2024-06-20 14:45:30 UTC</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="na">build_sha</span><span class="o">=</span><span class="s">sha256:abcde1234567890abcdef1234567890abcdef1234567890abcdef1234567890</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="na">layer</span><span class="o">=</span><span class="s">vendor</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="na">dependencies</span><span class="o">=</span>
</span></code></pre></div>
<h3 id="compliance-notes-vendor-example">Compliance Notes (Vendor Example)</h3>
<ul>
<li>All artifacts are scoped to the module directory under <code>/vendor/sysint</code>.</li>
<li>Layer aggregation symlinks enable runtime discovery by upper layers.</li>
<li>Module recipe <strong>never</strong> creates symlinks in <code>/etc/</code> or other system directories.</li>
<li>Boot/init process handles system-level integration (out of scope for module recipes).</li>
<li>The <code>VERSION</code> file provides build provenance using the standardized format (version, build_date, build_sha, layer, dependencies).</li>
<li>This supports modular updates and ensures the system remains maintainable, verifiable, and secure.</li>
<li><strong>Platform Independence</strong>: Middleware can boot identically regardless of which vendor modules are present.</li>
</ul>
<h3 id="example-2-middleware-layer-module-integration">Example 2: Middleware Layer Module Integration</h3>
<p>This example shows how a middleware module integrates with the <code>/mw/&lt;module&gt;/</code> structure.</p>
<h4 id="directory-structure_1">Directory Structure</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>/mw/streaming/
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w"> </span>bin/
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">   </span><span class="w"> </span>stream-manager
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w"> </span>lib/
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">   </span><span class="w"> </span>libstreaming.so.2.0
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="w"> </span>etc/
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="w">   </span><span class="w"> </span>streaming.conf
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="w">   </span><span class="w"> </span>manifest.json
</span><span id="__span-37-9"><a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="w">   </span><span class="w"> </span>loglevel.conf
</span><span id="__span-37-10"><a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="w"> </span>systemd/
</span><span id="__span-37-11"><a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a><span class="w">   </span><span class="w"> </span>mw-streaming.service
</span><span id="__span-37-12"><a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a><span class="w"> </span>app_armor/
</span><span id="__span-37-13"><a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a><span class="w">   </span><span class="w"> </span>mw-streaming.profile
</span><span id="__span-37-14"><a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a><span class="w"> </span>ld.so.conf.d/
</span><span id="__span-37-15"><a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a><span class="w">   </span><span class="w"> </span>mw-streaming.conf
</span><span id="__span-37-16"><a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a><span class="w"> </span>memory/
</span><span id="__span-37-17"><a id="__codelineno-37-17" name="__codelineno-37-17" href="#__codelineno-37-17"></a><span class="w">   </span><span class="w"> </span>usage.conf
</span><span id="__span-37-18"><a id="__codelineno-37-18" name="__codelineno-37-18" href="#__codelineno-37-18"></a><span class="w"> </span>logs/<span class="w"> </span>-&gt;<span class="w"> </span>/var/log/mw/streaming/
</span><span id="__span-37-19"><a id="__codelineno-37-19" name="__codelineno-37-19" href="#__codelineno-37-19"></a><span class="w"> </span>VERSION
</span></code></pre></div>
<h4 id="example-manifestjson">Example manifest.json</h4>
<div class="language-json highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="p">{</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="w">  </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;streaming&quot;</span><span class="p">,</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3.1.0&quot;</span><span class="p">,</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="w">  </span><span class="nt">&quot;layer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mw&quot;</span><span class="p">,</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">  </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="w">    </span><span class="nt">&quot;runtime&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="w">      </span><span class="s2">&quot;vendor-hdmi:2.5.0&quot;</span><span class="p">,</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="w">      </span><span class="s2">&quot;vendor-audio:1.3.0&quot;</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="w">    </span><span class="p">],</span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="w">    </span><span class="nt">&quot;build&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="w">      </span><span class="s2">&quot;toolchain:11.0&quot;</span>
</span><span id="__span-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-38-13"><a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-38-14"><a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="w">  </span><span class="nt">&quot;provides&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-38-15"><a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a><span class="w">    </span><span class="s2">&quot;libstreaming.so.2&quot;</span><span class="p">,</span>
</span><span id="__span-38-16"><a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="w">    </span><span class="s2">&quot;stream-manager&quot;</span>
</span><span id="__span-38-17"><a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="w">  </span><span class="p">],</span>
</span><span id="__span-38-18"><a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a><span class="w">  </span><span class="nt">&quot;conflicts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
</span><span id="__span-38-19"><a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a><span class="w">  </span><span class="nt">&quot;oss_components&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-38-20"><a id="__codelineno-38-20" name="__codelineno-38-20" href="#__codelineno-38-20"></a><span class="w">    </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gstreamer&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.20.3&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;license&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LGPL-2.1&quot;</span><span class="p">},</span>
</span><span id="__span-38-21"><a id="__codelineno-38-21" name="__codelineno-38-21" href="#__codelineno-38-21"></a><span class="w">    </span><span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ffmpeg&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5.1.2&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;license&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LGPL-2.1&quot;</span><span class="p">}</span>
</span><span id="__span-38-22"><a id="__codelineno-38-22" name="__codelineno-38-22" href="#__codelineno-38-22"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-38-23"><a id="__codelineno-38-23" name="__codelineno-38-23" href="#__codelineno-38-23"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="integration-snippet-yocto-style-do_install">Integration Snippet (Yocto-style do_install())</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="nv">INSTALL_ROOT</span><span class="o">=</span><span class="s2">&quot;/mw/streaming&quot;</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="nv">LAYER</span><span class="o">=</span><span class="s2">&quot;/mw&quot;</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="c1"># Create module directory structure</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>install<span class="w"> </span>-d<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/<span class="o">{</span>bin,lib,etc,systemd,app_armor,ld.so.conf.d,memory<span class="o">}</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="c1"># Create layer aggregation directories</span>
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>install<span class="w"> </span>-d<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/<span class="o">{</span>bin,lib,etc,systemd,app_armor,ld.so.conf.d,memory<span class="o">}</span>
</span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>
</span><span id="__span-39-10"><a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="c1"># Create writable log directory</span>
</span><span id="__span-39-11"><a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a>install<span class="w"> </span>-d<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}</span>/var/log/mw/streaming
</span><span id="__span-39-12"><a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a>
</span><span id="__span-39-13"><a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a><span class="c1"># Install binaries and libraries</span>
</span><span id="__span-39-14"><a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0755</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span>/bin/stream-manager<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/bin/
</span><span id="__span-39-15"><a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0644</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span>/lib/libstreaming.so.2.0<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/lib/
</span><span id="__span-39-16"><a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a>ln<span class="w"> </span>-sf<span class="w"> </span>libstreaming.so.2.0<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/lib/libstreaming.so.2
</span><span id="__span-39-17"><a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a>
</span><span id="__span-39-18"><a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a><span class="c1"># Install configuration</span>
</span><span id="__span-39-19"><a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0644</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span>/etc/streaming.conf<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/etc/
</span><span id="__span-39-20"><a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0644</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span>/etc/manifest.json<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/etc/
</span><span id="__span-39-21"><a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;loglevel=error&quot;</span><span class="w"> </span>&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/etc/loglevel.conf
</span><span id="__span-39-22"><a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a>
</span><span id="__span-39-23"><a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a><span class="c1"># Memory declarations</span>
</span><span id="__span-39-24"><a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;heap=8MB&quot;</span><span class="w"> </span>&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/memory/usage.conf
</span><span id="__span-39-25"><a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;stack=1MB&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/memory/usage.conf
</span><span id="__span-39-26"><a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;static=2MB&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/memory/usage.conf
</span><span id="__span-39-27"><a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a>
</span><span id="__span-39-28"><a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a><span class="c1"># Dynamic linker configuration</span>
</span><span id="__span-39-29"><a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span><span class="s2">/lib&quot;</span><span class="w"> </span>&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/ld.so.conf.d/mw-streaming.conf
</span><span id="__span-39-30"><a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/ld.so.conf.d/mw-streaming.conf<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/ld.so.conf.d/mw-streaming.conf
</span><span id="__span-39-31"><a id="__codelineno-39-31" name="__codelineno-39-31" href="#__codelineno-39-31"></a>
</span><span id="__span-39-32"><a id="__codelineno-39-32" name="__codelineno-39-32" href="#__codelineno-39-32"></a><span class="c1"># AppArmor profile (layer aggregation)</span>
</span><span id="__span-39-33"><a id="__codelineno-39-33" name="__codelineno-39-33" href="#__codelineno-39-33"></a>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0644</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span>/apparmor/mw-streaming.profile<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/app_armor/
</span><span id="__span-39-34"><a id="__codelineno-39-34" name="__codelineno-39-34" href="#__codelineno-39-34"></a>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/app_armor/mw-streaming.profile<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/app_armor/mw-streaming.profile
</span><span id="__span-39-35"><a id="__codelineno-39-35" name="__codelineno-39-35" href="#__codelineno-39-35"></a>
</span><span id="__span-39-36"><a id="__codelineno-39-36" name="__codelineno-39-36" href="#__codelineno-39-36"></a><span class="c1"># Systemd service (layer aggregation)</span>
</span><span id="__span-39-37"><a id="__codelineno-39-37" name="__codelineno-39-37" href="#__codelineno-39-37"></a>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0644</span><span class="w"> </span><span class="si">${</span><span class="nv">S</span><span class="si">}</span>/systemd/mw-streaming.service<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/systemd/
</span><span id="__span-39-38"><a id="__codelineno-39-38" name="__codelineno-39-38" href="#__codelineno-39-38"></a>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/systemd/mw-streaming.service<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/systemd/mw-streaming.service
</span><span id="__span-39-39"><a id="__codelineno-39-39" name="__codelineno-39-39" href="#__codelineno-39-39"></a>
</span><span id="__span-39-40"><a id="__codelineno-39-40" name="__codelineno-39-40" href="#__codelineno-39-40"></a><span class="c1"># Layer aggregation for binaries</span>
</span><span id="__span-39-41"><a id="__codelineno-39-41" name="__codelineno-39-41" href="#__codelineno-39-41"></a>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/bin/stream-manager<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/bin/stream-manager
</span><span id="__span-39-42"><a id="__codelineno-39-42" name="__codelineno-39-42" href="#__codelineno-39-42"></a>
</span><span id="__span-39-43"><a id="__codelineno-39-43" name="__codelineno-39-43" href="#__codelineno-39-43"></a><span class="c1"># Layer aggregation for libraries</span>
</span><span id="__span-39-44"><a id="__codelineno-39-44" name="__codelineno-39-44" href="#__codelineno-39-44"></a>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/lib/libstreaming.so.2.0<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/lib/libstreaming.so.2.0
</span><span id="__span-39-45"><a id="__codelineno-39-45" name="__codelineno-39-45" href="#__codelineno-39-45"></a>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/lib/libstreaming.so.2<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/lib/libstreaming.so.2
</span><span id="__span-39-46"><a id="__codelineno-39-46" name="__codelineno-39-46" href="#__codelineno-39-46"></a>
</span><span id="__span-39-47"><a id="__codelineno-39-47" name="__codelineno-39-47" href="#__codelineno-39-47"></a><span class="c1"># Layer aggregation for memory declarations</span>
</span><span id="__span-39-48"><a id="__codelineno-39-48" name="__codelineno-39-48" href="#__codelineno-39-48"></a>ln<span class="w"> </span>-sf<span class="w"> </span><span class="si">${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/memory/usage.conf<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">LAYER</span><span class="si">}</span>/memory/mw-streaming-usage.conf
</span><span id="__span-39-49"><a id="__codelineno-39-49" name="__codelineno-39-49" href="#__codelineno-39-49"></a>
</span><span id="__span-39-50"><a id="__codelineno-39-50" name="__codelineno-39-50" href="#__codelineno-39-50"></a><span class="c1"># Log directory symlink</span>
</span><span id="__span-39-51"><a id="__codelineno-39-51" name="__codelineno-39-51" href="#__codelineno-39-51"></a>ln<span class="w"> </span>-sf<span class="w"> </span>/var/log/mw/streaming<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/logs
</span><span id="__span-39-52"><a id="__codelineno-39-52" name="__codelineno-39-52" href="#__codelineno-39-52"></a>
</span><span id="__span-39-53"><a id="__codelineno-39-53" name="__codelineno-39-53" href="#__codelineno-39-53"></a><span class="c1"># Version file (using YYYY-MM-DD HH:MM:SS UTC format)</span>
</span><span id="__span-39-54"><a id="__codelineno-39-54" name="__codelineno-39-54" href="#__codelineno-39-54"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;version=3.1.0&quot;</span><span class="w"> </span>&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/VERSION
</span><span id="__span-39-55"><a id="__codelineno-39-55" name="__codelineno-39-55" href="#__codelineno-39-55"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;build_date=</span><span class="k">$(</span><span class="nv">TZ</span><span class="o">=</span>UTC<span class="w"> </span>date<span class="w"> </span><span class="s1">&#39;+%Y-%m-%d %H:%M:%S UTC&#39;</span><span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/VERSION
</span><span id="__span-39-56"><a id="__codelineno-39-56" name="__codelineno-39-56" href="#__codelineno-39-56"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;layer=mw&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/VERSION
</span><span id="__span-39-57"><a id="__codelineno-39-57" name="__codelineno-39-57" href="#__codelineno-39-57"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;dependencies=vendor-hdmi:2.5.0,vendor-audio:1.3.0&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="si">${</span><span class="nv">D</span><span class="si">}${</span><span class="nv">INSTALL_ROOT</span><span class="si">}</span>/VERSION
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">System Integration</p>
<p>The boot/init process (not this module recipe) is responsible for creating symlinks from <code>/etc/ld.so.conf.d/</code>, <code>/etc/systemd/system/</code>, and <code>/etc/apparmor.d/</code> to the layer aggregation directories.</p>
</div>
<h4 id="example-systemd-service-file">Example Systemd Service File</h4>
<div class="language-ini highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="k">[Unit]</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="na">Description</span><span class="o">=</span><span class="s">RDK Streaming Middleware Service</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="na">After</span><span class="o">=</span><span class="s">vendor-late.target</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="na">Requires</span><span class="o">=</span><span class="s">vendor-late.target</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="k">[Service]</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="na">Type</span><span class="o">=</span><span class="s">notify</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="na">ExecStart</span><span class="o">=</span><span class="s">/mw/streaming/bin/stream-manager</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="na">Restart</span><span class="o">=</span><span class="s">on-failure</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="na">RestartSec</span><span class="o">=</span><span class="s">5s</span>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="na">WatchdogSec</span><span class="o">=</span><span class="s">30s</span>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a>
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a><span class="k">[Install]</span>
</span><span id="__span-40-14"><a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a><span class="na">WantedBy</span><span class="o">=</span><span class="s">mw-late.target</span>
</span></code></pre></div>
<p><strong>Note</strong>: This service depends on <code>vendor-late.target</code> to ensure all vendor services are operational before starting. It does not reference specific vendor services (e.g., <code>vendor-hdmi.service</code>) directly, maintaining layer independence.</p>
<h3 id="compliance-notes-middleware-example">Compliance Notes (Middleware Example)</h3>
<ul>
<li>All artifacts are scoped to <code>/mw/streaming/</code>.</li>
<li>Layer aggregation symlinks in <code>/mw/bin/</code>, <code>/mw/lib/</code>, etc. enable runtime discovery.</li>
<li>Module recipe <strong>never</strong> creates symlinks in <code>/etc/</code> or other system directories.</li>
<li>Boot/init process handles system-level integration (out of scope for module recipes).</li>
<li>Cross-layer dependencies are explicitly declared in <code>manifest.json</code>.</li>
<li>The systemd service can discover vendor services via <code>/vendor/systemd/*.service</code> at runtime.</li>
<li>Independent OSS components (GStreamer, FFmpeg) are consumed from <code>/mw</code> mount points.</li>
<li>Supports independent updates of the middleware layer without rebuilding vendor layer.</li>
<li><strong>Platform Independence</strong>: This middleware module functions identically across all vendor platforms.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../file_system_architecture/" class="md-footer__link md-footer__link--prev" aria-label="Previous: System Architecture">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                System Architecture
              </div>
            </div>
          </a>
        
        
          
          <a href="../logging_system/" class="md-footer__link md-footer__link--next" aria-label="Next: Logging System">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Logging System
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.footer", "navigation.sections", "navigation.top", "navigation.tracking", "navigation.instant", "toc.follow", "content.code.copy", "content.code.annotate", "content.tooltips", "content.print.stylesheet", "search.highlight", "search.suggest", "search.share", "header.autohide", "announce.dismiss"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.f13b1293.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.1/mermaid.min.js"></script>
      
        <script src="../../../../javascript/mermaid-init.js"></script>
      
    
  </body>
</html>